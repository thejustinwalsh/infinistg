var wP=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var L4=wP((G4,qd)=>{function EP(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var yE={exports:{}},kd={},vE={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=Symbol.for("react.element"),bP=Symbol.for("react.portal"),SP=Symbol.for("react.fragment"),TP=Symbol.for("react.strict_mode"),AP=Symbol.for("react.profiler"),CP=Symbol.for("react.provider"),PP=Symbol.for("react.context"),IP=Symbol.for("react.forward_ref"),RP=Symbol.for("react.suspense"),MP=Symbol.for("react.memo"),kP=Symbol.for("react.lazy"),t_=Symbol.iterator;function NP(t){return t===null||typeof t!="object"?null:(t=t_&&t[t_]||t["@@iterator"],typeof t=="function"?t:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xE=Object.assign,wE={};function Ma(t,e,r){this.props=t,this.context=e,this.refs=wE,this.updater=r||_E}Ma.prototype.isReactComponent={};Ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EE(){}EE.prototype=Ma.prototype;function K0(t,e,r){this.props=t,this.context=e,this.refs=wE,this.updater=r||_E}var q0=K0.prototype=new EE;q0.constructor=K0;xE(q0,Ma.prototype);q0.isPureReactComponent=!0;var r_=Array.isArray,bE=Object.prototype.hasOwnProperty,Z0={current:null},SE={key:!0,ref:!0,__self:!0,__source:!0};function TE(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bE.call(e,n)&&!SE.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];i.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Su,type:t,key:s,ref:o,props:i,_owner:Z0.current}}function DP(t,e){return{$$typeof:Su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Su}function FP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var n_=/\/+/g;function Pp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FP(""+t.key):e.toString(36)}function gc(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Su:case bP:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Pp(o,0):n,r_(i)?(r="",t!=null&&(r=t.replace(n_,"$&/")+"/"),gc(i,e,r,"",function(c){return c})):i!=null&&(J0(i)&&(i=DP(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(n_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",r_(t))for(var l=0;l<t.length;l++){s=t[l];var h=n+Pp(s,l);o+=gc(s,e,r,h,i)}else if(h=NP(t),typeof h=="function")for(t=h.call(t),l=0;!(s=t.next()).done;)s=s.value,h=n+Pp(s,l++),o+=gc(s,e,r,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sh(t,e,r){if(t==null)return t;var n=[],i=0;return gc(t,n,"","",function(s){return e.call(r,s,i++)}),n}function OP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sr={current:null},yc={transition:null},BP={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:yc,ReactCurrentOwner:Z0};function AE(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Sh,forEach:function(t,e,r){Sh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Sh(t,function(){e++}),e},toArray:function(t){return Sh(t,function(e){return e})||[]},only:function(t){if(!J0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Ma;Re.Fragment=SP;Re.Profiler=AP;Re.PureComponent=K0;Re.StrictMode=TP;Re.Suspense=RP;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BP;Re.act=AE;Re.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=xE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Z0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)bE.call(e,h)&&!SE.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&l!==void 0?l[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Su,type:t.type,key:i,ref:s,props:n,_owner:o}};Re.createContext=function(t){return t={$$typeof:PP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CP,_context:t},t.Consumer=t};Re.createElement=TE;Re.createFactory=function(t){var e=TE.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:IP,render:t}};Re.isValidElement=J0;Re.lazy=function(t){return{$$typeof:kP,_payload:{_status:-1,_result:t},_init:OP}};Re.memo=function(t,e){return{$$typeof:MP,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=yc.transition;yc.transition={};try{t()}finally{yc.transition=e}};Re.unstable_act=AE;Re.useCallback=function(t,e){return sr.current.useCallback(t,e)};Re.useContext=function(t){return sr.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return sr.current.useDeferredValue(t)};Re.useEffect=function(t,e){return sr.current.useEffect(t,e)};Re.useId=function(){return sr.current.useId()};Re.useImperativeHandle=function(t,e,r){return sr.current.useImperativeHandle(t,e,r)};Re.useInsertionEffect=function(t,e){return sr.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return sr.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return sr.current.useMemo(t,e)};Re.useReducer=function(t,e,r){return sr.current.useReducer(t,e,r)};Re.useRef=function(t){return sr.current.useRef(t)};Re.useState=function(t){return sr.current.useState(t)};Re.useSyncExternalStore=function(t,e,r){return sr.current.useSyncExternalStore(t,e,r)};Re.useTransition=function(){return sr.current.useTransition()};Re.version="18.3.1";vE.exports=Re;var q=vE.exports;const Tr=bu(q),LP=EP({__proto__:null,default:Tr},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UP=q,zP=Symbol.for("react.element"),GP=Symbol.for("react.fragment"),HP=Object.prototype.hasOwnProperty,$P=UP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jP={key:!0,ref:!0,__self:!0,__source:!0};function CE(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)HP.call(e,n)&&!jP.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:zP,type:t,key:s,ref:o,props:i,_owner:$P.current}}kd.Fragment=GP;kd.jsx=CE;kd.jsxs=CE;yE.exports=kd;var xe=yE.exports,Jm={},PE={exports:{}},Ir={},IE={exports:{}},RE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,G){var D=R.length;R.push(G);e:for(;0<D;){var U=D-1>>>1,ee=R[U];if(0<i(ee,G))R[U]=G,R[D]=ee,D=U;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var G=R[0],D=R.pop();if(D!==G){R[0]=D;e:for(var U=0,ee=R.length,be=ee>>>1;U<be;){var ye=2*(U+1)-1,Pe=R[ye],Te=ye+1,Me=R[Te];if(0>i(Pe,D))Te<ee&&0>i(Me,Pe)?(R[U]=Me,R[Te]=D,U=Te):(R[U]=Pe,R[ye]=D,U=ye);else if(Te<ee&&0>i(Me,D))R[U]=Me,R[Te]=D,U=Te;else break e}}return G}function i(R,G){var D=R.sortIndex-G.sortIndex;return D!==0?D:R.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var h=[],c=[],f=1,p=null,m=3,y=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var G=r(c);G!==null;){if(G.callback===null)n(c);else if(G.startTime<=R)n(c),G.sortIndex=G.expirationTime,e(h,G);else break;G=r(c)}}function A(R){if(E=!1,x(R),!_)if(r(h)!==null)_=!0,le(P);else{var G=r(c);G!==null&&se(A,G.startTime-R)}}function P(R,G){_=!1,E&&(E=!1,S(N),N=-1),y=!0;var D=m;try{for(x(G),p=r(h);p!==null&&(!(p.expirationTime>G)||R&&!fe());){var U=p.callback;if(typeof U=="function"){p.callback=null,m=p.priorityLevel;var ee=U(p.expirationTime<=G);G=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===r(h)&&n(h),x(G)}else n(h);p=r(h)}if(p!==null)var be=!0;else{var ye=r(c);ye!==null&&se(A,ye.startTime-G),be=!1}return be}finally{p=null,m=D,y=!1}}var F=!1,M=null,N=-1,V=5,$=-1;function fe(){return!(t.unstable_now()-$<V)}function Y(){if(M!==null){var R=t.unstable_now();$=R;var G=!0;try{G=M(!0,R)}finally{G?O():(F=!1,M=null)}}else F=!1}var O;if(typeof b=="function")O=function(){b(Y)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ne=X.port2;X.port1.onmessage=Y,O=function(){ne.postMessage(null)}}else O=function(){T(Y,0)};function le(R){M=R,F||(F=!0,O())}function se(R,G){N=T(function(){R(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,le(P))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var D=m;m=G;try{return R()}finally{m=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,G){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=m;m=R;try{return G()}finally{m=D}},t.unstable_scheduleCallback=function(R,G,D){var U=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?U+D:U):D=U,R){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=D+ee,R={id:f++,callback:G,priorityLevel:R,startTime:D,expirationTime:ee,sortIndex:-1},D>U?(R.sortIndex=D,e(c,R),r(h)===null&&R===r(c)&&(E?(S(N),N=-1):E=!0,se(A,D-U))):(R.sortIndex=ee,e(h,R),_||y||(_=!0,le(P))),R},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(R){var G=m;return function(){var D=m;m=G;try{return R.apply(this,arguments)}finally{m=D}}}})(RE);IE.exports=RE;var WP=IE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=q,Pr=WP;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ME=new Set,Kl={};function lo(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(Kl[t]=e,t=0;t<e.length;t++)ME.add(e[t])}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eg=Object.prototype.hasOwnProperty,XP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i_={},s_={};function YP(t){return eg.call(s_,t)?!0:eg.call(i_,t)?!1:XP.test(t)?s_[t]=!0:(i_[t]=!0,!1)}function QP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KP(t,e,r,n){if(e===null||typeof e>"u"||QP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function or(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new or(t,5,!1,t.toLowerCase(),null,!1,!1)});var ey=/[\-:]([a-z])/g;function ty(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ey,ty);$t[e]=new or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ey,ty);$t[e]=new or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ey,ty);$t[e]=new or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new or(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new or(t,1,!1,t.toLowerCase(),null,!0,!0)});function ry(t,e,r,n){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KP(e,r,i,n)&&(r=null),n||i===null?YP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Pi=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Th=Symbol.for("react.element"),jo=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),tg=Symbol.for("react.profiler"),kE=Symbol.for("react.provider"),NE=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),rg=Symbol.for("react.suspense"),ng=Symbol.for("react.suspense_list"),sy=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),DE=Symbol.for("react.offscreen"),o_=Symbol.iterator;function ol(t){return t===null||typeof t!="object"?null:(t=o_&&t[o_]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,Ip;function xl(t){if(Ip===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ip=e&&e[1]||""}return`
`+Ip+t}var Rp=!1;function Mp(t,e){if(!t||Rp)return"";Rp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var h=`
`+i[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=l);break}}}finally{Rp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?xl(t):""}function qP(t){switch(t.tag){case 5:return xl(t.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return t=Mp(t.type,!1),t;case 11:return t=Mp(t.type.render,!1),t;case 1:return t=Mp(t.type,!0),t;default:return""}}function ig(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wo:return"Fragment";case jo:return"Portal";case tg:return"Profiler";case ny:return"StrictMode";case rg:return"Suspense";case ng:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NE:return(t.displayName||"Context")+".Consumer";case kE:return(t._context.displayName||"Context")+".Provider";case iy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sy:return e=t.displayName||null,e!==null?e:ig(t.type)||"Memo";case ji:e=t._payload,t=t._init;try{return ig(t(e))}catch{}}return null}function ZP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ig(e);case 8:return e===ny?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JP(t){var e=FE(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ah(t){t._valueTracker||(t._valueTracker=JP(t))}function OE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=FE(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Uc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sg(t,e){var r=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function a_(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BE(t,e){e=e.checked,e!=null&&ry(t,"checked",e,!1)}function og(t,e){BE(t,e);var r=fs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ag(t,e.type,r):e.hasOwnProperty("defaultValue")&&ag(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function l_(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ag(t,e,r){(e!=="number"||Uc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wl=Array.isArray;function sa(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fs(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function lg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function u_(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(K(92));if(wl(r)){if(1<r.length)throw Error(K(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fs(r)}}function LE(t,e){var r=fs(e.value),n=fs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function h_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function UE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ug(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?UE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ch,zE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ch=Ch||document.createElement("div"),Ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ch.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ql(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eI=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(t){eI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nl[e]=Nl[t]})});function GE(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Nl.hasOwnProperty(t)&&Nl[t]?(""+e).trim():e+"px"}function HE(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=GE(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var tI=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hg(t,e){if(e){if(tI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function cg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dg=null;function oy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fg=null,oa=null,aa=null;function c_(t){if(t=Cu(t)){if(typeof fg!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Bd(e),fg(t.stateNode,t.type,e))}}function $E(t){oa?aa?aa.push(t):aa=[t]:oa=t}function jE(){if(oa){var t=oa,e=aa;if(aa=oa=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function WE(t,e){return t(e)}function VE(){}var kp=!1;function XE(t,e,r){if(kp)return t(e,r);kp=!0;try{return WE(t,e,r)}finally{kp=!1,(oa!==null||aa!==null)&&(VE(),jE())}}function Zl(t,e){var r=t.stateNode;if(r===null)return null;var n=Bd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(K(231,e,typeof r));return r}var pg=!1;if(_i)try{var al={};Object.defineProperty(al,"passive",{get:function(){pg=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{pg=!1}function rI(t,e,r,n,i,s,o,l,h){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(f){this.onError(f)}}var Dl=!1,zc=null,Gc=!1,mg=null,nI={onError:function(t){Dl=!0,zc=t}};function iI(t,e,r,n,i,s,o,l,h){Dl=!1,zc=null,rI.apply(nI,arguments)}function sI(t,e,r,n,i,s,o,l,h){if(iI.apply(this,arguments),Dl){if(Dl){var c=zc;Dl=!1,zc=null}else throw Error(K(198));Gc||(Gc=!0,mg=c)}}function uo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function YE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function d_(t){if(uo(t)!==t)throw Error(K(188))}function oI(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return d_(i),t;if(s===n)return d_(i),e;s=s.sibling}throw Error(K(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?t:e}function QE(t){return t=oI(t),t!==null?KE(t):null}function KE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KE(t);if(e!==null)return e;t=t.sibling}return null}var qE=Pr.unstable_scheduleCallback,f_=Pr.unstable_cancelCallback,aI=Pr.unstable_shouldYield,lI=Pr.unstable_requestPaint,mt=Pr.unstable_now,uI=Pr.unstable_getCurrentPriorityLevel,ay=Pr.unstable_ImmediatePriority,ZE=Pr.unstable_UserBlockingPriority,Hc=Pr.unstable_NormalPriority,hI=Pr.unstable_LowPriority,JE=Pr.unstable_IdlePriority,Nd=null,Qn=null;function cI(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Nd,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:pI,dI=Math.log,fI=Math.LN2;function pI(t){return t>>>=0,t===0?32:31-(dI(t)/fI|0)|0}var Ph=64,Ih=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $c(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=El(l):(s&=o,s!==0&&(n=El(s)))}else o=r&~i,o!==0?n=El(o):s!==0&&(n=El(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-vn(e),i=1<<r,n|=t[r],e&=~i;return n}function mI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gI(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vn(s),l=1<<o,h=i[o];h===-1?(!(l&r)||l&n)&&(i[o]=mI(l,e)):h<=e&&(t.expiredLanes|=l),s&=~l}}function gg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eb(){var t=Ph;return Ph<<=1,!(Ph&4194240)&&(Ph=64),t}function Np(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Tu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=r}function yI(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-vn(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function ly(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-vn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ge=0;function tb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rb,uy,nb,ib,sb,yg=!1,Rh=[],is=null,ss=null,os=null,Jl=new Map,eu=new Map,Yi=[],vI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p_(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Jl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(e.pointerId)}}function ll(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cu(e),e!==null&&uy(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _I(t,e,r,n,i){switch(e){case"focusin":return is=ll(is,t,e,r,n,i),!0;case"dragenter":return ss=ll(ss,t,e,r,n,i),!0;case"mouseover":return os=ll(os,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Jl.set(s,ll(Jl.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,eu.set(s,ll(eu.get(s)||null,t,e,r,n,i)),!0}return!1}function ob(t){var e=Ws(t.target);if(e!==null){var r=uo(e);if(r!==null){if(e=r.tag,e===13){if(e=YE(r),e!==null){t.blockedOn=e,sb(t.priority,function(){nb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=vg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);dg=n,r.target.dispatchEvent(n),dg=null}else return e=Cu(r),e!==null&&uy(e),t.blockedOn=r,!1;e.shift()}return!0}function m_(t,e,r){vc(t)&&r.delete(e)}function xI(){yg=!1,is!==null&&vc(is)&&(is=null),ss!==null&&vc(ss)&&(ss=null),os!==null&&vc(os)&&(os=null),Jl.forEach(m_),eu.forEach(m_)}function ul(t,e){t.blockedOn===e&&(t.blockedOn=null,yg||(yg=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,xI)))}function tu(t){function e(i){return ul(i,t)}if(0<Rh.length){ul(Rh[0],t);for(var r=1;r<Rh.length;r++){var n=Rh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(is!==null&&ul(is,t),ss!==null&&ul(ss,t),os!==null&&ul(os,t),Jl.forEach(e),eu.forEach(e),r=0;r<Yi.length;r++)n=Yi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Yi.length&&(r=Yi[0],r.blockedOn===null);)ob(r),r.blockedOn===null&&Yi.shift()}var la=Pi.ReactCurrentBatchConfig,jc=!0;function wI(t,e,r,n){var i=Ge,s=la.transition;la.transition=null;try{Ge=1,hy(t,e,r,n)}finally{Ge=i,la.transition=s}}function EI(t,e,r,n){var i=Ge,s=la.transition;la.transition=null;try{Ge=4,hy(t,e,r,n)}finally{Ge=i,la.transition=s}}function hy(t,e,r,n){if(jc){var i=vg(t,e,r,n);if(i===null)$p(t,e,n,Wc,r),p_(t,n);else if(_I(i,t,e,r,n))n.stopPropagation();else if(p_(t,n),e&4&&-1<vI.indexOf(t)){for(;i!==null;){var s=Cu(i);if(s!==null&&rb(s),s=vg(t,e,r,n),s===null&&$p(t,e,n,Wc,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else $p(t,e,n,null,r)}}var Wc=null;function vg(t,e,r,n){if(Wc=null,t=oy(n),t=Ws(t),t!==null)if(e=uo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=YE(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wc=t,null}function ab(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uI()){case ay:return 1;case ZE:return 4;case Hc:case hI:return 16;case JE:return 536870912;default:return 16}default:return 16}}var qi=null,cy=null,_c=null;function lb(){if(_c)return _c;var t,e=cy,r=e.length,n,i="value"in qi?qi.value:qi.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return _c=i.slice(t,1<n?1-n:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mh(){return!0}function g_(){return!1}function Rr(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mh:g_,this.isPropagationStopped=g_,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),e}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dy=Rr(ka),Au=at({},ka,{view:0,detail:0}),bI=Rr(Au),Dp,Fp,hl,Dd=at({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(Dp=t.screenX-hl.screenX,Fp=t.screenY-hl.screenY):Fp=Dp=0,hl=t),Dp)},movementY:function(t){return"movementY"in t?t.movementY:Fp}}),y_=Rr(Dd),SI=at({},Dd,{dataTransfer:0}),TI=Rr(SI),AI=at({},Au,{relatedTarget:0}),Op=Rr(AI),CI=at({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),PI=Rr(CI),II=at({},ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RI=Rr(II),MI=at({},ka,{data:0}),v_=Rr(MI),kI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DI[t])?!!e[t]:!1}function fy(){return FI}var OI=at({},Au,{key:function(t){if(t.key){var e=kI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fy,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BI=Rr(OI),LI=at({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),__=Rr(LI),UI=at({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fy}),zI=Rr(UI),GI=at({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),HI=Rr(GI),$I=at({},Dd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=Rr($I),WI=[9,13,27,32],py=_i&&"CompositionEvent"in window,Fl=null;_i&&"documentMode"in document&&(Fl=document.documentMode);var VI=_i&&"TextEvent"in window&&!Fl,ub=_i&&(!py||Fl&&8<Fl&&11>=Fl),x_=" ",w_=!1;function hb(t,e){switch(t){case"keyup":return WI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function XI(t,e){switch(t){case"compositionend":return cb(e);case"keypress":return e.which!==32?null:(w_=!0,x_);case"textInput":return t=e.data,t===x_&&w_?null:t;default:return null}}function YI(t,e){if(Vo)return t==="compositionend"||!py&&hb(t,e)?(t=lb(),_c=cy=qi=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ub&&e.locale!=="ko"?null:e.data;default:return null}}var QI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QI[t.type]:e==="textarea"}function db(t,e,r,n){$E(n),e=Vc(e,"onChange"),0<e.length&&(r=new dy("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ol=null,ru=null;function KI(t){bb(t,0)}function Fd(t){var e=Qo(t);if(OE(e))return t}function qI(t,e){if(t==="change")return e}var fb=!1;if(_i){var Bp;if(_i){var Lp="oninput"in document;if(!Lp){var b_=document.createElement("div");b_.setAttribute("oninput","return;"),Lp=typeof b_.oninput=="function"}Bp=Lp}else Bp=!1;fb=Bp&&(!document.documentMode||9<document.documentMode)}function S_(){Ol&&(Ol.detachEvent("onpropertychange",pb),ru=Ol=null)}function pb(t){if(t.propertyName==="value"&&Fd(ru)){var e=[];db(e,ru,t,oy(t)),XE(KI,e)}}function ZI(t,e,r){t==="focusin"?(S_(),Ol=e,ru=r,Ol.attachEvent("onpropertychange",pb)):t==="focusout"&&S_()}function JI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fd(ru)}function eR(t,e){if(t==="click")return Fd(e)}function tR(t,e){if(t==="input"||t==="change")return Fd(e)}function rR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:rR;function nu(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!eg.call(e,i)||!bn(t[i],e[i]))return!1}return!0}function T_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var r=T_(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=T_(r)}}function mb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gb(){for(var t=window,e=Uc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Uc(t.document)}return e}function my(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nR(t){var e=gb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&mb(r.ownerDocument.documentElement,r)){if(n!==null&&my(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=A_(r,s);var o=A_(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iR=_i&&"documentMode"in document&&11>=document.documentMode,Xo=null,_g=null,Bl=null,xg=!1;function C_(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xg||Xo==null||Xo!==Uc(n)||(n=Xo,"selectionStart"in n&&my(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bl&&nu(Bl,n)||(Bl=n,n=Vc(_g,"onSelect"),0<n.length&&(e=new dy("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Xo)))}function kh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yo={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},Up={},yb={};_i&&(yb=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Od(t){if(Up[t])return Up[t];if(!Yo[t])return t;var e=Yo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in yb)return Up[t]=e[r];return t}var vb=Od("animationend"),_b=Od("animationiteration"),xb=Od("animationstart"),wb=Od("transitionend"),Eb=new Map,P_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(t,e){Eb.set(t,e),lo(e,[t])}for(var zp=0;zp<P_.length;zp++){var Gp=P_[zp],sR=Gp.toLowerCase(),oR=Gp[0].toUpperCase()+Gp.slice(1);ms(sR,"on"+oR)}ms(vb,"onAnimationEnd");ms(_b,"onAnimationIteration");ms(xb,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(wb,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aR=new Set("cancel close invalid load scroll toggle".split(" ").concat(bl));function I_(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,sI(n,e,void 0,t),t.currentTarget=null}function bb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],h=l.instance,c=l.currentTarget;if(l=l.listener,h!==s&&i.isPropagationStopped())break e;I_(i,l,c),s=h}else for(o=0;o<n.length;o++){if(l=n[o],h=l.instance,c=l.currentTarget,l=l.listener,h!==s&&i.isPropagationStopped())break e;I_(i,l,c),s=h}}}if(Gc)throw t=mg,Gc=!1,mg=null,t}function Xe(t,e){var r=e[Tg];r===void 0&&(r=e[Tg]=new Set);var n=t+"__bubble";r.has(n)||(Sb(e,t,2,!1),r.add(n))}function Hp(t,e,r){var n=0;e&&(n|=4),Sb(r,t,n,e)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function iu(t){if(!t[Nh]){t[Nh]=!0,ME.forEach(function(r){r!=="selectionchange"&&(aR.has(r)||Hp(r,!1,t),Hp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nh]||(e[Nh]=!0,Hp("selectionchange",!1,e))}}function Sb(t,e,r,n){switch(ab(e)){case 1:var i=wI;break;case 4:i=EI;break;default:i=hy}r=i.bind(null,e,r,t),i=void 0,!pg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function $p(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ws(l),o===null)return;if(h=o.tag,h===5||h===6){n=s=o;continue e}l=l.parentNode}}n=n.return}XE(function(){var c=s,f=oy(r),p=[];e:{var m=Eb.get(t);if(m!==void 0){var y=dy,_=t;switch(t){case"keypress":if(xc(r)===0)break e;case"keydown":case"keyup":y=BI;break;case"focusin":_="focus",y=Op;break;case"focusout":_="blur",y=Op;break;case"beforeblur":case"afterblur":y=Op;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=TI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=zI;break;case vb:case _b:case xb:y=PI;break;case wb:y=HI;break;case"scroll":y=bI;break;case"wheel":y=jI;break;case"copy":case"cut":case"paste":y=RI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=__}var E=(e&4)!==0,T=!E&&t==="scroll",S=E?m!==null?m+"Capture":null:m;E=[];for(var b=c,x;b!==null;){x=b;var A=x.stateNode;if(x.tag===5&&A!==null&&(x=A,S!==null&&(A=Zl(b,S),A!=null&&E.push(su(b,A,x)))),T)break;b=b.return}0<E.length&&(m=new y(m,_,null,r,f),p.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==dg&&(_=r.relatedTarget||r.fromElement)&&(Ws(_)||_[xi]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=r.relatedTarget||r.toElement,y=c,_=_?Ws(_):null,_!==null&&(T=uo(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=c),y!==_)){if(E=y_,A="onMouseLeave",S="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(E=__,A="onPointerLeave",S="onPointerEnter",b="pointer"),T=y==null?m:Qo(y),x=_==null?m:Qo(_),m=new E(A,b+"leave",y,r,f),m.target=T,m.relatedTarget=x,A=null,Ws(f)===c&&(E=new E(S,b+"enter",_,r,f),E.target=x,E.relatedTarget=T,A=E),T=A,y&&_)t:{for(E=y,S=_,b=0,x=E;x;x=Ro(x))b++;for(x=0,A=S;A;A=Ro(A))x++;for(;0<b-x;)E=Ro(E),b--;for(;0<x-b;)S=Ro(S),x--;for(;b--;){if(E===S||S!==null&&E===S.alternate)break t;E=Ro(E),S=Ro(S)}E=null}else E=null;y!==null&&R_(p,m,y,E,!1),_!==null&&T!==null&&R_(p,T,_,E,!0)}}e:{if(m=c?Qo(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var P=qI;else if(E_(m))if(fb)P=tR;else{P=JI;var F=ZI}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=eR);if(P&&(P=P(t,c))){db(p,P,r,f);break e}F&&F(t,m,c),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&ag(m,"number",m.value)}switch(F=c?Qo(c):window,t){case"focusin":(E_(F)||F.contentEditable==="true")&&(Xo=F,_g=c,Bl=null);break;case"focusout":Bl=_g=Xo=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,C_(p,r,f);break;case"selectionchange":if(iR)break;case"keydown":case"keyup":C_(p,r,f)}var M;if(py)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Vo?hb(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(ub&&r.locale!=="ko"&&(Vo||N!=="onCompositionStart"?N==="onCompositionEnd"&&Vo&&(M=lb()):(qi=f,cy="value"in qi?qi.value:qi.textContent,Vo=!0)),F=Vc(c,N),0<F.length&&(N=new v_(N,t,null,r,f),p.push({event:N,listeners:F}),M?N.data=M:(M=cb(r),M!==null&&(N.data=M)))),(M=VI?XI(t,r):YI(t,r))&&(c=Vc(c,"onBeforeInput"),0<c.length&&(f=new v_("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:c}),f.data=M))}bb(p,e)})}function su(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Vc(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zl(t,r),s!=null&&n.unshift(su(t,s,i)),s=Zl(t,e),s!=null&&n.push(su(t,s,i))),t=t.return}return n}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function R_(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,h=l.alternate,c=l.stateNode;if(h!==null&&h===n)break;l.tag===5&&c!==null&&(l=c,i?(h=Zl(r,s),h!=null&&o.unshift(su(r,h,l))):i||(h=Zl(r,s),h!=null&&o.push(su(r,h,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var lR=/\r\n?/g,uR=/\u0000|\uFFFD/g;function M_(t){return(typeof t=="string"?t:""+t).replace(lR,`
`).replace(uR,"")}function Dh(t,e,r){if(e=M_(e),M_(t)!==e&&r)throw Error(K(425))}function Xc(){}var wg=null,Eg=null;function bg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sg=typeof setTimeout=="function"?setTimeout:void 0,hR=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,cR=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(t){return k_.resolve(null).then(t).catch(dR)}:Sg;function dR(t){setTimeout(function(){throw t})}function jp(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),tu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);tu(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Na=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Na,ou="__reactProps$"+Na,xi="__reactContainer$"+Na,Tg="__reactEvents$"+Na,fR="__reactListeners$"+Na,pR="__reactHandles$"+Na;function Ws(t){var e=t[Xn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[xi]||r[Xn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=N_(t);t!==null;){if(r=t[Xn])return r;t=N_(t)}return e}t=r,r=t.parentNode}return null}function Cu(t){return t=t[Xn]||t[xi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Bd(t){return t[ou]||null}var Ag=[],Ko=-1;function gs(t){return{current:t}}function Qe(t){0>Ko||(t.current=Ag[Ko],Ag[Ko]=null,Ko--)}function $e(t,e){Ko++,Ag[Ko]=t.current,t.current=e}var ps={},qt=gs(ps),pr=gs(!1),to=ps;function xa(t,e){var r=t.type.contextTypes;if(!r)return ps;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mr(t){return t=t.childContextTypes,t!=null}function Yc(){Qe(pr),Qe(qt)}function D_(t,e,r){if(qt.current!==ps)throw Error(K(168));$e(qt,e),$e(pr,r)}function Tb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(K(108,ZP(t)||"Unknown",i));return at({},r,n)}function Qc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,to=qt.current,$e(qt,t),$e(pr,pr.current),!0}function F_(t,e,r){var n=t.stateNode;if(!n)throw Error(K(169));r?(t=Tb(t,e,to),n.__reactInternalMemoizedMergedChildContext=t,Qe(pr),Qe(qt),$e(qt,t)):Qe(pr),$e(pr,r)}var ci=null,Ld=!1,Wp=!1;function Ab(t){ci===null?ci=[t]:ci.push(t)}function mR(t){Ld=!0,Ab(t)}function ys(){if(!Wp&&ci!==null){Wp=!0;var t=0,e=Ge;try{var r=ci;for(Ge=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ci=null,Ld=!1}catch(i){throw ci!==null&&(ci=ci.slice(t+1)),qE(ay,ys),i}finally{Ge=e,Wp=!1}}return null}var qo=[],Zo=0,Kc=null,qc=0,Hr=[],$r=0,ro=null,fi=1,pi="";function Fs(t,e){qo[Zo++]=qc,qo[Zo++]=Kc,Kc=t,qc=e}function Cb(t,e,r){Hr[$r++]=fi,Hr[$r++]=pi,Hr[$r++]=ro,ro=t;var n=fi;t=pi;var i=32-vn(n)-1;n&=~(1<<i),r+=1;var s=32-vn(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,fi=1<<32-vn(e)+i|r<<i|n,pi=s+t}else fi=1<<s|r<<i|n,pi=t}function gy(t){t.return!==null&&(Fs(t,1),Cb(t,1,0))}function yy(t){for(;t===Kc;)Kc=qo[--Zo],qo[Zo]=null,qc=qo[--Zo],qo[Zo]=null;for(;t===ro;)ro=Hr[--$r],Hr[$r]=null,pi=Hr[--$r],Hr[$r]=null,fi=Hr[--$r],Hr[$r]=null}var Ar=null,Sr=null,Je=!1,hn=null;function Pb(t,e){var r=jr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function O_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ar=t,Sr=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ar=t,Sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ro!==null?{id:fi,overflow:pi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=jr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ar=t,Sr=null,!0):!1;default:return!1}}function Cg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pg(t){if(Je){var e=Sr;if(e){var r=e;if(!O_(t,e)){if(Cg(t))throw Error(K(418));e=as(r.nextSibling);var n=Ar;e&&O_(t,e)?Pb(n,r):(t.flags=t.flags&-4097|2,Je=!1,Ar=t)}}else{if(Cg(t))throw Error(K(418));t.flags=t.flags&-4097|2,Je=!1,Ar=t}}}function B_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ar=t}function Fh(t){if(t!==Ar)return!1;if(!Je)return B_(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bg(t.type,t.memoizedProps)),e&&(e=Sr)){if(Cg(t))throw Ib(),Error(K(418));for(;e;)Pb(t,e),e=as(e.nextSibling)}if(B_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Sr=as(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Sr=null}}else Sr=Ar?as(t.stateNode.nextSibling):null;return!0}function Ib(){for(var t=Sr;t;)t=as(t.nextSibling)}function wa(){Sr=Ar=null,Je=!1}function vy(t){hn===null?hn=[t]:hn.push(t)}var gR=Pi.ReactCurrentBatchConfig;function cl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L_(t){var e=t._init;return e(t._payload)}function Rb(t){function e(S,b){if(t){var x=S.deletions;x===null?(S.deletions=[b],S.flags|=16):x.push(b)}}function r(S,b){if(!t)return null;for(;b!==null;)e(S,b),b=b.sibling;return null}function n(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function i(S,b){return S=cs(S,b),S.index=0,S.sibling=null,S}function s(S,b,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<b?(S.flags|=2,b):x):(S.flags|=2,b)):(S.flags|=1048576,b)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,b,x,A){return b===null||b.tag!==6?(b=Zp(x,S.mode,A),b.return=S,b):(b=i(b,x),b.return=S,b)}function h(S,b,x,A){var P=x.type;return P===Wo?f(S,b,x.props.children,A,x.key):b!==null&&(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ji&&L_(P)===b.type)?(A=i(b,x.props),A.ref=cl(S,b,x),A.return=S,A):(A=Cc(x.type,x.key,x.props,null,S.mode,A),A.ref=cl(S,b,x),A.return=S,A)}function c(S,b,x,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=Jp(x,S.mode,A),b.return=S,b):(b=i(b,x.children||[]),b.return=S,b)}function f(S,b,x,A,P){return b===null||b.tag!==7?(b=Qs(x,S.mode,A,P),b.return=S,b):(b=i(b,x),b.return=S,b)}function p(S,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Zp(""+b,S.mode,x),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Th:return x=Cc(b.type,b.key,b.props,null,S.mode,x),x.ref=cl(S,null,b),x.return=S,x;case jo:return b=Jp(b,S.mode,x),b.return=S,b;case ji:var A=b._init;return p(S,A(b._payload),x)}if(wl(b)||ol(b))return b=Qs(b,S.mode,x,null),b.return=S,b;Oh(S,b)}return null}function m(S,b,x,A){var P=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return P!==null?null:l(S,b,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Th:return x.key===P?h(S,b,x,A):null;case jo:return x.key===P?c(S,b,x,A):null;case ji:return P=x._init,m(S,b,P(x._payload),A)}if(wl(x)||ol(x))return P!==null?null:f(S,b,x,A,null);Oh(S,x)}return null}function y(S,b,x,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(x)||null,l(b,S,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Th:return S=S.get(A.key===null?x:A.key)||null,h(b,S,A,P);case jo:return S=S.get(A.key===null?x:A.key)||null,c(b,S,A,P);case ji:var F=A._init;return y(S,b,x,F(A._payload),P)}if(wl(A)||ol(A))return S=S.get(x)||null,f(b,S,A,P,null);Oh(b,A)}return null}function _(S,b,x,A){for(var P=null,F=null,M=b,N=b=0,V=null;M!==null&&N<x.length;N++){M.index>N?(V=M,M=null):V=M.sibling;var $=m(S,M,x[N],A);if($===null){M===null&&(M=V);break}t&&M&&$.alternate===null&&e(S,M),b=s($,b,N),F===null?P=$:F.sibling=$,F=$,M=V}if(N===x.length)return r(S,M),Je&&Fs(S,N),P;if(M===null){for(;N<x.length;N++)M=p(S,x[N],A),M!==null&&(b=s(M,b,N),F===null?P=M:F.sibling=M,F=M);return Je&&Fs(S,N),P}for(M=n(S,M);N<x.length;N++)V=y(M,S,N,x[N],A),V!==null&&(t&&V.alternate!==null&&M.delete(V.key===null?N:V.key),b=s(V,b,N),F===null?P=V:F.sibling=V,F=V);return t&&M.forEach(function(fe){return e(S,fe)}),Je&&Fs(S,N),P}function E(S,b,x,A){var P=ol(x);if(typeof P!="function")throw Error(K(150));if(x=P.call(x),x==null)throw Error(K(151));for(var F=P=null,M=b,N=b=0,V=null,$=x.next();M!==null&&!$.done;N++,$=x.next()){M.index>N?(V=M,M=null):V=M.sibling;var fe=m(S,M,$.value,A);if(fe===null){M===null&&(M=V);break}t&&M&&fe.alternate===null&&e(S,M),b=s(fe,b,N),F===null?P=fe:F.sibling=fe,F=fe,M=V}if($.done)return r(S,M),Je&&Fs(S,N),P;if(M===null){for(;!$.done;N++,$=x.next())$=p(S,$.value,A),$!==null&&(b=s($,b,N),F===null?P=$:F.sibling=$,F=$);return Je&&Fs(S,N),P}for(M=n(S,M);!$.done;N++,$=x.next())$=y(M,S,N,$.value,A),$!==null&&(t&&$.alternate!==null&&M.delete($.key===null?N:$.key),b=s($,b,N),F===null?P=$:F.sibling=$,F=$);return t&&M.forEach(function(Y){return e(S,Y)}),Je&&Fs(S,N),P}function T(S,b,x,A){if(typeof x=="object"&&x!==null&&x.type===Wo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Th:e:{for(var P=x.key,F=b;F!==null;){if(F.key===P){if(P=x.type,P===Wo){if(F.tag===7){r(S,F.sibling),b=i(F,x.props.children),b.return=S,S=b;break e}}else if(F.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ji&&L_(P)===F.type){r(S,F.sibling),b=i(F,x.props),b.ref=cl(S,F,x),b.return=S,S=b;break e}r(S,F);break}else e(S,F);F=F.sibling}x.type===Wo?(b=Qs(x.props.children,S.mode,A,x.key),b.return=S,S=b):(A=Cc(x.type,x.key,x.props,null,S.mode,A),A.ref=cl(S,b,x),A.return=S,S=A)}return o(S);case jo:e:{for(F=x.key;b!==null;){if(b.key===F)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){r(S,b.sibling),b=i(b,x.children||[]),b.return=S,S=b;break e}else{r(S,b);break}else e(S,b);b=b.sibling}b=Jp(x,S.mode,A),b.return=S,S=b}return o(S);case ji:return F=x._init,T(S,b,F(x._payload),A)}if(wl(x))return _(S,b,x,A);if(ol(x))return E(S,b,x,A);Oh(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(r(S,b.sibling),b=i(b,x),b.return=S,S=b):(r(S,b),b=Zp(x,S.mode,A),b.return=S,S=b),o(S)):r(S,b)}return T}var Ea=Rb(!0),Mb=Rb(!1),Zc=gs(null),Jc=null,Jo=null,_y=null;function xy(){_y=Jo=Jc=null}function wy(t){var e=Zc.current;Qe(Zc),t._currentValue=e}function Ig(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ua(t,e){Jc=t,_y=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dr=!0),t.firstContext=null)}function Qr(t){var e=t._currentValue;if(_y!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(Jc===null)throw Error(K(308));Jo=t,Jc.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var Vs=null;function Ey(t){Vs===null?Vs=[t]:Vs.push(t)}function kb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Ey(e)):(r.next=i.next,i.next=r),e.interleaved=r,wi(t,n)}function wi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Wi=!1;function by(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Fe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,wi(t,r)}return i=n.interleaved,i===null?(e.next=e,Ey(n)):(e.next=i.next,i.next=e),n.interleaved=e,wi(t,r)}function wc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ly(t,r)}}function U_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ed(t,e,r,n){var i=t.updateQueue;Wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var h=l,c=h.next;h.next=null,o===null?s=c:o.next=c,o=h;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=h))}if(s!==null){var p=i.baseState;o=0,f=c=h=null,l=s;do{var m=l.lane,y=l.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,E=l;switch(m=e,y=r,E.tag){case 1:if(_=E.payload,typeof _=="function"){p=_.call(y,p,m);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,m=typeof _=="function"?_.call(y,p,m):_,m==null)break e;p=at({},p,m);break e;case 2:Wi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=y,h=p):f=f.next=y,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(h=p),i.baseState=h,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);io|=o,t.lanes=o,t.memoizedState=p}}function z_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(K(191,i));i.call(n)}}}var Pu={},Kn=gs(Pu),au=gs(Pu),lu=gs(Pu);function Xs(t){if(t===Pu)throw Error(K(174));return t}function Sy(t,e){switch($e(lu,e),$e(au,t),$e(Kn,Pu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ug(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ug(e,t)}Qe(Kn),$e(Kn,e)}function ba(){Qe(Kn),Qe(au),Qe(lu)}function Db(t){Xs(lu.current);var e=Xs(Kn.current),r=ug(e,t.type);e!==r&&($e(au,t),$e(Kn,r))}function Ty(t){au.current===t&&(Qe(Kn),Qe(au))}var nt=gs(0);function td(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vp=[];function Ay(){for(var t=0;t<Vp.length;t++)Vp[t]._workInProgressVersionPrimary=null;Vp.length=0}var Ec=Pi.ReactCurrentDispatcher,Xp=Pi.ReactCurrentBatchConfig,no=0,ot=null,Et=null,Rt=null,rd=!1,Ll=!1,uu=0,yR=0;function Yt(){throw Error(K(321))}function Cy(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!bn(t[r],e[r]))return!1;return!0}function Py(t,e,r,n,i,s){if(no=s,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ec.current=t===null||t.memoizedState===null?wR:ER,t=r(n,i),Ll){s=0;do{if(Ll=!1,uu=0,25<=s)throw Error(K(301));s+=1,Rt=Et=null,e.updateQueue=null,Ec.current=bR,t=r(n,i)}while(Ll)}if(Ec.current=nd,e=Et!==null&&Et.next!==null,no=0,Rt=Et=ot=null,rd=!1,e)throw Error(K(300));return t}function Iy(){var t=uu!==0;return uu=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ot.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Kr(){if(Et===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Rt===null?ot.memoizedState:Rt.next;if(e!==null)Rt=e,Et=t;else{if(t===null)throw Error(K(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?ot.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function hu(t,e){return typeof e=="function"?e(t):e}function Yp(t){var e=Kr(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=Et,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=o=null,h=null,c=s;do{var f=c.lane;if((no&f)===f)h!==null&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};h===null?(l=h=p,o=n):h=h.next=p,ot.lanes|=f,io|=f}c=c.next}while(c!==null&&c!==s);h===null?o=n:h.next=l,bn(n,e.memoizedState)||(dr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=h,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,ot.lanes|=s,io|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Qp(t){var e=Kr(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);bn(s,e.memoizedState)||(dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Fb(){}function Ob(t,e){var r=ot,n=Kr(),i=e(),s=!bn(n.memoizedState,i);if(s&&(n.memoizedState=i,dr=!0),n=n.queue,Ry(Ub.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Rt!==null&&Rt.memoizedState.tag&1){if(r.flags|=2048,cu(9,Lb.bind(null,r,n,i,e),void 0,null),Nt===null)throw Error(K(349));no&30||Bb(r,e,i)}return i}function Bb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Lb(t,e,r,n){e.value=r,e.getSnapshot=n,zb(e)&&Gb(t)}function Ub(t,e,r){return r(function(){zb(e)&&Gb(t)})}function zb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!bn(t,r)}catch{return!0}}function Gb(t){var e=wi(t,1);e!==null&&_n(e,t,1,-1)}function G_(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:t},e.queue=t,t=t.dispatch=xR.bind(null,ot,t),[e.memoizedState,t]}function cu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Hb(){return Kr().memoizedState}function bc(t,e,r,n){var i=$n();ot.flags|=t,i.memoizedState=cu(1|e,r,void 0,n===void 0?null:n)}function Ud(t,e,r,n){var i=Kr();n=n===void 0?null:n;var s=void 0;if(Et!==null){var o=Et.memoizedState;if(s=o.destroy,n!==null&&Cy(n,o.deps)){i.memoizedState=cu(e,r,s,n);return}}ot.flags|=t,i.memoizedState=cu(1|e,r,s,n)}function H_(t,e){return bc(8390656,8,t,e)}function Ry(t,e){return Ud(2048,8,t,e)}function $b(t,e){return Ud(4,2,t,e)}function jb(t,e){return Ud(4,4,t,e)}function Wb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vb(t,e,r){return r=r!=null?r.concat([t]):null,Ud(4,4,Wb.bind(null,e,t),r)}function My(){}function Xb(t,e){var r=Kr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Cy(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Yb(t,e){var r=Kr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Cy(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Qb(t,e,r){return no&21?(bn(r,e)||(r=eb(),ot.lanes|=r,io|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dr=!0),t.memoizedState=r)}function vR(t,e){var r=Ge;Ge=r!==0&&4>r?r:4,t(!0);var n=Xp.transition;Xp.transition={};try{t(!1),e()}finally{Ge=r,Xp.transition=n}}function Kb(){return Kr().memoizedState}function _R(t,e,r){var n=hs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qb(t))Zb(e,r);else if(r=kb(t,e,r,n),r!==null){var i=ir();_n(r,t,n,i),Jb(r,e,n)}}function xR(t,e,r){var n=hs(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qb(t))Zb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(i.hasEagerState=!0,i.eagerState=l,bn(l,o)){var h=e.interleaved;h===null?(i.next=i,Ey(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}r=kb(t,e,i,n),r!==null&&(i=ir(),_n(r,t,n,i),Jb(r,e,n))}}function qb(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function Zb(t,e){Ll=rd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Jb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ly(t,r)}}var nd={readContext:Qr,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},wR={readContext:Qr,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:Qr,useEffect:H_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,bc(4194308,4,Wb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var r=$n();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=$n();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=_R.bind(null,ot,t),[n.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:G_,useDebugValue:My,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=G_(!1),e=t[0];return t=vR.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ot,i=$n();if(Je){if(r===void 0)throw Error(K(407));r=r()}else{if(r=e(),Nt===null)throw Error(K(349));no&30||Bb(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,H_(Ub.bind(null,n,s,t),[t]),n.flags|=2048,cu(9,Lb.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=$n(),e=Nt.identifierPrefix;if(Je){var r=pi,n=fi;r=(n&~(1<<32-vn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=uu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yR++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ER={readContext:Qr,useCallback:Xb,useContext:Qr,useEffect:Ry,useImperativeHandle:Vb,useInsertionEffect:$b,useLayoutEffect:jb,useMemo:Yb,useReducer:Yp,useRef:Hb,useState:function(){return Yp(hu)},useDebugValue:My,useDeferredValue:function(t){var e=Kr();return Qb(e,Et.memoizedState,t)},useTransition:function(){var t=Yp(hu)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:Fb,useSyncExternalStore:Ob,useId:Kb,unstable_isNewReconciler:!1},bR={readContext:Qr,useCallback:Xb,useContext:Qr,useEffect:Ry,useImperativeHandle:Vb,useInsertionEffect:$b,useLayoutEffect:jb,useMemo:Yb,useReducer:Qp,useRef:Hb,useState:function(){return Qp(hu)},useDebugValue:My,useDeferredValue:function(t){var e=Kr();return Et===null?e.memoizedState=t:Qb(e,Et.memoizedState,t)},useTransition:function(){var t=Qp(hu)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:Fb,useSyncExternalStore:Ob,useId:Kb,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Rg(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:at({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zd={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ir(),i=hs(t),s=gi(n,i);s.payload=e,r!=null&&(s.callback=r),e=ls(t,s,i),e!==null&&(_n(e,t,i,n),wc(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ir(),i=hs(t),s=gi(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=ls(t,s,i),e!==null&&(_n(e,t,i,n),wc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ir(),n=hs(t),i=gi(r,n);i.tag=2,e!=null&&(i.callback=e),e=ls(t,i,n),e!==null&&(_n(e,t,n,r),wc(e,t,n))}};function $_(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!nu(r,n)||!nu(i,s):!0}function eS(t,e,r){var n=!1,i=ps,s=e.contextType;return typeof s=="object"&&s!==null?s=Qr(s):(i=mr(e)?to:qt.current,n=e.contextTypes,s=(n=n!=null)?xa(t,i):ps),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function j_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&zd.enqueueReplaceState(e,e.state,null)}function Mg(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},by(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qr(s):(s=mr(e)?to:qt.current,i.context=xa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rg(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zd.enqueueReplaceState(i,i.state,null),ed(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sa(t,e){try{var r="",n=e;do r+=qP(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function kg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var SR=typeof WeakMap=="function"?WeakMap:Map;function tS(t,e,r){r=gi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){sd||(sd=!0,Hg=n),kg(t,e)},r}function rS(t,e,r){r=gi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){kg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){kg(t,e),typeof n!="function"&&(us===null?us=new Set([this]):us.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function W_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new SR;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=LR.bind(null,t,e,r),e.then(t,t))}function V_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function X_(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gi(-1,1),e.tag=2,ls(r,e,1))),r.lanes|=1),t)}var TR=Pi.ReactCurrentOwner,dr=!1;function rr(t,e,r,n){e.child=t===null?Mb(e,null,r,n):Ea(e,t.child,r,n)}function Y_(t,e,r,n,i){r=r.render;var s=e.ref;return ua(e,i),n=Py(t,e,r,n,s,i),r=Iy(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ei(t,e,i)):(Je&&r&&gy(e),e.flags|=1,rr(t,e,n,i),e.child)}function Q_(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Uy(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,nS(t,e,s,n,i)):(t=Cc(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:nu,r(o,n)&&t.ref===e.ref)return Ei(t,e,i)}return e.flags|=1,t=cs(s,n),t.ref=e.ref,t.return=e,e.child=t}function nS(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(nu(s,n)&&t.ref===e.ref)if(dr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(dr=!0);else return e.lanes=t.lanes,Ei(t,e,i)}return Ng(t,e,r,n,i)}function iS(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ta,br),br|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ta,br),br|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,$e(ta,br),br|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,$e(ta,br),br|=n;return rr(t,e,i,r),e.child}function sS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ng(t,e,r,n,i){var s=mr(r)?to:qt.current;return s=xa(e,s),ua(e,i),r=Py(t,e,r,n,s,i),n=Iy(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ei(t,e,i)):(Je&&n&&gy(e),e.flags|=1,rr(t,e,r,i),e.child)}function K_(t,e,r,n,i){if(mr(r)){var s=!0;Qc(e)}else s=!1;if(ua(e,i),e.stateNode===null)Sc(t,e),eS(e,r,n),Mg(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var h=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Qr(c):(c=mr(r)?to:qt.current,c=xa(e,c));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||h!==c)&&j_(e,o,n,c),Wi=!1;var m=e.memoizedState;o.state=m,ed(e,n,o,i),h=e.memoizedState,l!==n||m!==h||pr.current||Wi?(typeof f=="function"&&(Rg(e,r,f,n),h=e.memoizedState),(l=Wi||$_(e,r,l,n,m,h,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),o.props=n,o.state=h,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Nb(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:ln(e.type,l),o.props=c,p=e.pendingProps,m=o.context,h=r.contextType,typeof h=="object"&&h!==null?h=Qr(h):(h=mr(r)?to:qt.current,h=xa(e,h));var y=r.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==h)&&j_(e,o,n,h),Wi=!1,m=e.memoizedState,o.state=m,ed(e,n,o,i);var _=e.memoizedState;l!==p||m!==_||pr.current||Wi?(typeof y=="function"&&(Rg(e,r,y,n),_=e.memoizedState),(c=Wi||$_(e,r,c,n,m,_,h)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,_,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,_,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=_),o.props=n,o.state=_,o.context=h,n=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Dg(t,e,r,n,s,i)}function Dg(t,e,r,n,i,s){sS(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&F_(e,r,!1),Ei(t,e,s);n=e.stateNode,TR.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ea(e,t.child,null,s),e.child=Ea(e,null,l,s)):rr(t,e,l,s),e.memoizedState=n.state,i&&F_(e,r,!0),e.child}function oS(t){var e=t.stateNode;e.pendingContext?D_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D_(t,e.context,!1),Sy(t,e.containerInfo)}function q_(t,e,r,n,i){return wa(),vy(i),e.flags|=256,rr(t,e,r,n),e.child}var Fg={dehydrated:null,treeContext:null,retryLane:0};function Og(t){return{baseLanes:t,cachePool:null,transitions:null}}function aS(t,e,r){var n=e.pendingProps,i=nt.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(nt,i&1),t===null)return Pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$d(o,n,0,null),t=Qs(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Og(r),e.memoizedState=Fg,t):ky(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return AR(t,e,o,n,l,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,l=i.sibling;var h={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=cs(i,h),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=cs(l,s):(s=Qs(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Og(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Fg,n}return s=t.child,t=s.sibling,n=cs(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ky(t,e){return e=$d({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bh(t,e,r,n){return n!==null&&vy(n),Ea(e,t.child,null,r),t=ky(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AR(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Kp(Error(K(422))),Bh(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=$d({mode:"visible",children:n.children},i,0,null),s=Qs(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ea(e,t.child,null,o),e.child.memoizedState=Og(o),e.memoizedState=Fg,s);if(!(e.mode&1))return Bh(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(K(419)),n=Kp(s,n,void 0),Bh(t,e,o,n)}if(l=(o&t.childLanes)!==0,dr||l){if(n=Nt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wi(t,i),_n(n,t,i,-1))}return Ly(),n=Kp(Error(K(421))),Bh(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sr=as(i.nextSibling),Ar=e,Je=!0,hn=null,t!==null&&(Hr[$r++]=fi,Hr[$r++]=pi,Hr[$r++]=ro,fi=t.id,pi=t.overflow,ro=e),e=ky(e,n.children),e.flags|=4096,e)}function Z_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ig(t.return,e,r)}function qp(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function lS(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(rr(t,e,n.children,r),n=nt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Z_(t,r,e);else if(t.tag===19)Z_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($e(nt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&td(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),qp(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&td(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}qp(e,!0,r,null,s);break;case"together":qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ei(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,r=cs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=cs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function CR(t,e,r){switch(e.tag){case 3:oS(e),wa();break;case 5:Db(e);break;case 1:mr(e.type)&&Qc(e);break;case 4:Sy(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;$e(Zc,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($e(nt,nt.current&1),e.flags|=128,null):r&e.child.childLanes?aS(t,e,r):($e(nt,nt.current&1),t=Ei(t,e,r),t!==null?t.sibling:null);$e(nt,nt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return lS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(nt,nt.current),n)break;return null;case 22:case 23:return e.lanes=0,iS(t,e,r)}return Ei(t,e,r)}var uS,Bg,hS,cS;uS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bg=function(){};hS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Xs(Kn.current);var s=null;switch(r){case"input":i=sg(t,i),n=sg(t,n),s=[];break;case"select":i=at({},i,{value:void 0}),n=at({},n,{value:void 0}),s=[];break;case"textarea":i=lg(t,i),n=lg(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Xc)}hg(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var h=n[c];if(l=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&h!==l&&(h!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in h)h.hasOwnProperty(o)&&l[o]!==h[o]&&(r||(r={}),r[o]=h[o])}else r||(s||(s=[]),s.push(c,r)),r=h;else c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,l=l?l.__html:void 0,h!=null&&l!==h&&(s=s||[]).push(c,h)):c==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(c,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kl.hasOwnProperty(c)?(h!=null&&c==="onScroll"&&Xe("scroll",t),s||l===h||(s=[])):(s=s||[]).push(c,h))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};cS=function(t,e,r,n){r!==n&&(e.flags|=4)};function dl(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function PR(t,e,r){var n=e.pendingProps;switch(yy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return mr(e.type)&&Yc(),Qt(e),null;case 3:return n=e.stateNode,ba(),Qe(pr),Qe(qt),Ay(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Fh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Wg(hn),hn=null))),Bg(t,e),Qt(e),null;case 5:Ty(e);var i=Xs(lu.current);if(r=e.type,t!==null&&e.stateNode!=null)hS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(K(166));return Qt(e),null}if(t=Xs(Kn.current),Fh(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Xn]=e,n[ou]=s,t=(e.mode&1)!==0,r){case"dialog":Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":case"embed":Xe("load",n);break;case"video":case"audio":for(i=0;i<bl.length;i++)Xe(bl[i],n);break;case"source":Xe("error",n);break;case"img":case"image":case"link":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"input":a_(n,s),Xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",n);break;case"textarea":u_(n,s),Xe("invalid",n)}hg(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&Dh(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Dh(n.textContent,l,t),i=["children",""+l]):Kl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Xe("scroll",n)}switch(r){case"input":Ah(n),l_(n,s,!0);break;case"textarea":Ah(n),h_(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Xc)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=UE(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Xn]=e,t[ou]=n,uS(t,e,!1,!1),e.stateNode=t;e:{switch(o=cg(r,n),r){case"dialog":Xe("cancel",t),Xe("close",t),i=n;break;case"iframe":case"object":case"embed":Xe("load",t),i=n;break;case"video":case"audio":for(i=0;i<bl.length;i++)Xe(bl[i],t);i=n;break;case"source":Xe("error",t),i=n;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),i=n;break;case"details":Xe("toggle",t),i=n;break;case"input":a_(t,n),i=sg(t,n),Xe("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=at({},n,{value:void 0}),Xe("invalid",t);break;case"textarea":u_(t,n),i=lg(t,n),Xe("invalid",t);break;default:i=n}hg(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];s==="style"?HE(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&zE(t,h)):s==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&ql(t,h):typeof h=="number"&&ql(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kl.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Xe("scroll",t):h!=null&&ry(t,s,h,o))}switch(r){case"input":Ah(t),l_(t,n,!1);break;case"textarea":Ah(t),h_(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fs(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?sa(t,!!n.multiple,s,!1):n.defaultValue!=null&&sa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)cS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(K(166));if(r=Xs(lu.current),Xs(Kn.current),Fh(e)){if(n=e.stateNode,r=e.memoizedProps,n[Xn]=e,(s=n.nodeValue!==r)&&(t=Ar,t!==null))switch(t.tag){case 3:Dh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dh(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xn]=e,e.stateNode=n}return Qt(e),null;case 13:if(Qe(nt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&Sr!==null&&e.mode&1&&!(e.flags&128))Ib(),wa(),e.flags|=98560,s=!1;else if(s=Fh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Xn]=e}else wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else hn!==null&&(Wg(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?bt===0&&(bt=3):Ly())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return ba(),Bg(t,e),t===null&&iu(e.stateNode.containerInfo),Qt(e),null;case 10:return wy(e.type._context),Qt(e),null;case 17:return mr(e.type)&&Yc(),Qt(e),null;case 19:if(Qe(nt),s=e.memoizedState,s===null)return Qt(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)dl(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=td(t),o!==null){for(e.flags|=128,dl(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $e(nt,nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>Ta&&(e.flags|=128,n=!0,dl(s,!1),e.lanes=4194304)}else{if(!n)if(t=td(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),dl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Je)return Qt(e),null}else 2*mt()-s.renderingStartTime>Ta&&r!==1073741824&&(e.flags|=128,n=!0,dl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,r=nt.current,$e(nt,n?r&1|2:r&1),e):(Qt(e),null);case 22:case 23:return By(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?br&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function IR(t,e){switch(yy(e),e.tag){case 1:return mr(e.type)&&Yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ba(),Qe(pr),Qe(qt),Ay(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(Qe(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(nt),null;case 4:return ba(),null;case 10:return wy(e.type._context),null;case 22:case 23:return By(),null;case 24:return null;default:return null}}var Lh=!1,Kt=!1,RR=typeof WeakSet=="function"?WeakSet:Set,he=null;function ea(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ht(t,e,n)}else r.current=null}function Lg(t,e,r){try{r()}catch(n){ht(t,e,n)}}var J_=!1;function MR(t,e){if(wg=jc,t=gb(),my(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,h=-1,c=0,f=0,p=t,m=null;t:for(;;){for(var y;p!==r||i!==0&&p.nodeType!==3||(l=o+i),p!==s||n!==0&&p.nodeType!==3||(h=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===r&&++c===i&&(l=o),m===s&&++f===n&&(h=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}r=l===-1||h===-1?null:{start:l,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Eg={focusedElem:t,selectionRange:r},jc=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,T=_.memoizedState,S=e.stateNode,b=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:ln(e.type,E),T);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(A){ht(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return _=J_,J_=!1,_}function Ul(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lg(e,r,s)}i=i.next}while(i!==n)}}function Gd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ug(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function dS(t){var e=t.alternate;e!==null&&(t.alternate=null,dS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[ou],delete e[Tg],delete e[fR],delete e[pR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fS(t){return t.tag===5||t.tag===3||t.tag===4}function ex(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xc));else if(n!==4&&(t=t.child,t!==null))for(zg(t,e,r),t=t.sibling;t!==null;)zg(t,e,r),t=t.sibling}function Gg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Gg(t,e,r),t=t.sibling;t!==null;)Gg(t,e,r),t=t.sibling}var zt=null,un=!1;function zi(t,e,r){for(r=r.child;r!==null;)pS(t,e,r),r=r.sibling}function pS(t,e,r){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Nd,r)}catch{}switch(r.tag){case 5:Kt||ea(r,e);case 6:var n=zt,i=un;zt=null,zi(t,e,r),zt=n,un=i,zt!==null&&(un?(t=zt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):zt.removeChild(r.stateNode));break;case 18:zt!==null&&(un?(t=zt,r=r.stateNode,t.nodeType===8?jp(t.parentNode,r):t.nodeType===1&&jp(t,r),tu(t)):jp(zt,r.stateNode));break;case 4:n=zt,i=un,zt=r.stateNode.containerInfo,un=!0,zi(t,e,r),zt=n,un=i;break;case 0:case 11:case 14:case 15:if(!Kt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lg(r,e,o),i=i.next}while(i!==n)}zi(t,e,r);break;case 1:if(!Kt&&(ea(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ht(r,e,l)}zi(t,e,r);break;case 21:zi(t,e,r);break;case 22:r.mode&1?(Kt=(n=Kt)||r.memoizedState!==null,zi(t,e,r),Kt=n):zi(t,e,r);break;default:zi(t,e,r)}}function tx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new RR),e.forEach(function(n){var i=zR.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function rn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:zt=l.stateNode,un=!1;break e;case 3:zt=l.stateNode.containerInfo,un=!0;break e;case 4:zt=l.stateNode.containerInfo,un=!0;break e}l=l.return}if(zt===null)throw Error(K(160));pS(s,o,i),zt=null,un=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(c){ht(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mS(e,t),e=e.sibling}function mS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),Fn(t),n&4){try{Ul(3,t,t.return),Gd(3,t)}catch(E){ht(t,t.return,E)}try{Ul(5,t,t.return)}catch(E){ht(t,t.return,E)}}break;case 1:rn(e,t),Fn(t),n&512&&r!==null&&ea(r,r.return);break;case 5:if(rn(e,t),Fn(t),n&512&&r!==null&&ea(r,r.return),t.flags&32){var i=t.stateNode;try{ql(i,"")}catch(E){ht(t,t.return,E)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&BE(i,s),cg(l,o);var c=cg(l,s);for(o=0;o<h.length;o+=2){var f=h[o],p=h[o+1];f==="style"?HE(i,p):f==="dangerouslySetInnerHTML"?zE(i,p):f==="children"?ql(i,p):ry(i,f,p,c)}switch(l){case"input":og(i,s);break;case"textarea":LE(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?sa(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?sa(i,!!s.multiple,s.defaultValue,!0):sa(i,!!s.multiple,s.multiple?[]:"",!1))}i[ou]=s}catch(E){ht(t,t.return,E)}}break;case 6:if(rn(e,t),Fn(t),n&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ht(t,t.return,E)}}break;case 3:if(rn(e,t),Fn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{tu(e.containerInfo)}catch(E){ht(t,t.return,E)}break;case 4:rn(e,t),Fn(t);break;case 13:rn(e,t),Fn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fy=mt())),n&4&&tx(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(Kt=(c=Kt)||f,rn(e,t),Kt=c):rn(e,t),Fn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(he=t,f=t.child;f!==null;){for(p=he=f;he!==null;){switch(m=he,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ul(4,m,m.return);break;case 1:ea(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){ht(n,r,E)}}break;case 5:ea(m,m.return);break;case 22:if(m.memoizedState!==null){nx(p);continue}}y!==null?(y.return=m,he=y):nx(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,h=p.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,l.style.display=GE("display",o))}catch(E){ht(t,t.return,E)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(E){ht(t,t.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:rn(e,t),Fn(t),n&4&&tx(t);break;case 21:break;default:rn(e,t),Fn(t)}}function Fn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(fS(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ql(i,""),n.flags&=-33);var s=ex(t);Gg(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ex(t);zg(t,l,o);break;default:throw Error(K(161))}}catch(h){ht(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kR(t,e,r){he=t,gS(t)}function gS(t,e,r){for(var n=(t.mode&1)!==0;he!==null;){var i=he,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Lh;if(!o){var l=i.alternate,h=l!==null&&l.memoizedState!==null||Kt;l=Lh;var c=Kt;if(Lh=o,(Kt=h)&&!c)for(he=i;he!==null;)o=he,h=o.child,o.tag===22&&o.memoizedState!==null?ix(i):h!==null?(h.return=o,he=h):ix(i);for(;s!==null;)he=s,gS(s),s=s.sibling;he=i,Lh=l,Kt=c}rx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,he=s):rx(t)}}function rx(t){for(;he!==null;){var e=he;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||Gd(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Kt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ln(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&z_(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}z_(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&tu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Kt||e.flags&512&&Ug(e)}catch(m){ht(e,e.return,m)}}if(e===t){he=null;break}if(r=e.sibling,r!==null){r.return=e.return,he=r;break}he=e.return}}function nx(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var r=e.sibling;if(r!==null){r.return=e.return,he=r;break}he=e.return}}function ix(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Gd(4,e)}catch(h){ht(e,r,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(h){ht(e,i,h)}}var s=e.return;try{Ug(e)}catch(h){ht(e,s,h)}break;case 5:var o=e.return;try{Ug(e)}catch(h){ht(e,o,h)}}}catch(h){ht(e,e.return,h)}if(e===t){he=null;break}var l=e.sibling;if(l!==null){l.return=e.return,he=l;break}he=e.return}}var NR=Math.ceil,id=Pi.ReactCurrentDispatcher,Ny=Pi.ReactCurrentOwner,Yr=Pi.ReactCurrentBatchConfig,Fe=0,Nt=null,vt=null,Ht=0,br=0,ta=gs(0),bt=0,du=null,io=0,Hd=0,Dy=0,zl=null,cr=null,Fy=0,Ta=1/0,hi=null,sd=!1,Hg=null,us=null,Uh=!1,Zi=null,od=0,Gl=0,$g=null,Tc=-1,Ac=0;function ir(){return Fe&6?mt():Tc!==-1?Tc:Tc=mt()}function hs(t){return t.mode&1?Fe&2&&Ht!==0?Ht&-Ht:gR.transition!==null?(Ac===0&&(Ac=eb()),Ac):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:ab(t.type)),t):1}function _n(t,e,r,n){if(50<Gl)throw Gl=0,$g=null,Error(K(185));Tu(t,r,n),(!(Fe&2)||t!==Nt)&&(t===Nt&&(!(Fe&2)&&(Hd|=r),bt===4&&Qi(t,Ht)),gr(t,n),r===1&&Fe===0&&!(e.mode&1)&&(Ta=mt()+500,Ld&&ys()))}function gr(t,e){var r=t.callbackNode;gI(t,e);var n=$c(t,t===Nt?Ht:0);if(n===0)r!==null&&f_(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&f_(r),e===1)t.tag===0?mR(sx.bind(null,t)):Ab(sx.bind(null,t)),cR(function(){!(Fe&6)&&ys()}),r=null;else{switch(tb(n)){case 1:r=ay;break;case 4:r=ZE;break;case 16:r=Hc;break;case 536870912:r=JE;break;default:r=Hc}r=SS(r,yS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function yS(t,e){if(Tc=-1,Ac=0,Fe&6)throw Error(K(327));var r=t.callbackNode;if(ha()&&t.callbackNode!==r)return null;var n=$c(t,t===Nt?Ht:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ad(t,n);else{e=n;var i=Fe;Fe|=2;var s=_S();(Nt!==t||Ht!==e)&&(hi=null,Ta=mt()+500,Ys(t,e));do try{OR();break}catch(l){vS(t,l)}while(!0);xy(),id.current=s,Fe=i,vt!==null?e=0:(Nt=null,Ht=0,e=bt)}if(e!==0){if(e===2&&(i=gg(t),i!==0&&(n=i,e=jg(t,i))),e===1)throw r=du,Ys(t,0),Qi(t,n),gr(t,mt()),r;if(e===6)Qi(t,n);else{if(i=t.current.alternate,!(n&30)&&!DR(i)&&(e=ad(t,n),e===2&&(s=gg(t),s!==0&&(n=s,e=jg(t,s))),e===1))throw r=du,Ys(t,0),Qi(t,n),gr(t,mt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(K(345));case 2:Os(t,cr,hi);break;case 3:if(Qi(t,n),(n&130023424)===n&&(e=Fy+500-mt(),10<e)){if($c(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ir(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sg(Os.bind(null,t,cr,hi),e);break}Os(t,cr,hi);break;case 4:if(Qi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-vn(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NR(n/1960))-n,10<n){t.timeoutHandle=Sg(Os.bind(null,t,cr,hi),n);break}Os(t,cr,hi);break;case 5:Os(t,cr,hi);break;default:throw Error(K(329))}}}return gr(t,mt()),t.callbackNode===r?yS.bind(null,t):null}function jg(t,e){var r=zl;return t.current.memoizedState.isDehydrated&&(Ys(t,e).flags|=256),t=ad(t,e),t!==2&&(e=cr,cr=r,e!==null&&Wg(e)),t}function Wg(t){cr===null?cr=t:cr.push.apply(cr,t)}function DR(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!bn(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qi(t,e){for(e&=~Dy,e&=~Hd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-vn(e),n=1<<r;t[r]=-1,e&=~n}}function sx(t){if(Fe&6)throw Error(K(327));ha();var e=$c(t,0);if(!(e&1))return gr(t,mt()),null;var r=ad(t,e);if(t.tag!==0&&r===2){var n=gg(t);n!==0&&(e=n,r=jg(t,n))}if(r===1)throw r=du,Ys(t,0),Qi(t,e),gr(t,mt()),r;if(r===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Os(t,cr,hi),gr(t,mt()),null}function Oy(t,e){var r=Fe;Fe|=1;try{return t(e)}finally{Fe=r,Fe===0&&(Ta=mt()+500,Ld&&ys())}}function so(t){Zi!==null&&Zi.tag===0&&!(Fe&6)&&ha();var e=Fe;Fe|=1;var r=Yr.transition,n=Ge;try{if(Yr.transition=null,Ge=1,t)return t()}finally{Ge=n,Yr.transition=r,Fe=e,!(Fe&6)&&ys()}}function By(){br=ta.current,Qe(ta)}function Ys(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,hR(r)),vt!==null)for(r=vt.return;r!==null;){var n=r;switch(yy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yc();break;case 3:ba(),Qe(pr),Qe(qt),Ay();break;case 5:Ty(n);break;case 4:ba();break;case 13:Qe(nt);break;case 19:Qe(nt);break;case 10:wy(n.type._context);break;case 22:case 23:By()}r=r.return}if(Nt=t,vt=t=cs(t.current,null),Ht=br=e,bt=0,du=null,Dy=Hd=io=0,cr=zl=null,Vs!==null){for(e=0;e<Vs.length;e++)if(r=Vs[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Vs=null}return t}function vS(t,e){do{var r=vt;try{if(xy(),Ec.current=nd,rd){for(var n=ot.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}rd=!1}if(no=0,Rt=Et=ot=null,Ll=!1,uu=0,Ny.current=null,r===null||r.return===null){bt=1,du=e,vt=null;break}e:{var s=t,o=r.return,l=r,h=e;if(e=Ht,l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var c=h,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=V_(o);if(y!==null){y.flags&=-257,X_(y,o,l,s,e),y.mode&1&&W_(s,c,e),e=y,h=c;var _=e.updateQueue;if(_===null){var E=new Set;E.add(h),e.updateQueue=E}else _.add(h);break e}else{if(!(e&1)){W_(s,c,e),Ly();break e}h=Error(K(426))}}else if(Je&&l.mode&1){var T=V_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),X_(T,o,l,s,e),vy(Sa(h,l));break e}}s=h=Sa(h,l),bt!==4&&(bt=2),zl===null?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=tS(s,h,e);U_(s,S);break e;case 1:l=h;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(us===null||!us.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=rS(s,l,e);U_(s,A);break e}}s=s.return}while(s!==null)}wS(r)}catch(P){e=P,vt===r&&r!==null&&(vt=r=r.return);continue}break}while(!0)}function _S(){var t=id.current;return id.current=nd,t===null?nd:t}function Ly(){(bt===0||bt===3||bt===2)&&(bt=4),Nt===null||!(io&268435455)&&!(Hd&268435455)||Qi(Nt,Ht)}function ad(t,e){var r=Fe;Fe|=2;var n=_S();(Nt!==t||Ht!==e)&&(hi=null,Ys(t,e));do try{FR();break}catch(i){vS(t,i)}while(!0);if(xy(),Fe=r,id.current=n,vt!==null)throw Error(K(261));return Nt=null,Ht=0,bt}function FR(){for(;vt!==null;)xS(vt)}function OR(){for(;vt!==null&&!aI();)xS(vt)}function xS(t){var e=bS(t.alternate,t,br);t.memoizedProps=t.pendingProps,e===null?wS(t):vt=e,Ny.current=null}function wS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=IR(r,e),r!==null){r.flags&=32767,vt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,vt=null;return}}else if(r=PR(r,e,br),r!==null){vt=r;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);bt===0&&(bt=5)}function Os(t,e,r){var n=Ge,i=Yr.transition;try{Yr.transition=null,Ge=1,BR(t,e,r,n)}finally{Yr.transition=i,Ge=n}return null}function BR(t,e,r,n){do ha();while(Zi!==null);if(Fe&6)throw Error(K(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(yI(t,s),t===Nt&&(vt=Nt=null,Ht=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Uh||(Uh=!0,SS(Hc,function(){return ha(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Yr.transition,Yr.transition=null;var o=Ge;Ge=1;var l=Fe;Fe|=4,Ny.current=null,MR(t,r),mS(r,t),nR(Eg),jc=!!wg,Eg=wg=null,t.current=r,kR(r),lI(),Fe=l,Ge=o,Yr.transition=s}else t.current=r;if(Uh&&(Uh=!1,Zi=t,od=i),s=t.pendingLanes,s===0&&(us=null),cI(r.stateNode),gr(t,mt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(sd)throw sd=!1,t=Hg,Hg=null,t;return od&1&&t.tag!==0&&ha(),s=t.pendingLanes,s&1?t===$g?Gl++:(Gl=0,$g=t):Gl=0,ys(),null}function ha(){if(Zi!==null){var t=tb(od),e=Yr.transition,r=Ge;try{if(Yr.transition=null,Ge=16>t?16:t,Zi===null)var n=!1;else{if(t=Zi,Zi=null,od=0,Fe&6)throw Error(K(331));var i=Fe;for(Fe|=4,he=t.current;he!==null;){var s=he,o=s.child;if(he.flags&16){var l=s.deletions;if(l!==null){for(var h=0;h<l.length;h++){var c=l[h];for(he=c;he!==null;){var f=he;switch(f.tag){case 0:case 11:case 15:Ul(8,f,s)}var p=f.child;if(p!==null)p.return=f,he=p;else for(;he!==null;){f=he;var m=f.sibling,y=f.return;if(dS(f),f===c){he=null;break}if(m!==null){m.return=y,he=m;break}he=y}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}he=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,he=o;else e:for(;he!==null;){if(s=he,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ul(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,he=S;break e}he=s.return}}var b=t.current;for(he=b;he!==null;){o=he;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,he=x;else e:for(o=b;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gd(9,l)}}catch(P){ht(l,l.return,P)}if(l===o){he=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,he=A;break e}he=l.return}}if(Fe=i,ys(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Nd,t)}catch{}n=!0}return n}finally{Ge=r,Yr.transition=e}}return!1}function ox(t,e,r){e=Sa(r,e),e=tS(t,e,1),t=ls(t,e,1),e=ir(),t!==null&&(Tu(t,1,e),gr(t,e))}function ht(t,e,r){if(t.tag===3)ox(t,t,r);else for(;e!==null;){if(e.tag===3){ox(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(us===null||!us.has(n))){t=Sa(r,t),t=rS(e,t,1),e=ls(e,t,1),t=ir(),e!==null&&(Tu(e,1,t),gr(e,t));break}}e=e.return}}function LR(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ir(),t.pingedLanes|=t.suspendedLanes&r,Nt===t&&(Ht&r)===r&&(bt===4||bt===3&&(Ht&130023424)===Ht&&500>mt()-Fy?Ys(t,0):Dy|=r),gr(t,e)}function ES(t,e){e===0&&(t.mode&1?(e=Ih,Ih<<=1,!(Ih&130023424)&&(Ih=4194304)):e=1);var r=ir();t=wi(t,e),t!==null&&(Tu(t,e,r),gr(t,r))}function UR(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ES(t,r)}function zR(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(e),ES(t,r)}var bS;bS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||pr.current)dr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return dr=!1,CR(t,e,r);dr=!!(t.flags&131072)}else dr=!1,Je&&e.flags&1048576&&Cb(e,qc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sc(t,e),t=e.pendingProps;var i=xa(e,qt.current);ua(e,r),i=Py(null,e,n,t,i,r);var s=Iy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(n)?(s=!0,Qc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,by(e),i.updater=zd,e.stateNode=i,i._reactInternals=e,Mg(e,n,t,r),e=Dg(null,e,n,!0,s,r)):(e.tag=0,Je&&s&&gy(e),rr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Sc(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=HR(n),t=ln(n,t),i){case 0:e=Ng(null,e,n,t,r);break e;case 1:e=K_(null,e,n,t,r);break e;case 11:e=Y_(null,e,n,t,r);break e;case 14:e=Q_(null,e,n,ln(n.type,t),r);break e}throw Error(K(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Ng(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),K_(t,e,n,i,r);case 3:e:{if(oS(e),t===null)throw Error(K(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Nb(t,e),ed(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sa(Error(K(423)),e),e=q_(t,e,n,r,i);break e}else if(n!==i){i=Sa(Error(K(424)),e),e=q_(t,e,n,r,i);break e}else for(Sr=as(e.stateNode.containerInfo.firstChild),Ar=e,Je=!0,hn=null,r=Mb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wa(),n===i){e=Ei(t,e,r);break e}rr(t,e,n,r)}e=e.child}return e;case 5:return Db(e),t===null&&Pg(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,bg(n,i)?o=null:s!==null&&bg(n,s)&&(e.flags|=32),sS(t,e),rr(t,e,o,r),e.child;case 6:return t===null&&Pg(e),null;case 13:return aS(t,e,r);case 4:return Sy(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ea(e,null,n,r):rr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Y_(t,e,n,i,r);case 7:return rr(t,e,e.pendingProps,r),e.child;case 8:return rr(t,e,e.pendingProps.children,r),e.child;case 12:return rr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$e(Zc,n._currentValue),n._currentValue=o,s!==null)if(bn(s.value,o)){if(s.children===i.children&&!pr.current){e=Ei(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var h=l.firstContext;h!==null;){if(h.context===n){if(s.tag===1){h=gi(-1,r&-r),h.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?h.next=h:(h.next=f.next,f.next=h),c.pending=h}}s.lanes|=r,h=s.alternate,h!==null&&(h.lanes|=r),Ig(s.return,r,e),l.lanes|=r;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ig(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ua(e,r),i=Qr(i),n=n(i),e.flags|=1,rr(t,e,n,r),e.child;case 14:return n=e.type,i=ln(n,e.pendingProps),i=ln(n.type,i),Q_(t,e,n,i,r);case 15:return nS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Sc(t,e),e.tag=1,mr(n)?(t=!0,Qc(e)):t=!1,ua(e,r),eS(e,n,i),Mg(e,n,i,r),Dg(null,e,n,!0,t,r);case 19:return lS(t,e,r);case 22:return iS(t,e,r)}throw Error(K(156,e.tag))};function SS(t,e){return qE(t,e)}function GR(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(t,e,r,n){return new GR(t,e,r,n)}function Uy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HR(t){if(typeof t=="function")return Uy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iy)return 11;if(t===sy)return 14}return 2}function cs(t,e){var r=t.alternate;return r===null?(r=jr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Cc(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")Uy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wo:return Qs(r.children,i,s,e);case ny:o=8,i|=8;break;case tg:return t=jr(12,r,e,i|2),t.elementType=tg,t.lanes=s,t;case rg:return t=jr(13,r,e,i),t.elementType=rg,t.lanes=s,t;case ng:return t=jr(19,r,e,i),t.elementType=ng,t.lanes=s,t;case DE:return $d(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kE:o=10;break e;case NE:o=9;break e;case iy:o=11;break e;case sy:o=14;break e;case ji:o=16,n=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=jr(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Qs(t,e,r,n){return t=jr(7,t,n,e),t.lanes=r,t}function $d(t,e,r,n){return t=jr(22,t,n,e),t.elementType=DE,t.lanes=r,t.stateNode={isHidden:!1},t}function Zp(t,e,r){return t=jr(6,t,null,e),t.lanes=r,t}function Jp(t,e,r){return e=jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $R(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Np(0),this.expirationTimes=Np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Np(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zy(t,e,r,n,i,s,o,l,h){return t=new $R(t,e,r,l,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},by(s),t}function jR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function TS(t){if(!t)return ps;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var r=t.type;if(mr(r))return Tb(t,r,e)}return e}function AS(t,e,r,n,i,s,o,l,h){return t=zy(r,n,!0,t,i,s,o,l,h),t.context=TS(null),r=t.current,n=ir(),i=hs(r),s=gi(n,i),s.callback=e??null,ls(r,s,i),t.current.lanes=i,Tu(t,i,n),gr(t,n),t}function jd(t,e,r,n){var i=e.current,s=ir(),o=hs(i);return r=TS(r),e.context===null?e.context=r:e.pendingContext=r,e=gi(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ls(i,e,o),t!==null&&(_n(t,i,o,s),wc(t,i,o)),o}function ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Gy(t,e){ax(t,e),(t=t.alternate)&&ax(t,e)}function WR(){return null}var CS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hy(t){this._internalRoot=t}Wd.prototype.render=Hy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));jd(t,e,null,null)};Wd.prototype.unmount=Hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){jd(null,t,null,null)}),e[xi]=null}};function Wd(t){this._internalRoot=t}Wd.prototype.unstable_scheduleHydration=function(t){if(t){var e=ib();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Yi.length&&e!==0&&e<Yi[r].priority;r++);Yi.splice(r,0,t),r===0&&ob(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lx(){}function VR(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=ld(o);s.call(c)}}var o=AS(e,n,t,0,null,!1,!1,"",lx);return t._reactRootContainer=o,t[xi]=o.current,iu(t.nodeType===8?t.parentNode:t),so(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var c=ld(h);l.call(c)}}var h=zy(t,0,!1,null,null,!1,!1,"",lx);return t._reactRootContainer=h,t[xi]=h.current,iu(t.nodeType===8?t.parentNode:t),so(function(){jd(e,h,r,n)}),h}function Xd(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var h=ld(o);l.call(h)}}jd(e,o,t,i)}else o=VR(r,e,t,i,n);return ld(o)}rb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=El(e.pendingLanes);r!==0&&(ly(e,r|1),gr(e,mt()),!(Fe&6)&&(Ta=mt()+500,ys()))}break;case 13:so(function(){var n=wi(t,1);if(n!==null){var i=ir();_n(n,t,1,i)}}),Gy(t,1)}};uy=function(t){if(t.tag===13){var e=wi(t,134217728);if(e!==null){var r=ir();_n(e,t,134217728,r)}Gy(t,134217728)}};nb=function(t){if(t.tag===13){var e=hs(t),r=wi(t,e);if(r!==null){var n=ir();_n(r,t,e,n)}Gy(t,e)}};ib=function(){return Ge};sb=function(t,e){var r=Ge;try{return Ge=t,e()}finally{Ge=r}};fg=function(t,e,r){switch(e){case"input":if(og(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Bd(n);if(!i)throw Error(K(90));OE(n),og(n,i)}}}break;case"textarea":LE(t,r);break;case"select":e=r.value,e!=null&&sa(t,!!r.multiple,e,!1)}};WE=Oy;VE=so;var XR={usingClientEntryPoint:!1,Events:[Cu,Qo,Bd,$E,jE,Oy]},fl={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YR={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QE(t),t===null?null:t.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||WR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{Nd=zh.inject(YR),Qn=zh}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XR;Ir.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(K(200));return jR(t,e,null,r)};Ir.createRoot=function(t,e){if(!$y(t))throw Error(K(299));var r=!1,n="",i=CS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zy(t,1,!1,null,null,r,!1,n,i),t[xi]=e.current,iu(t.nodeType===8?t.parentNode:t),new Hy(e)};Ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=QE(e),t=t===null?null:t.stateNode,t};Ir.flushSync=function(t){return so(t)};Ir.hydrate=function(t,e,r){if(!Vd(e))throw Error(K(200));return Xd(null,t,e,!0,r)};Ir.hydrateRoot=function(t,e,r){if(!$y(t))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=CS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=AS(e,null,t,1,r??null,i,!1,s,o),t[xi]=e.current,iu(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Wd(e)};Ir.render=function(t,e,r){if(!Vd(e))throw Error(K(200));return Xd(null,t,e,!1,r)};Ir.unmountComponentAtNode=function(t){if(!Vd(t))throw Error(K(40));return t._reactRootContainer?(so(function(){Xd(null,null,t,!1,function(){t._reactRootContainer=null,t[xi]=null})}),!0):!1};Ir.unstable_batchedUpdates=Oy;Ir.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Vd(r))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Xd(t,e,r,!1,n)};Ir.version="18.3.1-next-f1338f8080-20240426";function PS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PS)}catch(t){console.error(t)}}PS(),PE.exports=Ir;var QR=PE.exports,ux=QR;Jm.createRoot=ux.createRoot,Jm.hydrateRoot=ux.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ud.apply(this,arguments)}var Ji;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ji||(Ji={}));function KR(t){t===void 0&&(t={});let{initialEntries:e=["/"],initialIndex:r,v5Compat:n=!1}=t,i;i=e.map((y,_)=>f(y,typeof y=="string"?null:y.state,_===0?"default":void 0));let s=h(r??i.length-1),o=Ji.Pop,l=null;function h(y){return Math.min(Math.max(y,0),i.length-1)}function c(){return i[s]}function f(y,_,E){_===void 0&&(_=null);let T=ZR(i?c().pathname:"/",y,_,E);return jy(T.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(y)),T}function p(y){return typeof y=="string"?y:JR(y)}return{get index(){return s},get action(){return o},get location(){return c()},createHref:p,createURL(y){return new URL(p(y),"http://localhost")},encodeLocation(y){let _=typeof y=="string"?ho(y):y;return{pathname:_.pathname||"",search:_.search||"",hash:_.hash||""}},push(y,_){o=Ji.Push;let E=f(y,_);s+=1,i.splice(s,i.length,E),n&&l&&l({action:o,location:E,delta:1})},replace(y,_){o=Ji.Replace;let E=f(y,_);i[s]=E,n&&l&&l({action:o,location:E,delta:0})},go(y){o=Ji.Pop;let _=h(s+y),E=i[_];s=_,l&&l({action:o,location:E,delta:y})},listen(y){return l=y,()=>{l=null}}}}function Dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qR(){return Math.random().toString(36).substr(2,8)}function ZR(t,e,r,n){return r===void 0&&(r=null),ud({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ho(e):e,{state:r,key:e&&e.key||n||qR()})}function JR(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ho(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}var hx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hx||(hx={}));function e2(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?ho(e):e,i=MS(n.pathname||"/",r);if(i==null)return null;let s=IS(t);t2(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let h=f2(i);o=h2(s[l],h)}return o}function IS(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,l)=>{let h={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};h.relativePath.startsWith("/")&&(Dt(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let c=Ks([n,h.relativePath]),f=r.concat(h);s.children&&s.children.length>0&&(Dt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),IS(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:l2(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let h of RS(s.path))i(s,o,h)}),e}function RS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=RS(n.join("/")),l=[];return l.push(...o.map(h=>h===""?s:[s,h].join("/"))),i&&l.push(...o),l.map(h=>t.startsWith("/")&&h===""?"/":h)}function t2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:u2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const r2=/^:[\w-]+$/,n2=3,i2=2,s2=1,o2=10,a2=-2,cx=t=>t==="*";function l2(t,e){let r=t.split("/"),n=r.length;return r.some(cx)&&(n+=a2),e&&(n+=i2),r.filter(i=>!cx(i)).reduce((i,s)=>i+(r2.test(s)?n2:s===""?s2:o2),n)}function u2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function h2(t,e){let{routesMeta:r}=t,n={},i="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],h=o===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",f=c2({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},c);if(!f)return null;Object.assign(n,f.params);let p=l.route;s.push({params:n,pathname:Ks([i,f.pathname]),pathnameBase:_2(Ks([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ks([i,f.pathnameBase]))}return s}function c2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=d2(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((c,f,p)=>{let{paramName:m,isOptional:y}=f;if(m==="*"){let E=l[p]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const _=l[p];return y&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function d2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),jy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,h)=>(n.push({paramName:l,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function f2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function MS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function p2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ho(t):t;return{pathname:r?r.startsWith("/")?r:m2(r,e):e,search:x2(n),hash:w2(i)}}function m2(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function em(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function y2(t,e){let r=g2(t);return e?r.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function v2(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ho(t):(i=ud({},t),Dt(!i.pathname||!i.pathname.includes("?"),em("?","pathname","search",i)),Dt(!i.pathname||!i.pathname.includes("#"),em("#","pathname","hash",i)),Dt(!i.search||!i.search.includes("#"),em("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=r;else{let p=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let h=p2(i,l),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(c||f)&&(h.pathname+="/"),h}const Ks=t=>t.join("/").replace(/\/\/+/g,"/"),_2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,w2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kS=["post","put","patch","delete"];new Set(kS);const b2=["get",...kS];new Set(b2);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fu.apply(this,arguments)}const Wy=q.createContext(null),S2=q.createContext(null),Yd=q.createContext(null),Qd=q.createContext(null),Da=q.createContext({outlet:null,matches:[],isDataRoute:!1}),NS=q.createContext(null);function Kd(){return q.useContext(Qd)!=null}function DS(){return Kd()||Dt(!1),q.useContext(Qd).location}function FS(t){q.useContext(Yd).static||q.useLayoutEffect(t)}function T2(){let{isDataRoute:t}=q.useContext(Da);return t?L2():A2()}function A2(){Kd()||Dt(!1);let t=q.useContext(Wy),{basename:e,future:r,navigator:n}=q.useContext(Yd),{matches:i}=q.useContext(Da),{pathname:s}=DS(),o=JSON.stringify(y2(i,r.v7_relativeSplatPath)),l=q.useRef(!1);return FS(()=>{l.current=!0}),q.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let p=v2(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ks([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,s,t])}function C2(t,e){return P2(t,e)}function P2(t,e,r,n){Kd()||Dt(!1);let{navigator:i}=q.useContext(Yd),{matches:s}=q.useContext(Da),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let h=o?o.pathnameBase:"/";o&&o.route;let c=DS(),f;if(e){var p;let T=typeof e=="string"?ho(e):e;h==="/"||(p=T.pathname)!=null&&p.startsWith(h)||Dt(!1),f=T}else f=c;let m=f.pathname||"/",y=m;if(h!=="/"){let T=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=e2(t,{pathname:y}),E=N2(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Ks([h,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:Ks([h,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,r,n);return e&&E?q.createElement(Qd.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ji.Pop}},E):E}function I2(){let t=B2(),e=E2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),r?q.createElement("pre",{style:i},r):null,null)}const R2=q.createElement(I2,null);class M2 extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?q.createElement(Da.Provider,{value:this.props.routeContext},q.createElement(NS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k2(t){let{routeContext:e,match:r,children:n}=t,i=q.useContext(Wy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),q.createElement(Da.Provider,{value:e},n)}function N2(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if((s=r)!=null&&s.errors)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Dt(!1),o=o.slice(0,Math.min(o.length,f+1))}let h=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:m,errors:y}=r,_=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){h=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,m)=>{let y,_=!1,E=null,T=null;r&&(y=l&&p.route.id?l[p.route.id]:void 0,E=p.route.errorElement||R2,h&&(c<0&&m===0?(_=!0,T=null):c===m&&(_=!0,T=p.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,m+1)),b=()=>{let x;return y?x=E:_?x=T:p.route.Component?x=q.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=f,q.createElement(k2,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:r!=null},children:x})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?q.createElement(M2,{location:r.location,revalidation:r.revalidation,component:E,error:y,children:b(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):b()},null)}var OS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OS||{}),hd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hd||{});function D2(t){let e=q.useContext(Wy);return e||Dt(!1),e}function F2(t){let e=q.useContext(S2);return e||Dt(!1),e}function O2(t){let e=q.useContext(Da);return e||Dt(!1),e}function BS(t){let e=O2(),r=e.matches[e.matches.length-1];return r.route.id||Dt(!1),r.route.id}function B2(){var t;let e=q.useContext(NS),r=F2(hd.UseRouteError),n=BS(hd.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function L2(){let{router:t}=D2(OS.UseNavigateStable),e=BS(hd.UseNavigateStable),r=q.useRef(!1);return FS(()=>{r.current=!0}),q.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fu({fromRouteId:e},s)))},[t,e])}const U2="startTransition",dx=LP[U2];function z2(t){let{basename:e,children:r,initialEntries:n,initialIndex:i,future:s}=t,o=q.useRef();o.current==null&&(o.current=KR({initialEntries:n,initialIndex:i,v5Compat:!0}));let l=o.current,[h,c]=q.useState({action:l.action,location:l.location}),{v7_startTransition:f}=s||{},p=q.useCallback(m=>{f&&dx?dx(()=>c(m)):c(m)},[c,f]);return q.useLayoutEffect(()=>l.listen(p),[l,p]),q.createElement(G2,{basename:e,children:r,location:h.location,navigationType:h.action,navigator:l,future:s})}function Pc(t){Dt(!1)}function G2(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ji.Pop,navigator:s,static:o=!1,future:l}=t;Kd()&&Dt(!1);let h=e.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:h,navigator:s,static:o,future:fu({v7_relativeSplatPath:!1},l)}),[h,l,s,o]);typeof n=="string"&&(n=ho(n));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:_="default"}=n,E=q.useMemo(()=>{let T=MS(f,h);return T==null?null:{location:{pathname:T,search:p,hash:m,state:y,key:_},navigationType:i}},[h,f,p,m,y,_,i]);return E==null?null:q.createElement(Yd.Provider,{value:c},q.createElement(Qd.Provider,{children:r,value:E}))}function H2(t){let{children:e,location:r}=t;return C2(Vg(e),r)}new Promise(()=>{});function Vg(t,e){e===void 0&&(e=[]);let r=[];return q.Children.forEach(t,(n,i)=>{if(!q.isValidElement(n))return;let s=[...e,i];if(n.type===q.Fragment){r.push.apply(r,Vg(n.props.children,s));return}n.type!==Pc&&Dt(!1),!n.props.index||!n.props.children||Dt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Vg(n.props.children,s)),r.push(o)}),r}var qd={exports:{}},co=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(co||{}),LS=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(LS||{}),Xg=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Xg||{}),_e=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(_e||{}),Wr=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Wr||{}),J=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(J||{}),ca=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(ca||{}),ge=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ge||{}),ae=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(ae||{}),dn=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(dn||{}),yi=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(yi||{}),Zn=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Zn||{}),fr=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(fr||{}),Wn=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Wn||{}),Vy=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Vy||{}),Vr=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Vr||{}),wt=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(wt||{}),yt=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(yt||{}),qn=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(qn||{});const $2={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},oe={ADAPTER:$2,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var tm=/iPhone/i,fx=/iPod/i,px=/iPad/i,mx=/\biOS-universal(?:.+)Mac\b/i,rm=/\bAndroid(?:.+)Mobile\b/i,gx=/Android/i,Mo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Gh=/Silk/i,ai=/Windows Phone/i,yx=/\bWindows(?:.+)ARM\b/i,vx=/BlackBerry/i,_x=/BB10/i,xx=/Opera Mini/i,wx=/\b(CriOS|Chrome)(?:.+)Mobile/i,Ex=/Mobile(?:.+)Firefox\b/i,bx=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function j2(t){return function(e){return e.test(t)}}function Sx(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=j2(r),s={apple:{phone:i(tm)&&!i(ai),ipod:i(fx),tablet:!i(tm)&&(i(px)||bx(e))&&!i(ai),universal:i(mx),device:(i(tm)||i(fx)||i(px)||i(mx)||bx(e))&&!i(ai)},amazon:{phone:i(Mo),tablet:!i(Mo)&&i(Gh),device:i(Mo)||i(Gh)},android:{phone:!i(ai)&&i(Mo)||!i(ai)&&i(rm),tablet:!i(ai)&&!i(Mo)&&!i(rm)&&(i(Gh)||i(gx)),device:!i(ai)&&(i(Mo)||i(Gh)||i(rm)||i(gx))||i(/\bokhttp\b/i)},windows:{phone:i(ai),tablet:i(yx),device:i(ai)||i(yx)},other:{blackberry:i(vx),blackberry10:i(_x),opera:i(xx),firefox:i(Ex),chrome:i(wx),device:i(vx)||i(_x)||i(xx)||i(Ex)||i(wx)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const W2=Sx.default??Sx,mi=W2(globalThis.navigator);oe.RETINA_PREFIX=/@([0-9\.]+)x/;oe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var US={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(h,c,f){this.fn=h,this.context=c,this.once=f||!1}function s(h,c,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new i(f,p||h,m),_=r?r+c:c;return h._events[_]?h._events[_].fn?h._events[_]=[h._events[_],y]:h._events[_].push(y):(h._events[_]=y,h._eventsCount++),h}function o(h,c){--h._eventsCount===0?h._events=new n:delete h._events[c]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],f,p;if(this._eventsCount===0)return c;for(p in f=this._events)e.call(f,p)&&c.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},l.prototype.listeners=function(c){var f=r?r+c:c,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,y=p.length,_=new Array(y);m<y;m++)_[m]=p[m].fn;return _},l.prototype.listenerCount=function(c){var f=r?r+c:c,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(c,f,p,m,y,_){var E=r?r+c:c;if(!this._events[E])return!1;var T=this._events[E],S=arguments.length,b,x;if(T.fn){switch(T.once&&this.removeListener(c,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,p),!0;case 4:return T.fn.call(T.context,f,p,m),!0;case 5:return T.fn.call(T.context,f,p,m,y),!0;case 6:return T.fn.call(T.context,f,p,m,y,_),!0}for(x=1,b=new Array(S-1);x<S;x++)b[x-1]=arguments[x];T.fn.apply(T.context,b)}else{var A=T.length,P;for(x=0;x<A;x++)switch(T[x].once&&this.removeListener(c,T[x].fn,void 0,!0),S){case 1:T[x].fn.call(T[x].context);break;case 2:T[x].fn.call(T[x].context,f);break;case 3:T[x].fn.call(T[x].context,f,p);break;case 4:T[x].fn.call(T[x].context,f,p,m);break;default:if(!b)for(P=1,b=new Array(S-1);P<S;P++)b[P-1]=arguments[P];T[x].fn.apply(T[x].context,b)}}return!0},l.prototype.on=function(c,f,p){return s(this,c,f,p,!1)},l.prototype.once=function(c,f,p){return s(this,c,f,p,!0)},l.prototype.removeListener=function(c,f,p,m){var y=r?r+c:c;if(!this._events[y])return this;if(!f)return o(this,y),this;var _=this._events[y];if(_.fn)_.fn===f&&(!m||_.once)&&(!p||_.context===p)&&o(this,y);else{for(var E=0,T=[],S=_.length;E<S;E++)(_[E].fn!==f||m&&!_[E].once||p&&_[E].context!==p)&&T.push(_[E]);T.length?this._events[y]=T.length===1?T[0]:T:o(this,y)}return this},l.prototype.removeAllListeners=function(c){var f;return c?(f=r?r+c:c,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(US);var V2=US.exports;const Iu=bu(V2);var Xy={exports:{}};Xy.exports=Zd;Xy.exports.default=Zd;function Zd(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,s=zS(t,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var l,h,c,f,p,m,y;if(n&&(s=q2(t,e,s,r)),t.length>80*r){l=c=t[0],h=f=t[1];for(var _=r;_<i;_+=r)p=t[_],m=t[_+1],p<l&&(l=p),m<h&&(h=m),p>c&&(c=p),m>f&&(f=m);y=Math.max(c-l,f-h),y=y!==0?32767/y:0}return pu(s,o,r,l,h,y,0),o}function zS(t,e,r,n,i){var s,o;if(i===Kg(t,e,r,n)>0)for(s=e;s<r;s+=n)o=Tx(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=Tx(s,t[s],t[s+1],o);return o&&Jd(o,o.next)&&(gu(o),o=o.next),o}function oo(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Jd(r,r.next)||st(r.prev,r,r.next)===0)){if(gu(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function pu(t,e,r,n,i,s,o){if(t){!o&&s&&rM(t,n,i,s);for(var l=t,h,c;t.prev!==t.next;){if(h=t.prev,c=t.next,s?Y2(t,n,i,s):X2(t)){e.push(h.i/r|0),e.push(t.i/r|0),e.push(c.i/r|0),gu(t),t=c.next,l=c.next;continue}if(t=c,t===l){o?o===1?(t=Q2(oo(t),e,r),pu(t,e,r,n,i,s,2)):o===2&&K2(t,e,r,n,i,s):pu(oo(t),e,r,n,i,s,1);break}}}}function X2(t){var e=t.prev,r=t,n=t.next;if(st(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,l=e.y,h=r.y,c=n.y,f=i<s?i<o?i:o:s<o?s:o,p=l<h?l<c?l:c:h<c?h:c,m=i>s?i>o?i:o:s>o?s:o,y=l>h?l>c?l:c:h>c?h:c,_=n.next;_!==e;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&ra(i,l,s,h,o,c,_.x,_.y)&&st(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function Y2(t,e,r,n){var i=t.prev,s=t,o=t.next;if(st(i,s,o)>=0)return!1;for(var l=i.x,h=s.x,c=o.x,f=i.y,p=s.y,m=o.y,y=l<h?l<c?l:c:h<c?h:c,_=f<p?f<m?f:m:p<m?p:m,E=l>h?l>c?l:c:h>c?h:c,T=f>p?f>m?f:m:p>m?p:m,S=Yg(y,_,e,r,n),b=Yg(E,T,e,r,n),x=t.prevZ,A=t.nextZ;x&&x.z>=S&&A&&A.z<=b;){if(x.x>=y&&x.x<=E&&x.y>=_&&x.y<=T&&x!==i&&x!==o&&ra(l,f,h,p,c,m,x.x,x.y)&&st(x.prev,x,x.next)>=0||(x=x.prevZ,A.x>=y&&A.x<=E&&A.y>=_&&A.y<=T&&A!==i&&A!==o&&ra(l,f,h,p,c,m,A.x,A.y)&&st(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;x&&x.z>=S;){if(x.x>=y&&x.x<=E&&x.y>=_&&x.y<=T&&x!==i&&x!==o&&ra(l,f,h,p,c,m,x.x,x.y)&&st(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;A&&A.z<=b;){if(A.x>=y&&A.x<=E&&A.y>=_&&A.y<=T&&A!==i&&A!==o&&ra(l,f,h,p,c,m,A.x,A.y)&&st(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Q2(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!Jd(i,s)&&GS(i,n,n.next,s)&&mu(i,s)&&mu(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),gu(n),gu(n.next),n=t=s),n=n.next}while(n!==t);return oo(n)}function K2(t,e,r,n,i,s){var o=t;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&sM(o,l)){var h=HS(o,l);o=oo(o,o.next),h=oo(h,h.next),pu(o,e,r,n,i,s,0),pu(h,e,r,n,i,s,0);return}l=l.next}o=o.next}while(o!==t)}function q2(t,e,r,n){var i=[],s,o,l,h,c;for(s=0,o=e.length;s<o;s++)l=e[s]*n,h=s<o-1?e[s+1]*n:t.length,c=zS(t,l,h,n,!1),c===c.next&&(c.steiner=!0),i.push(iM(c));for(i.sort(Z2),s=0;s<i.length;s++)r=J2(i[s],r);return r}function Z2(t,e){return t.x-e.x}function J2(t,e){var r=eM(t,e);if(!r)return e;var n=HS(r,t);return oo(n,n.next),oo(r,r.next)}function eM(t,e){var r=e,n=t.x,i=t.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var l=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=n&&l>s&&(s=l,o=r.x<r.next.x?r:r.next,l===n))return o}r=r.next}while(r!==e);if(!o)return null;var h=o,c=o.x,f=o.y,p=1/0,m;r=o;do n>=r.x&&r.x>=c&&n!==r.x&&ra(i<f?n:s,i,c,f,i<f?s:n,i,r.x,r.y)&&(m=Math.abs(i-r.y)/(n-r.x),mu(r,t)&&(m<p||m===p&&(r.x>o.x||r.x===o.x&&tM(o,r)))&&(o=r,p=m)),r=r.next;while(r!==h);return o}function tM(t,e){return st(t.prev,t,e.prev)<0&&st(e.next,t,t.next)<0}function rM(t,e,r,n){var i=t;do i.z===0&&(i.z=Yg(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,nM(i)}function nM(t){var e,r,n,i,s,o,l,h,c=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,l=0,e=0;e<c&&(l++,n=n.nextZ,!!n);e++);for(h=c;l>0||h>0&&n;)l!==0&&(h===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,l--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,c*=2}while(o>1);return t}function Yg(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function iM(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function ra(t,e,r,n,i,s,o,l){return(i-o)*(e-l)>=(t-o)*(s-l)&&(t-o)*(n-l)>=(r-o)*(e-l)&&(r-o)*(s-l)>=(i-o)*(n-l)}function sM(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!oM(t,e)&&(mu(t,e)&&mu(e,t)&&aM(t,e)&&(st(t.prev,t,e.prev)||st(t,e.prev,e))||Jd(t,e)&&st(t.prev,t,t.next)>0&&st(e.prev,e,e.next)>0)}function st(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Jd(t,e){return t.x===e.x&&t.y===e.y}function GS(t,e,r,n){var i=$h(st(t,e,r)),s=$h(st(t,e,n)),o=$h(st(r,n,t)),l=$h(st(r,n,e));return!!(i!==s&&o!==l||i===0&&Hh(t,r,e)||s===0&&Hh(t,n,e)||o===0&&Hh(r,t,n)||l===0&&Hh(r,e,n))}function Hh(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function $h(t){return t>0?1:t<0?-1:0}function oM(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&GS(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function mu(t,e){return st(t.prev,t,t.next)<0?st(t,e,t.next)>=0&&st(t,t.prev,e)>=0:st(t,e,t.prev)<0||st(t,t.next,e)<0}function aM(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function HS(t,e){var r=new Qg(t.i,t.x,t.y),n=new Qg(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function Tx(t,e,r,n){var i=new Qg(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function gu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Qg(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Zd.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(Kg(t,0,s,r));if(i)for(var l=0,h=e.length;l<h;l++){var c=e[l]*r,f=l<h-1?e[l+1]*r:t.length;o-=Math.abs(Kg(t,c,f,r))}var p=0;for(l=0;l<n.length;l+=3){var m=n[l]*r,y=n[l+1]*r,_=n[l+2]*r;p+=Math.abs((t[m]-t[_])*(t[y+1]-t[m+1])-(t[m]-t[y])*(t[_+1]-t[m+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function Kg(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Zd.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var lM=Xy.exports;const uM=bu(lM);var cd={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */cd.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof kl=="object"&&kl;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,l=2147483647,h=36,c=1,f=26,p=38,m=700,y=72,_=128,E="-",T=/^xn--/,S=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=h-c,P=Math.floor,F=String.fromCharCode,M;function N(D){throw new RangeError(x[D])}function V(D,U){for(var ee=D.length,be=[];ee--;)be[ee]=U(D[ee]);return be}function $(D,U){var ee=D.split("@"),be="";ee.length>1&&(be=ee[0]+"@",D=ee[1]),D=D.replace(b,".");var ye=D.split("."),Pe=V(ye,U).join(".");return be+Pe}function fe(D){for(var U=[],ee=0,be=D.length,ye,Pe;ee<be;)ye=D.charCodeAt(ee++),ye>=55296&&ye<=56319&&ee<be?(Pe=D.charCodeAt(ee++),(Pe&64512)==56320?U.push(((ye&1023)<<10)+(Pe&1023)+65536):(U.push(ye),ee--)):U.push(ye);return U}function Y(D){return V(D,function(U){var ee="";return U>65535&&(U-=65536,ee+=F(U>>>10&1023|55296),U=56320|U&1023),ee+=F(U),ee}).join("")}function O(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:h}function X(D,U){return D+22+75*(D<26)-((U!=0)<<5)}function ne(D,U,ee){var be=0;for(D=ee?P(D/m):D>>1,D+=P(D/U);D>A*f>>1;be+=h)D=P(D/A);return P(be+(A+1)*D/(D+p))}function le(D){var U=[],ee=D.length,be,ye=0,Pe=_,Te=y,Me,St,Ot,lt,Ce,Ve,Oe,Mr,kr;for(Me=D.lastIndexOf(E),Me<0&&(Me=0),St=0;St<Me;++St)D.charCodeAt(St)>=128&&N("not-basic"),U.push(D.charCodeAt(St));for(Ot=Me>0?Me+1:0;Ot<ee;){for(lt=ye,Ce=1,Ve=h;Ot>=ee&&N("invalid-input"),Oe=O(D.charCodeAt(Ot++)),(Oe>=h||Oe>P((l-ye)/Ce))&&N("overflow"),ye+=Oe*Ce,Mr=Ve<=Te?c:Ve>=Te+f?f:Ve-Te,!(Oe<Mr);Ve+=h)kr=h-Mr,Ce>P(l/kr)&&N("overflow"),Ce*=kr;be=U.length+1,Te=ne(ye-lt,be,lt==0),P(ye/be)>l-Pe&&N("overflow"),Pe+=P(ye/be),ye%=be,U.splice(ye++,0,Pe)}return Y(U)}function se(D){var U,ee,be,ye,Pe,Te,Me,St,Ot,lt,Ce,Ve=[],Oe,Mr,kr,Es;for(D=fe(D),Oe=D.length,U=_,ee=0,Pe=y,Te=0;Te<Oe;++Te)Ce=D[Te],Ce<128&&Ve.push(F(Ce));for(be=ye=Ve.length,ye&&Ve.push(E);be<Oe;){for(Me=l,Te=0;Te<Oe;++Te)Ce=D[Te],Ce>=U&&Ce<Me&&(Me=Ce);for(Mr=be+1,Me-U>P((l-ee)/Mr)&&N("overflow"),ee+=(Me-U)*Mr,U=Me,Te=0;Te<Oe;++Te)if(Ce=D[Te],Ce<U&&++ee>l&&N("overflow"),Ce==U){for(St=ee,Ot=h;lt=Ot<=Pe?c:Ot>=Pe+f?f:Ot-Pe,!(St<lt);Ot+=h)Es=St-lt,kr=h-lt,Ve.push(F(X(lt+Es%kr,0))),St=P(Es/kr);Ve.push(F(X(St,0))),Pe=ne(ee,Mr,be==ye),ee=0,++be}++ee,++U}return Ve.join("")}function R(D){return $(D,function(U){return T.test(U)?le(U.slice(4).toLowerCase()):U})}function G(D){return $(D,function(U){return S.test(U)?"xn--"+se(U):U})}if(o={version:"1.4.1",ucs2:{decode:fe,encode:Y},decode:le,encode:se,toASCII:G,toUnicode:R},n&&i)if(t.exports==n)i.exports=o;else for(M in o)o.hasOwnProperty(M)&&(n[M]=o[M]);else r.punycode=o})(kl)})(cd,cd.exports);var hM=cd.exports,cM=Error,dM=EvalError,fM=RangeError,pM=ReferenceError,$S=SyntaxError,Ru=TypeError,mM=URIError,gM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Ax=typeof Symbol<"u"&&Symbol,yM=gM,vM=function(){return typeof Ax!="function"||typeof Symbol!="function"||typeof Ax("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:yM()},nm={__proto__:null,foo:{}},_M=Object,xM=function(){return{__proto__:nm}.foo===nm.foo&&!(nm instanceof _M)},wM="Function.prototype.bind called on incompatible ",EM=Object.prototype.toString,bM=Math.max,SM="[object Function]",Cx=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},TM=function(e,r){for(var n=[],i=r,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},AM=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},CM=function(e){var r=this;if(typeof r!="function"||EM.apply(r)!==SM)throw new TypeError(wM+r);for(var n=TM(arguments,1),i,s=function(){if(this instanceof i){var f=r.apply(this,Cx(n,arguments));return Object(f)===f?f:this}return r.apply(e,Cx(n,arguments))},o=bM(0,r.length-n.length),l=[],h=0;h<o;h++)l[h]="$"+h;if(i=Function("binder","return function ("+AM(l,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},PM=CM,Yy=Function.prototype.bind||PM,IM=Function.prototype.call,RM=Object.prototype.hasOwnProperty,MM=Yy,kM=MM.call(IM,RM),ke,NM=cM,DM=dM,FM=fM,OM=pM,Aa=$S,da=Ru,BM=mM,jS=Function,im=function(t){try{return jS('"use strict"; return ('+t+").constructor;")()}catch{}},qs=Object.getOwnPropertyDescriptor;if(qs)try{qs({},"")}catch{qs=null}var sm=function(){throw new da},LM=qs?function(){try{return arguments.callee,sm}catch{try{return qs(arguments,"callee").get}catch{return sm}}}():sm,ko=vM(),UM=xM(),It=Object.getPrototypeOf||(UM?function(t){return t.__proto__}:null),Bo={},zM=typeof Uint8Array>"u"||!It?ke:It(Uint8Array),Zs={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ke:ArrayBuffer,"%ArrayIteratorPrototype%":ko&&It?It([][Symbol.iterator]()):ke,"%AsyncFromSyncIteratorPrototype%":ke,"%AsyncFunction%":Bo,"%AsyncGenerator%":Bo,"%AsyncGeneratorFunction%":Bo,"%AsyncIteratorPrototype%":Bo,"%Atomics%":typeof Atomics>"u"?ke:Atomics,"%BigInt%":typeof BigInt>"u"?ke:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ke:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ke:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":NM,"%eval%":eval,"%EvalError%":DM,"%Float32Array%":typeof Float32Array>"u"?ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ke:FinalizationRegistry,"%Function%":jS,"%GeneratorFunction%":Bo,"%Int8Array%":typeof Int8Array>"u"?ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ko&&It?It(It([][Symbol.iterator]())):ke,"%JSON%":typeof JSON=="object"?JSON:ke,"%Map%":typeof Map>"u"?ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ko||!It?ke:It(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ke:Promise,"%Proxy%":typeof Proxy>"u"?ke:Proxy,"%RangeError%":FM,"%ReferenceError%":OM,"%Reflect%":typeof Reflect>"u"?ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ko||!It?ke:It(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ko&&It?It(""[Symbol.iterator]()):ke,"%Symbol%":ko?Symbol:ke,"%SyntaxError%":Aa,"%ThrowTypeError%":LM,"%TypedArray%":zM,"%TypeError%":da,"%Uint8Array%":typeof Uint8Array>"u"?ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ke:Uint32Array,"%URIError%":BM,"%WeakMap%":typeof WeakMap>"u"?ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ke:WeakSet};if(It)try{null.error}catch(t){var GM=It(It(t));Zs["%Error.prototype%"]=GM}var HM=function t(e){var r;if(e==="%AsyncFunction%")r=im("async function () {}");else if(e==="%GeneratorFunction%")r=im("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=im("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&It&&(r=It(i.prototype))}return Zs[e]=r,r},Px={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Mu=Yy,dd=kM,$M=Mu.call(Function.call,Array.prototype.concat),jM=Mu.call(Function.apply,Array.prototype.splice),Ix=Mu.call(Function.call,String.prototype.replace),fd=Mu.call(Function.call,String.prototype.slice),WM=Mu.call(Function.call,RegExp.prototype.exec),VM=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,XM=/\\(\\)?/g,YM=function(e){var r=fd(e,0,1),n=fd(e,-1);if(r==="%"&&n!=="%")throw new Aa("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Aa("invalid intrinsic syntax, expected opening `%`");var i=[];return Ix(e,VM,function(s,o,l,h){i[i.length]=l?Ix(h,XM,"$1"):o||s}),i},QM=function(e,r){var n=e,i;if(dd(Px,n)&&(i=Px[n],n="%"+i[0]+"%"),dd(Zs,n)){var s=Zs[n];if(s===Bo&&(s=HM(n)),typeof s>"u"&&!r)throw new da("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Aa("intrinsic "+e+" does not exist!")},Fa=function(e,r){if(typeof e!="string"||e.length===0)throw new da("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new da('"allowMissing" argument must be a boolean');if(WM(/^%?[^%]*%?$/,e)===null)throw new Aa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=YM(e),i=n.length>0?n[0]:"",s=QM("%"+i+"%",r),o=s.name,l=s.value,h=!1,c=s.alias;c&&(i=c[0],jM(n,$M([0,1],c)));for(var f=1,p=!0;f<n.length;f+=1){var m=n[f],y=fd(m,0,1),_=fd(m,-1);if((y==='"'||y==="'"||y==="`"||_==='"'||_==="'"||_==="`")&&y!==_)throw new Aa("property names with quotes must have matching quotes");if((m==="constructor"||!p)&&(h=!0),i+="."+m,o="%"+i+"%",dd(Zs,o))l=Zs[o];else if(l!=null){if(!(m in l)){if(!r)throw new da("base intrinsic for "+e+" exists, but the property is not available.");return}if(qs&&f+1>=n.length){var E=qs(l,m);p=!!E,p&&"get"in E&&!("originalValue"in E.get)?l=E.get:l=l[m]}else p=dd(l,m),l=l[m];p&&!h&&(Zs[o]=l)}}return l},WS={exports:{}},om,Rx;function Qy(){if(Rx)return om;Rx=1;var t=Fa,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return om=e,om}var KM=Fa,Ic=KM("%Object.getOwnPropertyDescriptor%",!0);if(Ic)try{Ic([],"length")}catch{Ic=null}var VS=Ic,Mx=Qy(),qM=$S,No=Ru,kx=VS,ZM=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new No("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new No("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new No("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new No("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new No("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new No("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,h=!!kx&&kx(e,r);if(Mx)Mx(e,r,{configurable:o===null&&h?h.configurable:!o,enumerable:i===null&&h?h.enumerable:!i,value:n,writable:s===null&&h?h.writable:!s});else if(l||!i&&!s&&!o)e[r]=n;else throw new qM("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},qg=Qy(),XS=function(){return!!qg};XS.hasArrayLengthDefineBug=function(){if(!qg)return null;try{return qg([],"length",{value:1}).length!==1}catch{return!0}};var JM=XS,ek=Fa,Nx=ZM,tk=JM(),Dx=VS,Fx=Ru,rk=ek("%Math.floor%"),nk=function(e,r){if(typeof e!="function")throw new Fx("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||rk(r)!==r)throw new Fx("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&Dx){var o=Dx(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(tk?Nx(e,"length",r,!0,!0):Nx(e,"length",r)),e};(function(t){var e=Yy,r=Fa,n=nk,i=Ru,s=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),l=r("%Reflect.apply%",!0)||e.call(o,s),h=Qy(),c=r("%Math.max%");t.exports=function(m){if(typeof m!="function")throw new i("a function is required");var y=l(e,o,arguments);return n(y,1+c(0,m.length-(arguments.length-1)),!0)};var f=function(){return l(e,s,arguments)};h?h(t.exports,"apply",{value:f}):t.exports.apply=f})(WS);var ik=WS.exports,YS=Fa,QS=ik,sk=QS(YS("String.prototype.indexOf")),ok=function(e,r){var n=YS(e,!!r);return typeof n=="function"&&sk(e,".prototype.")>-1?QS(n):n};const ak={},lk=Object.freeze(Object.defineProperty({__proto__:null,default:ak},Symbol.toStringTag,{value:"Module"})),uk=gE(lk);var Ky=typeof Map=="function"&&Map.prototype,am=Object.getOwnPropertyDescriptor&&Ky?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,pd=Ky&&am&&typeof am.get=="function"?am.get:null,Ox=Ky&&Map.prototype.forEach,qy=typeof Set=="function"&&Set.prototype,lm=Object.getOwnPropertyDescriptor&&qy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,md=qy&&lm&&typeof lm.get=="function"?lm.get:null,Bx=qy&&Set.prototype.forEach,hk=typeof WeakMap=="function"&&WeakMap.prototype,Hl=hk?WeakMap.prototype.has:null,ck=typeof WeakSet=="function"&&WeakSet.prototype,$l=ck?WeakSet.prototype.has:null,dk=typeof WeakRef=="function"&&WeakRef.prototype,Lx=dk?WeakRef.prototype.deref:null,fk=Boolean.prototype.valueOf,pk=Object.prototype.toString,mk=Function.prototype.toString,gk=String.prototype.match,Zy=String.prototype.slice,es=String.prototype.replace,yk=String.prototype.toUpperCase,Ux=String.prototype.toLowerCase,KS=RegExp.prototype.test,zx=Array.prototype.concat,Vn=Array.prototype.join,vk=Array.prototype.slice,Gx=Math.floor,Zg=typeof BigInt=="function"?BigInt.prototype.valueOf:null,um=Object.getOwnPropertySymbols,Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Zt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ca||!0)?Symbol.toStringTag:null,qS=Object.prototype.propertyIsEnumerable,Hx=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function $x(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||KS.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Gx(-t):Gx(t);if(n!==t){var i=String(n),s=Zy.call(e,i.length+1);return es.call(i,r,"$&_")+"."+es.call(es.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return es.call(e,r,"$&_")}var e0=uk,jx=e0.custom,Wx=JS(jx)?jx:null,_k=function t(e,r,n,i){var s=r||{};if(Vi(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Vi(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Vi(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Vi(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Vi(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return tT(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var h=String(e);return l?$x(e,h):h}if(typeof e=="bigint"){var c=String(e)+"n";return l?$x(e,c):c}var f=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return t0(e)?"[Array]":"[Object]";var p=Bk(s,n);if(typeof i>"u")i=[];else if(eT(i,e)>=0)return"[Circular]";function m(O,X,ne){if(X&&(i=vk.call(i),i.push(X)),ne){var le={depth:s.depth};return Vi(s,"quoteStyle")&&(le.quoteStyle=s.quoteStyle),t(O,le,n+1,i)}return t(O,s,n+1,i)}if(typeof e=="function"&&!Vx(e)){var y=Pk(e),_=jh(e,m);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(_.length>0?" { "+Vn.call(_,", ")+" }":"")}if(JS(e)){var E=Ca?es.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Jg.call(e);return typeof e=="object"&&!Ca?pl(E):E}if(Dk(e)){for(var T="<"+Ux.call(String(e.nodeName)),S=e.attributes||[],b=0;b<S.length;b++)T+=" "+S[b].name+"="+ZS(xk(S[b].value),"double",s);return T+=">",e.childNodes&&e.childNodes.length&&(T+="..."),T+="</"+Ux.call(String(e.nodeName))+">",T}if(t0(e)){if(e.length===0)return"[]";var x=jh(e,m);return p&&!Ok(x)?"["+r0(x,p)+"]":"[ "+Vn.call(x,", ")+" ]"}if(Ek(e)){var A=jh(e,m);return!("cause"in Error.prototype)&&"cause"in e&&!qS.call(e,"cause")?"{ ["+String(e)+"] "+Vn.call(zx.call("[cause]: "+m(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Vn.call(A,", ")+" }"}if(typeof e=="object"&&o){if(Wx&&typeof e[Wx]=="function"&&e0)return e0(e,{depth:f-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Ik(e)){var P=[];return Ox&&Ox.call(e,function(O,X){P.push(m(X,e,!0)+" => "+m(O,e))}),Xx("Map",pd.call(e),P,p)}if(kk(e)){var F=[];return Bx&&Bx.call(e,function(O){F.push(m(O,e))}),Xx("Set",md.call(e),F,p)}if(Rk(e))return hm("WeakMap");if(Nk(e))return hm("WeakSet");if(Mk(e))return hm("WeakRef");if(Sk(e))return pl(m(Number(e)));if(Ak(e))return pl(m(Zg.call(e)));if(Tk(e))return pl(fk.call(e));if(bk(e))return pl(m(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===kl)return"{ [object globalThis] }";if(!wk(e)&&!Vx(e)){var M=jh(e,m),N=Hx?Hx(e)===Object.prototype:e instanceof Object||e.constructor===Object,V=e instanceof Object?"":"null prototype",$=!N&&Zt&&Object(e)===e&&Zt in e?Zy.call(vs(e),8,-1):V?"Object":"",fe=N||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Y=fe+($||V?"["+Vn.call(zx.call([],$||[],V||[]),": ")+"] ":"");return M.length===0?Y+"{}":p?Y+"{"+r0(M,p)+"}":Y+"{ "+Vn.call(M,", ")+" }"}return String(e)};function ZS(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function xk(t){return es.call(String(t),/"/g,"&quot;")}function t0(t){return vs(t)==="[object Array]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function wk(t){return vs(t)==="[object Date]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function Vx(t){return vs(t)==="[object RegExp]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function Ek(t){return vs(t)==="[object Error]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function bk(t){return vs(t)==="[object String]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function Sk(t){return vs(t)==="[object Number]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function Tk(t){return vs(t)==="[object Boolean]"&&(!Zt||!(typeof t=="object"&&Zt in t))}function JS(t){if(Ca)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Jg)return!1;try{return Jg.call(t),!0}catch{}return!1}function Ak(t){if(!t||typeof t!="object"||!Zg)return!1;try{return Zg.call(t),!0}catch{}return!1}var Ck=Object.prototype.hasOwnProperty||function(t){return t in this};function Vi(t,e){return Ck.call(t,e)}function vs(t){return pk.call(t)}function Pk(t){if(t.name)return t.name;var e=gk.call(mk.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function eT(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Ik(t){if(!pd||!t||typeof t!="object")return!1;try{pd.call(t);try{md.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Rk(t){if(!Hl||!t||typeof t!="object")return!1;try{Hl.call(t,Hl);try{$l.call(t,$l)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Mk(t){if(!Lx||!t||typeof t!="object")return!1;try{return Lx.call(t),!0}catch{}return!1}function kk(t){if(!md||!t||typeof t!="object")return!1;try{md.call(t);try{pd.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Nk(t){if(!$l||!t||typeof t!="object")return!1;try{$l.call(t,$l);try{Hl.call(t,Hl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Dk(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function tT(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return tT(Zy.call(t,0,e.maxStringLength),e)+n}var i=es.call(es.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Fk);return ZS(i,"single",e)}function Fk(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+yk.call(e.toString(16))}function pl(t){return"Object("+t+")"}function hm(t){return t+" { ? }"}function Xx(t,e,r,n){var i=n?r0(r,n):Vn.call(r,", ");return t+" ("+e+") {"+i+"}"}function Ok(t){for(var e=0;e<t.length;e++)if(eT(t[e],`
`)>=0)return!1;return!0}function Bk(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Vn.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Vn.call(Array(e+1),r)}}function r0(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Vn.call(t,","+r)+`
`+e.prev}function jh(t,e){var r=t0(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Vi(t,i)?e(t[i],t):""}var s=typeof um=="function"?um(t):[],o;if(Ca){o={};for(var l=0;l<s.length;l++)o["$"+s[l]]=s[l]}for(var h in t)Vi(t,h)&&(r&&String(Number(h))===h&&h<t.length||Ca&&o["$"+h]instanceof Symbol||(KS.call(/[^\w$]/,h)?n.push(e(h,t)+": "+e(t[h],t)):n.push(h+": "+e(t[h],t))));if(typeof um=="function")for(var c=0;c<s.length;c++)qS.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}var rT=Fa,Oa=ok,Lk=_k,Uk=Ru,Wh=rT("%WeakMap%",!0),Vh=rT("%Map%",!0),zk=Oa("WeakMap.prototype.get",!0),Gk=Oa("WeakMap.prototype.set",!0),Hk=Oa("WeakMap.prototype.has",!0),$k=Oa("Map.prototype.get",!0),jk=Oa("Map.prototype.set",!0),Wk=Oa("Map.prototype.has",!0),Jy=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Vk=function(t,e){var r=Jy(t,e);return r&&r.value},Xk=function(t,e,r){var n=Jy(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Yk=function(t,e){return!!Jy(t,e)},Qk=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new Uk("Side channel does not contain "+Lk(s))},get:function(s){if(Wh&&s&&(typeof s=="object"||typeof s=="function")){if(e)return zk(e,s)}else if(Vh){if(r)return $k(r,s)}else if(n)return Vk(n,s)},has:function(s){if(Wh&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Hk(e,s)}else if(Vh){if(r)return Wk(r,s)}else if(n)return Yk(n,s);return!1},set:function(s,o){Wh&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Wh),Gk(e,s,o)):Vh?(r||(r=new Vh),jk(r,s,o)):(n||(n={key:{},next:null}),Xk(n,s,o))}};return i},Kk=String.prototype.replace,qk=/%20/g,cm={RFC1738:"RFC1738",RFC3986:"RFC3986"},ev={default:cm.RFC3986,formatters:{RFC1738:function(t){return Kk.call(t,qk,"+")},RFC3986:function(t){return String(t)}},RFC1738:cm.RFC1738,RFC3986:cm.RFC3986},Zk=ev,dm=Object.prototype.hasOwnProperty,$s=Array.isArray,On=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Jk=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if($s(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},nT=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},eN=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if($s(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!dm.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return $s(e)&&!$s(r)&&(i=nT(e,n)),$s(e)&&$s(r)?(r.forEach(function(s,o){if(dm.call(e,o)){var l=e[o];l&&typeof l=="object"&&s&&typeof s=="object"?e[o]=t(l,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var l=r[o];return dm.call(s,o)?s[o]=t(s[o],l,n):s[o]=l,s},i)},tN=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},rN=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},fm=1024,nN=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var l="",h=0;h<o.length;h+=fm){for(var c=o.length>=fm?o.slice(h,h+fm):o,f=[],p=0;p<c.length;++p){var m=c.charCodeAt(p);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||s===Zk.RFC1738&&(m===40||m===41)){f[f.length]=c.charAt(p);continue}if(m<128){f[f.length]=On[m];continue}if(m<2048){f[f.length]=On[192|m>>6]+On[128|m&63];continue}if(m<55296||m>=57344){f[f.length]=On[224|m>>12]+On[128|m>>6&63]+On[128|m&63];continue}p+=1,m=65536+((m&1023)<<10|c.charCodeAt(p)&1023),f[f.length]=On[240|m>>18]+On[128|m>>12&63]+On[128|m>>6&63]+On[128|m&63]}l+=f.join("")}return l},iN=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],l=Object.keys(o),h=0;h<l.length;++h){var c=l[h],f=o[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:o,prop:c}),n.push(f))}return Jk(r),e},sN=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},oN=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},aN=function(e,r){return[].concat(e,r)},lN=function(e,r){if($s(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},iT={arrayToObject:nT,assign:tN,combine:aN,compact:iN,decode:rN,encode:nN,isBuffer:oN,isRegExp:sN,maybeMap:lN,merge:eN},sT=Qk,Rc=iT,jl=ev,uN=Object.prototype.hasOwnProperty,oT={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},jn=Array.isArray,hN=Array.prototype.push,aT=function(t,e){hN.apply(t,jn(e)?e:[e])},cN=Date.prototype.toISOString,Yx=jl.default,xt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Rc.encode,encodeValuesOnly:!1,format:Yx,formatter:jl.formatters[Yx],indices:!1,serializeDate:function(e){return cN.call(e)},skipNulls:!1,strictNullHandling:!1},dN=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},pm={},fN=function t(e,r,n,i,s,o,l,h,c,f,p,m,y,_,E,T,S,b){for(var x=e,A=b,P=0,F=!1;(A=A.get(pm))!==void 0&&!F;){var M=A.get(e);if(P+=1,typeof M<"u"){if(M===P)throw new RangeError("Cyclic object value");F=!0}typeof A.get(pm)>"u"&&(P=0)}if(typeof f=="function"?x=f(r,x):x instanceof Date?x=y(x):n==="comma"&&jn(x)&&(x=Rc.maybeMap(x,function(D){return D instanceof Date?y(D):D})),x===null){if(o)return c&&!T?c(r,xt.encoder,S,"key",_):r;x=""}if(dN(x)||Rc.isBuffer(x)){if(c){var N=T?r:c(r,xt.encoder,S,"key",_);return[E(N)+"="+E(c(x,xt.encoder,S,"value",_))]}return[E(r)+"="+E(String(x))]}var V=[];if(typeof x>"u")return V;var $;if(n==="comma"&&jn(x))T&&c&&(x=Rc.maybeMap(x,c)),$=[{value:x.length>0?x.join(",")||null:void 0}];else if(jn(f))$=f;else{var fe=Object.keys(x);$=p?fe.sort(p):fe}var Y=h?r.replace(/\./g,"%2E"):r,O=i&&jn(x)&&x.length===1?Y+"[]":Y;if(s&&jn(x)&&x.length===0)return O+"[]";for(var X=0;X<$.length;++X){var ne=$[X],le=typeof ne=="object"&&typeof ne.value<"u"?ne.value:x[ne];if(!(l&&le===null)){var se=m&&h?ne.replace(/\./g,"%2E"):ne,R=jn(x)?typeof n=="function"?n(O,se):O:O+(m?"."+se:"["+se+"]");b.set(e,P);var G=sT();G.set(pm,b),aT(V,t(le,R,n,i,s,o,l,h,n==="comma"&&T&&jn(x)?null:c,f,p,m,y,_,E,T,S,G))}}return V},pN=function(e){if(!e)return xt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||xt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=jl.default;if(typeof e.format<"u"){if(!uN.call(jl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=jl.formatters[n],s=xt.filter;(typeof e.filter=="function"||jn(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in oT?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=xt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:xt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:xt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:xt.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?xt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:xt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:xt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:xt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:xt.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:xt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:xt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xt.strictNullHandling}},mN=function(t,e){var r=t,n=pN(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):jn(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var l=oT[n.arrayFormat],h=l==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=sT(),f=0;f<i.length;++f){var p=i[f];n.skipNulls&&r[p]===null||aT(o,fN(r[p],p,l,h,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var m=o.join(n.delimiter),y=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""},Pa=iT,n0=Object.prototype.hasOwnProperty,gN=Array.isArray,ft={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Pa.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},yN=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},lT=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},vN="utf8=%26%2310003%3B",_N="utf8=%E2%9C%93",xN=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),l=-1,h,c=r.charset;if(r.charsetSentinel)for(h=0;h<o.length;++h)o[h].indexOf("utf8=")===0&&(o[h]===_N?c="utf-8":o[h]===vN&&(c="iso-8859-1"),l=h,h=o.length);for(h=0;h<o.length;++h)if(h!==l){var f=o[h],p=f.indexOf("]="),m=p===-1?f.indexOf("="):p+1,y,_;m===-1?(y=r.decoder(f,ft.decoder,c,"key"),_=r.strictNullHandling?null:""):(y=r.decoder(f.slice(0,m),ft.decoder,c,"key"),_=Pa.maybeMap(lT(f.slice(m+1),r),function(T){return r.decoder(T,ft.decoder,c,"value")})),_&&r.interpretNumericEntities&&c==="iso-8859-1"&&(_=yN(_)),f.indexOf("[]=")>-1&&(_=gN(_)?[_]:_);var E=n0.call(n,y);E&&r.duplicates==="combine"?n[y]=Pa.combine(n[y],_):(!E||r.duplicates==="last")&&(n[y]=_)}return n},wN=function(t,e,r,n){for(var i=n?e:lT(e,r),s=t.length-1;s>=0;--s){var o,l=t[s];if(l==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=r.plainObjects?Object.create(null):{};var h=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,c=r.decodeDotInKeys?h.replace(/%2E/g,"."):h,f=parseInt(c,10);!r.parseArrays&&c===""?o={0:i}:!isNaN(f)&&l!==c&&String(f)===c&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(o=[],o[f]=i):c!=="__proto__"&&(o[c]=i)}i=o}return i},EN=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,h=n.depth>0&&o.exec(s),c=h?s.slice(0,h.index):s,f=[];if(c){if(!n.plainObjects&&n0.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var p=0;n.depth>0&&(h=l.exec(s))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&n0.call(Object.prototype,h[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(h[1])}return h&&f.push("["+s.slice(h.index)+"]"),wN(f,r,n,i)}},bN=function(e){if(!e)return ft;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?ft.charset:e.charset,n=typeof e.duplicates>"u"?ft.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:ft.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ft.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:ft.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:ft.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:ft.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ft.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:ft.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:ft.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:ft.decoder,delimiter:typeof e.delimiter=="string"||Pa.isRegExp(e.delimiter)?e.delimiter:ft.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:ft.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:ft.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:ft.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:ft.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ft.strictNullHandling}},SN=function(t,e){var r=bN(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?xN(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var l=s[o],h=EN(l,n[l],r,typeof t=="string");i=Pa.merge(i,h,r)}return r.allowSparse===!0?i:Pa.compact(i)},TN=mN,AN=SN,CN=ev,PN={formats:CN,parse:AN,stringify:TN},IN=hM;function vi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var RN=/^([a-z0-9.+-]+:)/i,MN=/:[0-9]*$/,kN=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,NN=["<",">",'"',"`"," ","\r",`
`,"	"],DN=["{","}","|","\\","^","`"].concat(NN),i0=["'"].concat(DN),Qx=["%","/","?",";","#"].concat(i0),Kx=["/","?","#"],FN=255,qx=/^[+a-z0-9A-Z_-]{0,63}$/,ON=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,BN={javascript:!0,"javascript:":!0},s0={javascript:!0,"javascript:":!0},fa={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},o0=PN;function LN(t,e,r){if(t&&typeof t=="object"&&t instanceof vi)return t;var n=new vi;return n.parse(t,e,r),n}vi.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var l=t;if(l=l.trim(),!r&&t.split("#").length===1){var h=kN.exec(l);if(h)return this.path=l,this.href=l,this.pathname=h[1],h[2]?(this.search=h[2],e?this.query=o0.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=RN.exec(l);if(c){c=c[0];var f=c.toLowerCase();this.protocol=f,l=l.substr(c.length)}if(r||c||l.match(/^\/\/[^@/]+@[^@/]+/)){var p=l.substr(0,2)==="//";p&&!(c&&s0[c])&&(l=l.substr(2),this.slashes=!0)}if(!s0[c]&&(p||c&&!fa[c])){for(var m=-1,y=0;y<Kx.length;y++){var _=l.indexOf(Kx[y]);_!==-1&&(m===-1||_<m)&&(m=_)}var E,T;m===-1?T=l.lastIndexOf("@"):T=l.lastIndexOf("@",m),T!==-1&&(E=l.slice(0,T),l=l.slice(T+1),this.auth=decodeURIComponent(E)),m=-1;for(var y=0;y<Qx.length;y++){var _=l.indexOf(Qx[y]);_!==-1&&(m===-1||_<m)&&(m=_)}m===-1&&(m=l.length),this.host=l.slice(0,m),l=l.slice(m),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var b=this.hostname.split(/\./),y=0,x=b.length;y<x;y++){var A=b[y];if(A&&!A.match(qx)){for(var P="",F=0,M=A.length;F<M;F++)A.charCodeAt(F)>127?P+="x":P+=A[F];if(!P.match(qx)){var N=b.slice(0,y),V=b.slice(y+1),$=A.match(ON);$&&(N.push($[1]),V.unshift($[2])),V.length&&(l="/"+V.join(".")+l),this.hostname=N.join(".");break}}}this.hostname.length>FN?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=IN.toASCII(this.hostname));var fe=this.port?":"+this.port:"",Y=this.hostname||"";this.host=Y+fe,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!BN[f])for(var y=0,x=i0.length;y<x;y++){var O=i0[y];if(l.indexOf(O)!==-1){var X=encodeURIComponent(O);X===O&&(X=escape(O)),l=l.split(O).join(X)}}var ne=l.indexOf("#");ne!==-1&&(this.hash=l.substr(ne),l=l.slice(0,ne));var le=l.indexOf("?");if(le!==-1?(this.search=l.substr(le),this.query=l.substr(le+1),e&&(this.query=o0.parse(this.query)),l=l.slice(0,le)):e&&(this.search="",this.query={}),l&&(this.pathname=l),fa[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var fe=this.pathname||"",se=this.search||"";this.path=fe+se}return this.href=this.format(),this};vi.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=o0.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||fa[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),o=o.replace("#","%23"),e+i+r+o+n};vi.prototype.resolve=function(t){return this.resolveObject(LN(t,!1,!0)).format()};vi.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new vi;e.parse(t,!1,!0),t=e}for(var r=new vi,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),l=0;l<o.length;l++){var h=o[l];h!=="protocol"&&(r[h]=t[h])}return fa[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!fa[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var p=c[f];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!s0[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),r.pathname=x.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&r.pathname.charAt(0)==="/",E=t.host||t.pathname&&t.pathname.charAt(0)==="/",T=E||_||r.host&&t.pathname,S=T,b=r.pathname&&r.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],A=r.protocol&&!fa[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(b[0]===""?b[0]=r.host:b.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),T=T&&(x[0]===""||b[0]==="")),E)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,b=x;else if(x.length)b||(b=[]),b.pop(),b=b.concat(x),r.search=t.search,r.query=t.query;else if(t.search!=null){if(A){r.host=b.shift(),r.hostname=r.host;var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.hostname=P.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var F=b.slice(-1)[0],M=(r.host||t.host||b.length>1)&&(F==="."||F==="..")||F==="",N=0,V=b.length;V>=0;V--)F=b[V],F==="."?b.splice(V,1):F===".."?(b.splice(V,1),N++):N&&(b.splice(V,1),N--);if(!T&&!S)for(;N--;N)b.unshift("..");T&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),M&&b.join("/").substr(-1)!=="/"&&b.push("");var $=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(A){r.hostname=$?"":b.length?b.shift():"",r.host=r.hostname;var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.hostname=P.shift(),r.host=r.hostname)}return T=T||r.host&&b.length,T&&!$&&b.unshift(""),b.length>0?r.pathname=b.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};vi.prototype.parseHost=function(){var t=this.host,e=MN.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const Zx={};function Ie(t,e,r=3){if(Zx[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),Zx[e]=!0}function nn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function ml(t){return t.split("?")[0].split("#")[0]}function UN(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zN(t,e,r){return t.replace(new RegExp(UN(e),"g"),r)}function GN(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let l=0;l<=t.length;++l){if(l<t.length)o=t.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(i===l-1||s===1))if(i!==l-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const h=r.lastIndexOf("/");if(h!==r.length-1){h===-1?(r="",n=0):(r=r.slice(0,h),n=r.length-1-r.lastIndexOf("/")),i=l,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=l,s=0;continue}}}else r.length>0?r+=`/${t.slice(i+1,l)}`:r=t.slice(i+1,l),n=l-i-1;i=l,s=0}else o===46&&s!==-1?++s:s=-1}return r}const Ft={toPosix(t){return zN(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){nn(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(nn(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=ml(this.toPosix(e??oe.ADAPTER.getBaseUrl())),i=ml(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?Ft.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(nn(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=GN(t),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return nn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(nn(n),n.length>0)if(e===void 0)e=n;else{const i=t[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(nn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!i){n=l;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+t:s:r&&n===1?"//":s+t.slice(0,n)},rootname(t){nn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){nn(t),e&&nn(e),t=ml(this.toPosix(t));let r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){const h=t.charCodeAt(s);if(h===47){if(!i){r=s+1;break}}else l===-1&&(i=!1,l=s+1),o>=0&&(h===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){nn(t),t=ml(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const l=t.charCodeAt(o);if(l===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),l===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){nn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=ml(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,l=-1,h=!0,c=t.length-1,f=0;for(;c>=i;--c){if(r=t.charCodeAt(c),r===47){if(!h){o=c+1;break}continue}l===-1&&(h=!1,l=c+1),r===46?s===-1?s=c:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===o+1?l!==-1&&(o===0&&n?e.base=e.name=t.slice(1,l):e.base=e.name=t.slice(o,l)):(o===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,l)):(e.name=t.slice(o,s),e.base=t.slice(o,l)),e.ext=t.slice(s,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let mm;async function HN(){return mm??(mm=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return fr.UNPACK;const e=await new Promise(o=>{const l=document.createElement("video");l.onloadeddata=()=>o(l),l.onerror=()=>o(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!e)return fr.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(n),t.deleteTexture(r),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?fr.PMA:fr.UNPACK})()),mm}let gm;function $N(){return typeof gm>"u"&&(gm=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:oe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!oe.ADAPTER.getWebGLRenderingContext())return!1;const r=oe.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),gm}var jN={grad:.9,turn:360,rad:360/(2*Math.PI)},li=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Mt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Xr=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},uT=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Jx=function(t){return{r:Xr(t.r,0,255),g:Xr(t.g,0,255),b:Xr(t.b,0,255),a:Xr(t.a)}},ym=function(t){return{r:Mt(t.r),g:Mt(t.g),b:Mt(t.b),a:Mt(t.a,3)}},WN=/^#([0-9a-f]{3,8})$/i,Xh=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},hT=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),l=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(l<0?l+6:l),s:s?o/s*100:0,v:s/255*100,a:i}},cT=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),l=n*(1-(e-s)*r),h=n*(1-(1-e+s)*r),c=s%6;return{r:255*[n,l,o,o,h,n][c],g:255*[h,n,n,l,o,o][c],b:255*[o,o,h,n,n,l][c],a:i}},ew=function(t){return{h:uT(t.h),s:Xr(t.s,0,100),l:Xr(t.l,0,100),a:Xr(t.a)}},tw=function(t){return{h:Mt(t.h),s:Mt(t.s),l:Mt(t.l),a:Mt(t.a,3)}},rw=function(t){return cT((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},Wl=function(t){return{h:(e=hT(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},VN=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XN=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YN=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,QN=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,a0={string:[[function(t){var e=WN.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Mt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Mt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=YN.exec(t)||QN.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Jx({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=VN.exec(t)||XN.exec(t);if(!e)return null;var r,n,i=ew({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(jN[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return rw(i)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=i===void 0?1:i;return li(e)&&li(r)&&li(n)?Jx({r:Number(e),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,i=t.a,s=i===void 0?1:i;if(!li(e)||!li(r)||!li(n))return null;var o=ew({h:Number(e),s:Number(r),l:Number(n),a:Number(s)});return rw(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,i=t.a,s=i===void 0?1:i;if(!li(e)||!li(r)||!li(n))return null;var o=function(l){return{h:uT(l.h),s:Xr(l.s,0,100),v:Xr(l.v,0,100),a:Xr(l.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(s)});return cT(o)},"hsv"]]},nw=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},KN=function(t){return typeof t=="string"?nw(t.trim(),a0.string):typeof t=="object"&&t!==null?nw(t,a0.object):[null,void 0]},vm=function(t,e){var r=Wl(t);return{h:r.h,s:Xr(r.s+100*e,0,100),l:r.l,a:r.a}},_m=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},iw=function(t,e){var r=Wl(t);return{h:r.h,s:r.s,l:Xr(r.l+100*e,0,100),a:r.a}},l0=function(){function t(e){this.parsed=KN(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Mt(_m(this.rgba),2)},t.prototype.isDark=function(){return _m(this.rgba)<.5},t.prototype.isLight=function(){return _m(this.rgba)>=.5},t.prototype.toHex=function(){return e=ym(this.rgba),r=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Xh(Mt(255*s)):"","#"+Xh(r)+Xh(n)+Xh(i)+o;var e,r,n,i,s,o},t.prototype.toRgb=function(){return ym(this.rgba)},t.prototype.toRgbString=function(){return e=ym(this.rgba),r=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var e,r,n,i,s},t.prototype.toHsl=function(){return tw(Wl(this.rgba))},t.prototype.toHslString=function(){return e=tw(Wl(this.rgba)),r=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var e,r,n,i,s},t.prototype.toHsv=function(){return e=hT(this.rgba),{h:Mt(e.h),s:Mt(e.s),v:Mt(e.v),a:Mt(e.a,3)};var e},t.prototype.invert=function(){return Ln({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Ln(vm(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ln(vm(this.rgba,-e))},t.prototype.grayscale=function(){return Ln(vm(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Ln(iw(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Ln(iw(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Ln({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Mt(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=Wl(this.rgba);return typeof e=="number"?Ln({h:e,s:r.s,l:r.l,a:r.a}):Mt(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Ln(e).toHex()},t}(),Ln=function(t){return t instanceof l0?t:new l0(t)},sw=[],qN=function(t){t.forEach(function(e){sw.indexOf(e)<0&&(e(l0,a0),sw.push(e))})};function ZN(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,h,c=n[this.toHex()];if(c)return c;if(o!=null&&o.closest){var f=this.toRgb(),p=1/0,m="black";if(!s.length)for(var y in r)s[y]=new t(r[y]).toRgb();for(var _ in r){var E=(l=f,h=s[_],Math.pow(l.r-h.r,2)+Math.pow(l.g-h.g,2)+Math.pow(l.b-h.b,2));E<p&&(p=E,m=_)}return m}},e.string.push([function(o){var l=o.toLowerCase(),h=l==="transparent"?"#0000":r[l];return h?new t(h).toRgb():null},"name"])}qN([ZN]);const Lo=class Mc{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Mc)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((i,s)=>i===r[s]);if(e!==null&&r!==null){const i=Object.keys(e),s=Object.keys(r);return i.length!==s.length?!1:i.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,n,i]=this._components;return{r:e,g:r,b:n,a:i}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,i]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[r,n,i]=this._components;return e[0]=r,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,i,s]=Mc.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,n,i]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,n,i,s]=this._components;return e[0]=r,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let r,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,i,s=255]=e,r/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const l=Mc.HEX_PATTERN.exec(e);l&&(e=`#${l[2]}`)}const o=Ln(e);o.isValid()&&({r,g:n,b:i,a:s}=o.rgba,r/=255,n/=255,i/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,r),n)}),e)}};Lo.shared=new Lo,Lo.temp=new Lo,Lo.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let je=Lo;function JN(t){return Ie("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),je.shared.setValue(t).toHex()}function eD(t){return Ie("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),je.shared.setValue(t).toNumber()}function tD(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[_e.NORMAL_NPM]=_e.NORMAL,t[_e.ADD_NPM]=_e.ADD,t[_e.SCREEN_NPM]=_e.SCREEN,e[_e.NORMAL]=_e.NORMAL_NPM,e[_e.ADD]=_e.ADD_NPM,e[_e.SCREEN]=_e.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const dT=tD();function fT(t,e){return dT[e?1:0][t]}function pT(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function mT(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function gd(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function ow(t){return!(t&t-1)&&!!t}function aw(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function pa(t,e,r){const n=t.length;let i;if(e>=n||r===0)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function ts(t){return t===0?0:t<0?-1:1}let rD=0;function ao(){return++rD}const u0=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};u0.EMPTY=new u0(0,0,0,0);let lw=u0;const uw={},Un=Object.create(null),Gi=Object.create(null);class nD{constructor(e,r,n){this._canvas=oe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||oe.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function hw(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(t[i+3]!==0)return!1;return!0}function cw(t,e,r,n,i){const s=4*e;for(let o=n,l=n*s+4*r;o<=i;++o,l+=s)if(t[l+3]!==0)return!1;return!0}function iD(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,r).data;let s=0,o=0,l=e-1,h=r-1;for(;o<r&&hw(i,e,o);)++o;if(o===r)return lw.EMPTY;for(;hw(i,e,h);)--h;for(;cw(i,e,s,o,h);)++s;for(;cw(i,e,l,o,h);)--l;return++l,++h,new lw(s,o,l,h)}function sD(t){const e=iD(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}function oD(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function bi(t,e=1){var n;const r=(n=oe.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}var te=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(te||{});const h0=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},dw=(t,e)=>h0(t).priority??e,ce={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(h0).forEach(e=>{e.type.forEach(r=>{var n,i;return(i=(n=this._removeHandlers)[r])==null?void 0:i.call(n,e)})}),this},add(...t){return t.map(h0).forEach(e=>{e.type.forEach(r=>{var s,o;const n=this._addHandlers,i=this._queue;n[r]?(s=n[r])==null||s.call(n,e):(i[r]=i[r]||[],(o=i[r])==null||o.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(l=>e(l)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>dw(s,r)-dw(i,r)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class c0{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const aD=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function lD(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function uD(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=aD.replace(/%forloop%/gi,lD(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const xm=0,wm=1,Em=2,bm=3,Sm=4,Tm=5;class ri{constructor(){this.data=0,this.blendMode=_e.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<xm)}set blend(e){!!(this.data&1<<xm)!==e&&(this.data^=1<<xm)}get offsets(){return!!(this.data&1<<wm)}set offsets(e){!!(this.data&1<<wm)!==e&&(this.data^=1<<wm)}get culling(){return!!(this.data&1<<Em)}set culling(e){!!(this.data&1<<Em)!==e&&(this.data^=1<<Em)}get depthTest(){return!!(this.data&1<<bm)}set depthTest(e){!!(this.data&1<<bm)!==e&&(this.data^=1<<bm)}get depthMask(){return!!(this.data&1<<Tm)}set depthMask(e){!!(this.data&1<<Tm)!==e&&(this.data^=1<<Tm)}get clockwiseFrontFace(){return!!(this.data&1<<Sm)}set clockwiseFrontFace(e){!!(this.data&1<<Sm)!==e&&(this.data^=1<<Sm)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==_e.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new ri;return e.depthTest=!1,e.blend=!0,e}}ri.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const d0=[];function gT(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=d0.length-1;n>=0;--n){const i=d0[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class xn{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,i,s,o,l,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:f}=this;this._aliasCount++;for(let p=0,m=f.length;p<m;p++)f[p][c](e,r,n,i,s,o,l,h);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(xn.prototype,{dispatch:{value:xn.prototype.emit},run:{value:xn.prototype.emit}});class yu{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new xn("setRealSize"),this.onUpdate=new xn("update"),this.onError=new xn("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class ef extends yu{constructor(e,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===fr.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const hD={scaleMode:dn.NEAREST,alphaMode:fr.NPM},f0=class Uo extends Iu{constructor(e=null,r=null){super(),r=Object.assign({},Uo.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:l,height:h,wrapMode:c,format:f,type:p,target:m,resolution:y,resourceOptions:_}=r;e&&!(e instanceof yu)&&(e=gT(e,_),e.internal=!0),this.resolution=y||oe.RESOLUTION,this.width=Math.round((l||0)*this.resolution)/this.resolution,this.height=Math.round((h||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=f,this.type=p,this.target=m,this.alphaMode=n,this.uid=ao(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=l>0&&h>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)}setRealSize(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=ow(this.realWidth)&&ow(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Gi[this.cacheId],delete Un[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Uo.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,n=oe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const l=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${l}_${ao()}`}s=e._pixiId}let o=Gi[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Uo(e,r),o.cacheId=s,Uo.addToCache(o,s)),o}static fromBuffer(e,r,n,i){e=e||new Float32Array(r*n*4);const s=new ef(e,{width:r,height:n,...i==null?void 0:i.resourceOptions});let o,l;return e instanceof Float32Array?(o=J.RGBA,l=ge.FLOAT):e instanceof Int32Array?(o=J.RGBA_INTEGER,l=ge.INT):e instanceof Uint32Array?(o=J.RGBA_INTEGER,l=ge.UNSIGNED_INT):e instanceof Int16Array?(o=J.RGBA_INTEGER,l=ge.SHORT):e instanceof Uint16Array?(o=J.RGBA_INTEGER,l=ge.UNSIGNED_SHORT):e instanceof Int8Array?(o=J.RGBA,l=ge.BYTE):(o=J.RGBA,l=ge.UNSIGNED_BYTE),s.internal=!0,new Uo(s,Object.assign({},hD,{type:l,format:o},i))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Gi[r]&&Gi[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),Gi[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Gi[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Gi[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete Gi[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};f0.defaultOptions={mipmap:Zn.POW2,anisotropicLevel:0,scaleMode:dn.LINEAR,wrapMode:yi.CLAMP,alphaMode:fr.UNPACK,target:ca.TEXTURE_2D,format:J.RGBA,type:ge.UNSIGNED_BYTE},f0._globalBatch=0;let Se=f0;class p0{constructor(){this.texArray=null,this.blend=0,this.type=Wr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let cD=0;class it{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=cD++,this.disposeRunner=new xn("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?qn.ELEMENT_ARRAY_BUFFER:qn.ARRAY_BUFFER}get index(){return this.type===qn.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new it(e)}}class yd{constructor(e,r=0,n=!1,i=ge.FLOAT,s,o,l,h=1){this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=l,this.divisor=h}destroy(){this.buffer=null}static from(e,r,n,i,s){return new yd(e,r,n,i,s)}}const dD={Float32Array,Uint32Array,Int32Array,Uint8Array};function fD(t,e){let r=0,n=0;const i={};for(let h=0;h<t.length;h++)n+=e[h],r+=t[h].length;const s=new ArrayBuffer(r*4);let o=null,l=0;for(let h=0;h<t.length;h++){const c=e[h],f=t[h],p=mT(f);i[p]||(i[p]=new dD[p](s)),o=i[p];for(let m=0;m<f.length;m++){const y=(m/c|0)*n+l,_=m%c;o[y+_]=f[m]}l+=c}return new Float32Array(s)}const fw={5126:4,5123:2,5121:1};let pD=0;const mD={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Si{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=pD++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new xn("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,i=!1,s,o,l,h=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof it||(r instanceof Array&&(r=new Float32Array(r)),r=new it(r));const c=e.split("|");if(c.length>1){for(let p=0;p<c.length;p++)this.addAttribute(c[p],r,n,i,s);return this}let f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new yd(f,n,i,s,o,l,h),this.instanced=this.instanced||h,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof it||(e instanceof Array&&(e=new Uint16Array(e)),e=new it(e)),e.type=qn.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new it;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),r.push(s.size*fw[s.type]/4),s.buffer=0}for(n.data=fD(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Si;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new it(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new yd(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=qn.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Si,n=[],i=[],s=[];let o;for(let l=0;l<e.length;l++){o=e[l];for(let h=0;h<o.buffers.length;h++)i[h]=i[h]||0,i[h]+=o.buffers[h].data.length,s[h]=0}for(let l=0;l<o.buffers.length;l++)n[l]=new mD[mT(o.buffers[l].data)](i[l]),r.buffers[l]=new it(n[l]);for(let l=0;l<e.length;l++){o=e[l];for(let h=0;h<o.buffers.length;h++)n[h].set(o.buffers[h].data,s[h]),s[h]+=o.buffers[h].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=qn.ELEMENT_ARRAY_BUFFER;let l=0,h=0,c=0,f=0;for(let p=0;p<o.buffers.length;p++)if(o.buffers[p]!==o.indexBuffer){f=p;break}for(const p in o.attributes){const m=o.attributes[p];(m.buffer|0)===f&&(h+=m.size*fw[m.type]/4)}for(let p=0;p<e.length;p++){const m=e[p].indexBuffer.data;for(let y=0;y<m.length;y++)r.indexBuffer.data[y+c]+=l;l+=e[p].buffers[f].data.length/h,c+=m.length}}return r}}class yT extends Si{constructor(e=!1){super(),this._buffer=new it(null,e,!1),this._indexBuffer=new it(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ge.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ge.FLOAT).addAttribute("aColor",this._buffer,4,!0,ge.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ge.FLOAT).addIndex(this._indexBuffer)}}const vd=Math.PI*2,gD=180/Math.PI,yD=Math.PI/180;var Gt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Gt||{});class Ee{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Ee(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}Ee.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Yh=[new Ee,new Ee,new Ee,new Ee];class we{constructor(e=0,r=0,n=0,i=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Gt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new we(0,0,0,0)}clone(){return new we(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const N=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=N)return!1;const V=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>V}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const l=Yh[0].set(e.left,e.top),h=Yh[1].set(e.left,e.bottom),c=Yh[2].set(e.right,e.top),f=Yh[3].set(e.right,e.bottom);if(c.x<=l.x||h.y<=l.y)return!1;const p=Math.sign(r.a*r.d-r.b*r.c);if(p===0||(r.apply(l,l),r.apply(h,h),r.apply(c,c),r.apply(f,f),Math.max(l.x,h.x,c.x,f.x)<=n||Math.min(l.x,h.x,c.x,f.x)>=i||Math.max(l.y,h.y,c.y,f.y)<=s||Math.min(l.y,h.y,c.y,f.y)>=o))return!1;const m=p*(h.y-l.y),y=p*(l.x-h.x),_=m*n+y*s,E=m*i+y*s,T=m*n+y*o,S=m*i+y*o;if(Math.max(_,E,T,S)<=m*l.x+y*l.y||Math.min(_,E,T,S)>=m*f.x+y*f.y)return!1;const b=p*(l.y-c.y),x=p*(c.x-l.x),A=b*n+x*s,P=b*i+x*s,F=b*n+x*o,M=b*i+x*o;return!(Math.max(A,P,F,M)<=b*l.x+x*l.y||Math.min(A,P,F,M)>=b*f.x+x*f.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}}we.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class tf{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=Gt.CIRC}clone(){return new tf(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new we(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}tf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class rf{constructor(e=0,r=0,n=0,i=0){this.x=e,this.y=r,this.width=n,this.height=i,this.type=Gt.ELIP}clone(){return new rf(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new we(this.x-this.width,this.y-this.height,this.width,this.height)}}rf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Js{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=Gt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new Js(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const l=this.points[s*2],h=this.points[s*2+1],c=this.points[o*2],f=this.points[o*2+1];h>r!=f>r&&e<(c-l)*((r-h)/(f-h))+l&&(n=!n)}return n}}Js.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class nf{constructor(e=0,r=0,n=0,i=0,s=20){this.x=e,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=Gt.RREC}clone(){return new nf(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}nf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class We{constructor(e=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,i,s,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new Ee;const n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(e,r){r=r||new Ee;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,r,n,i,s,o,l,h,c){return this.a=Math.cos(l+c)*s,this.b=Math.sin(l+c)*s,this.c=-Math.sin(l-h)*o,this.d=Math.cos(l-h)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,l=-Math.atan2(-i,s),h=Math.atan2(n,r),c=Math.abs(l+h);return c<1e-5||Math.abs(vd-c)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=h),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new We;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new We}static get TEMP_MATRIX(){return new We}}We.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Bs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ls=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Us=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m0=[],vT=[],Qh=Math.sign;function vD(){for(let t=0;t<16;t++){const e=[];m0.push(e);for(let r=0;r<16;r++){const n=Qh(Bs[t]*Bs[r]+Us[t]*Ls[r]),i=Qh(Ls[t]*Bs[r]+zs[t]*Ls[r]),s=Qh(Bs[t]*Us[r]+Us[t]*zs[r]),o=Qh(Ls[t]*Us[r]+zs[t]*zs[r]);for(let l=0;l<16;l++)if(Bs[l]===n&&Ls[l]===i&&Us[l]===s&&zs[l]===o){e.push(l);break}}}for(let t=0;t<16;t++){const e=new We;e.set(Bs[t],Ls[t],Us[t],zs[t],0,0),vT.push(e)}}vD();const Ne={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Bs[t],uY:t=>Ls[t],vX:t=>Us[t],vY:t=>zs[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>m0[t][e],sub:(t,e)=>m0[t][Ne.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Ne.S:Ne.N:Math.abs(e)*2<=Math.abs(t)?t>0?Ne.E:Ne.W:e>0?t>0?Ne.SE:Ne.SW:t>0?Ne.NE:Ne.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=vT[Ne.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class fn{constructor(e,r,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new fn(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}fn.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const g0=class{constructor(){this.worldTransform=new We,this.localTransform=new We,this.position=new fn(this.onChange,this,0,0),this.scale=new fn(this.onChange,this,1,1),this.pivot=new fn(this.onChange,this,0,0),this.skew=new fn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};g0.IDENTITY=new g0;let sf=g0;sf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var _D=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,xD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function pw(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Am(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function _T(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Am(2*e);case"bvec3":return Am(3*e);case"bvec4":return Am(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ma=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],wD={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},ED={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function bD(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((n=t.uniforms[i])==null?void 0:n.group)===!0&&(t.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let l=!1;for(let h=0;h<ma.length;h++)if(ma[h].test(s,o)){r.push(ma[h].code(i,o)),l=!0;break}if(!l){const h=(s.size===1&&!s.isArray?wD:ED)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const xT={};let Do=xT;function SD(){if(Do===xT||Do!=null&&Do.isContextLost()){const t=oe.ADAPTER.createCanvas();let e;oe.PREFER_ENV>=co.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Do=e}return Do}let Kh;function TD(){if(!Kh){Kh=Vr.MEDIUM;const t=SD();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(Kh=e.precision?Vr.HIGH:Vr.MEDIUM)}}return Kh}function mw(t,e){const r=t.getShaderSource(e).split(`
`).map((c,f)=>`${f}: ${c}`),n=t.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),l=[""];o.forEach(c=>{r[c-1]=`%c${r[c-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=r.join(`
`);l[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function AD(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||mw(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||mw(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const CD={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function wT(t){return CD[t]}let qh=null;const gw={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ET(t,e){if(!qh){const r=Object.keys(gw);qh={};for(let n=0;n<r.length;++n){const i=r[n];qh[t[i]]=gw[i]}}return qh[e]}function yw(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===Vr.HIGH&&r!==Vr.HIGH&&(n=Vr.MEDIUM),`precision ${n} float;
${t}`}else if(r!==Vr.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let gl;function PD(){if(typeof gl=="boolean")return gl;try{gl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{gl=!1}return gl}let ID=0;const Zh={},y0=class zo{constructor(e,r,n="pixi-shader",i={}){this.extra={},this.id=ID++,this.vertexSrc=e||zo.defaultVertexSrc,this.fragmentSrc=r||zo.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Zh[n]?(Zh[n]++,n+=`-${Zh[n]}`):Zh[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=yw(this.vertexSrc,zo.defaultVertexPrecision,Vr.HIGH),this.fragmentSrc=yw(this.fragmentSrc,zo.defaultFragmentPrecision,TD())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return xD}static get defaultFragmentSrc(){return _D}static from(e,r,n){const i=e+r;let s=uw[i];return s||(uw[i]=s=new zo(e,r,n)),s}};y0.defaultVertexPrecision=Vr.HIGH,y0.defaultFragmentPrecision=mi.apple.device?Vr.HIGH:Vr.MEDIUM;let Yn=y0,RD=0;class wn{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=RD++,this.static=!!r,this.ubo=!!n,e instanceof it?(this.buffer=e,this.buffer.type=qn.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new it(new Float32Array(1)),this.buffer.type=qn.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new wn(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new wn(e,r,n)}static uboFrom(e,r){return new wn(e,r??!0,!0)}}class En{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof wn?this.uniformGroup=r:this.uniformGroup=new wn(r):this.uniformGroup=new wn({}),this.disposeRunner=new xn("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const i=Yn.from(e,r);return new En(i,n)}}class MD{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=wn.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Yn(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new We,default:this.defaultGroupCache[e]};return new En(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class v0{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function kD(){return!mi.apple.device}function ND(t){let e=!0;const r=oe.ADAPTER.getNavigator();if(mi.tablet||mi.phone){if(mi.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(mi.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class ku{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var DD=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FD=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Sl=class on extends ku{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=yT,this.vertexSize=6,this.state=ri.for2d(),this.size=on.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??ND(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??kD(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ie("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return FD}static get defaultFragmentTemplate(){return DD}setShaderGenerator({vertex:e=on.defaultVertexSrc,fragment:r=on.defaultFragmentTemplate}={}){this.shaderGenerator=new MD(e,r)}contextChange(){const e=this.renderer.gl;oe.PREFER_ENV===co.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),on.defaultMaxTextures),this.maxTextures=uD(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=on,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new p0);for(;r.length<i;)r.push(new v0);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,n=on._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let l=++Se._globalBatch,h=0,c=n[0],f=0;i.copyBoundTextures(s,r);for(let p=0;p<this._bufferSize;++p){const m=e[p];e[p]=null,m._batchEnabled!==l&&(c.count>=r&&(i.boundArray(c,s,l,r),this.buildDrawCalls(c,f,p),f=p,c=n[++h],++l),m._batchEnabled=l,m.touched=o,c.elements[c.count++]=m)}c.count>0&&(i.boundArray(c,s,l,r),this.buildDrawCalls(c,f,this._bufferSize),++h,++l);for(let p=0;p<s.length;p++)s[p]=null;Se._globalBatch=l}buildDrawCalls(e,r,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:l}=this,h=on._drawCallPool;let c=this._dcIndex,f=this._aIndex,p=this._iIndex,m=h[c];m.start=this._iIndex,m.texArray=e;for(let y=r;y<n;++y){const _=i[y],E=_._texture.baseTexture,T=dT[E.alphaMode?1:0][_.blendMode];i[y]=null,r<y&&m.blend!==T&&(m.size=p-m.start,r=y,m=h[++c],m.texArray=e,m.start=p),this.packInterleavedGeometry(_,s,o,f,p),f+=_.vertexData.length/2*l,p+=_.indices.length,m.blend=T}r<n&&(m.size=p-m.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=p}bindAndClearTexArray(e){const r=this.renderer.texture;for(let n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:n}=this;on.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:n}=this.renderer,i=on._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:l,type:h,size:c,start:f,blend:p}=i[o];s!==l&&(s=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),r.drawElements(h,c,r.UNSIGNED_SHORT,f*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),on.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=gd(Math.ceil(e/8)),n=aw(r),i=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new c0(i*this.vertexSize*4)),s}getIndexBuffer(e){const r=gd(Math.ceil(e/12)),n=aw(r),i=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,r,n,i,s){const{uint32View:o,float32View:l}=r,h=i/this.vertexSize,c=e.uvs,f=e.indices,p=e.vertexData,m=e._texture.baseTexture._batchLocation,y=Math.min(e.worldAlpha,1),_=je.shared.setValue(e._tintRGB).toPremultiplied(y,e._texture.baseTexture.alphaMode>0);for(let E=0;E<p.length;E+=2)l[i++]=p[E],l[i++]=p[E+1],l[i++]=c[E],l[i++]=c[E+1],o[i++]=_,l[i++]=m;for(let E=0;E<f.length;E++)n[s++]=h+f[E]}};Sl.defaultBatchSize=4096,Sl.extension={name:"batch",type:te.RendererPlugin},Sl._drawCallPool=[],Sl._textureArrayPool=[];let Gs=Sl;ce.add(Gs);var OD=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,BD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _0=class Tl extends En{constructor(e,r,n){const i=Yn.from(e||Tl.defaultVertexSrc,r||Tl.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=Tl.defaultResolution,this.multisample=Tl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ri}apply(e,r,n,i,s){e.applyFilter(this,r,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return BD}static get defaultFragmentSrc(){return OD}};_0.defaultResolution=1,_0.defaultMultisample=yt.NONE;let nr=_0;class _d{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new je(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=e,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}_d.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},_d.extension={type:[te.RendererSystem,te.CanvasRendererSystem],name:"background"};ce.add(_d);class bT{constructor(e){this.renderer=e,this.emptyRenderer=new ku(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,r,n,i){const{elements:s,ids:o,count:l}=e;let h=0;for(let c=0;c<l;c++){const f=s[c],p=f._batchLocation;if(p>=0&&p<i&&r[p]===f){o[c]=p;continue}for(;h<i;){const m=r[h];if(m&&m._batchEnabled===n&&m._batchLocation===h){h++;continue}o[c]=h,f._batchLocation=h,r[h]=f;break}}}destroy(){this.renderer=null}}bT.extension={type:te.RendererSystem,name:"batch"};ce.add(bT);let vw=0;class xd{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=vw++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=vw++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(oe.PREFER_ENV>=co.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}xd.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},xd.extension={type:te.RendererSystem,name:"context"};ce.add(xd);class x0{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new xn("disposeFramebuffer"),this.multisample=yt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new Se(null,{scaleMode:dn.NEAREST,resolution:1,mipmap:Zn.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Se(null,{scaleMode:dn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Zn.OFF,format:J.DEPTH_COMPONENT,type:ge.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class ST extends Se{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:r,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=yt.NONE),super(null,e),this.mipmap=Zn.OFF,this.valid=!0,this._clear=new je([0,0,0,0]),this.framebuffer=new x0(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ti extends yu{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,i=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=oD(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,i){const s=e.gl,o=r.realWidth,l=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===fr.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=l,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class TT extends Ti{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;Ti.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??oe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===fr.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const l=s[o];if(l!==n&&l.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class tv{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const i=r.width,s=r.height;if(n){const o=e.width/2/i,l=e.height/2/s,h=e.x/i+o,c=e.y/s+l;n=Ne.add(n,Ne.NW),this.x0=h+o*Ne.uX(n),this.y0=c+l*Ne.uY(n),n=Ne.add(n,2),this.x1=h+o*Ne.uX(n),this.y1=c+l*Ne.uY(n),n=Ne.add(n,2),this.x2=h+o*Ne.uX(n),this.y2=c+l*Ne.uY(n),n=Ne.add(n,2),this.x3=h+o*Ne.uX(n),this.y3=c+l*Ne.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}tv.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const _w=new tv;function Jh(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class ie extends Iu{constructor(e,r,n,i,s,o,l){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new we(0,0,1,1)),e instanceof ie&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=_w,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Ee(o.x,o.y):new Ee(0,0),this.defaultBorders=l,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&Un[r.url]&&ie.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ie.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new ie(this.baseTexture,!this.noFrame&&e,r,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===_w&&(this._uvs=new tv),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=oe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Se){if(!e.cacheId){const l=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${l}-${ao()}`,Se.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const l=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${l}_${ao()}`}s=e._pixiId}let o=Un[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Se)?(r.resolution||(r.resolution=bi(e)),o=new ie(new Se(e,r)),o.baseTexture.cacheId=s,Se.addToCache(o.baseTexture,s),ie.addToCache(o,s)):!o&&e instanceof Se&&(o=new ie(e),ie.addToCache(o,s)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),i=ie.from(e,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,r,n,i){return new ie(Se.fromBuffer(e,r,n,i))}static fromLoader(e,r,n,i){const s=new Se(e,Object.assign({scaleMode:Se.defaultOptions.scaleMode,resolution:bi(r)},i)),{resource:o}=s;o instanceof TT&&(o.url=r);const l=new ie(s);return n||(n=r),Se.addToCache(l.baseTexture,n),ie.addToCache(l,n),n!==r&&(Se.addToCache(l.baseTexture,r),ie.addToCache(l,r)),l.baseTexture.valid?Promise.resolve(l):new Promise(h=>{l.baseTexture.once("loaded",()=>h(l))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Un[r]&&Un[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Un[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Un[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Un[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)Un[e.textureCacheIds[r]]===e&&delete Un[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=e,o=r+i>this.baseTexture.width,l=n+s>this.baseTexture.height;if(o||l){const h=o&&l?"and":"or",c=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,f=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${h} ${f}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ie._EMPTY||(ie._EMPTY=new ie(new Se),Jh(ie._EMPTY),Jh(ie._EMPTY.baseTexture)),ie._EMPTY}static get WHITE(){if(!ie._WHITE){const e=oe.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),ie._WHITE=new ie(Se.from(e)),Jh(ie._WHITE),Jh(ie._WHITE.baseTexture)}return ie._WHITE}}class fo extends ie{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new fo(new ST(e))}}class AT{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=yt.NONE){const i=new ST(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new fo(i)}getOptimalTexture(e,r,n=1,i=yt.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=gd(e),r=gd(r),s=((e&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,r,n){const i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||yt.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}AT.SCREEN_KEY=-1;class LD extends Si{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class CT extends Si{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new it(this.vertices),this.uvBuffer=new it(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/e.width,this.uvs[3]=i,this.uvs[4]=n+r.width/e.width,this.uvs[5]=i+r.height/e.height,this.uvs[6]=n,this.uvs[7]=i+r.height/e.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class UD{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=yt.NONE,this.sourceFrame=new we,this.destinationFrame=new we,this.bindingSourceFrame=new we,this.bindingDestinationFrame=new we,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ec=[new Ee,new Ee,new Ee,new Ee],Cm=new We;class PT{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new AT,this.statePool=[],this.quad=new LD,this.quadUv=new CT,this.tempRect=new we,this.activeState={},this.globalUniforms=new wn({outputFrame:new we,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new UD,o=n.renderTexture;let l,h;if(o.current){const T=o.current;l=T.resolution,h=T.multisample}else l=n.resolution,h=n.multisample;let c=r[0].resolution||l,f=r[0].multisample??h,p=r[0].padding,m=r[0].autoFit,y=r[0].legacy??!0;for(let T=1;T<r.length;T++){const S=r[T];c=Math.min(c,S.resolution||l),f=Math.min(f,S.multisample??h),p=this.useMaxPadding?Math.max(p,S.padding):p+S.padding,m=m&&S.autoFit,y=y||(S.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=f,s.legacy=y,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(p);const _=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Cm.copyFrom(n.projection.transform).invert(),_),m?(s.sourceFrame.fit(_),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(_)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,f),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const E=this.tempRect;E.x=0,E.y=0,E.width=s.sourceFrame.width,E.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,E),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,l=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],l[0]=.5*o[2],l[1]=.5*o[3],l[2]=r.sourceFrame.width*s[2]-.5*o[2],l[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const c=i.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const h=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,h.renderTexture,Wn.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let c=r.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,r.resolution);f.filterFrame=c.filterFrame;let p=0;for(p=0;p<n.length-1;++p){p===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,r.resolution),f.filterFrame=c.filterFrame),n[p].apply(this,c,f,Wn.CLEAR,r);const m=c;c=f,f=m}n[p].apply(this,c,h.renderTexture,Wn.BLEND,r),p>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=Wn.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===Wn.CLEAR||r===Wn.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Wr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Wr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),l=r.worldTransform.copyTo(We.TEMP_MATRIX);return l.invert(),o.prepend(l),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,i=yt.NONE){return this.texturePool.getOptimalTexture(e,r,n,i)}getFilterTexture(e,r,n){if(typeof e=="number"){const s=e;e=r,r=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||yt.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=ec[0],i=ec[1],s=ec[2],o=ec[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const l=Math.min(n.x,i.x,s.x,o.x),h=Math.min(n.y,i.y,s.y,o.y),c=Math.max(n.x,i.x,s.x,o.x),f=Math.max(n.y,i.y,s.y,o.y);r.x=l,r.y=h,r.width=c-l,r.height=f-h}roundFrame(e,r,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:l,c:h,d:c}=s;if((Math.abs(l)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?Cm.copyFrom(s):Cm.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}}}PT.extension={type:te.RendererSystem,name:"filter"};ce.add(PT);class zD{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=yt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const GD=new we;class IT{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new x0(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new we,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;oe.PREFER_ENV===co.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const l=e.colorTextures[o];this.renderer.texture.unbind(l.parentTextureArray||l)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,l=r.height>>n,h=o/r.width;this.setViewport(r.x*h,r.y*h,o,l)}else{const o=e.width>>n,l=e.height>>n;this.setViewport(0,0,o,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,i){const s=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=n,s.height=i,this.gl.viewport(e,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,i,s=Xg.COLOR|Xg.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,i),o.clear(s)}initFramebuffer(e){const{gl:r}=this,n=new zD(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const l=i[o],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const l=[];for(let h=0;h<o;h++){const c=s[h],f=c.parentTextureArray||c;this.renderer.texture.bind(f,0),h===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+h,c.target,f._glTextures[this.CONTEXT_UID].texture,r),l.push(n.COLOR_ATTACHMENT0+h))}if(l.length>1&&n.drawBuffers(l),e.depthTexture&&this.writeDepthTexture){const h=e.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let h,c;this.renderer.context.webGLVersion===1?(h=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH_STENCIL):e.depth&&e.stencil?(h=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH24_STENCIL8):e.depth?(h=n.DEPTH_ATTACHMENT,c=n.DEPTH_COMPONENT24):(h=n.STENCIL_ATTACHMENT,c=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,c,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,h,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=yt.NONE;if(e<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=yt.NONE),n}blit(e,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:l}=this;if(s.context.webGLVersion!==2||!i)return;const h=i.glFramebuffers[l];if(!h)return;if(!e){if(!h.msaaBuffer)return;const f=i.colorTextures[0];if(!f)return;h.blitFramebuffer||(h.blitFramebuffer=new x0(i.width,i.height),h.blitFramebuffer.addColorTexture(0,f)),e=h.blitFramebuffer,e.colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}r||(r=GD,r.width=i.width,r.height=i.height),n||(n=r);const c=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=r.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let l,h;this.renderer.context.webGLVersion===1?(l=s.DEPTH_STENCIL_ATTACHMENT,h=s.DEPTH_STENCIL):e.depth?(l=s.DEPTH_STENCIL_ATTACHMENT,h=s.DEPTH24_STENCIL8):(l=s.STENCIL_ATTACHMENT,h=s.STENCIL_INDEX8),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,h,n,i):s.renderbufferStorage(s.RENDERBUFFER,h,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,l,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new we}destroy(){this.renderer=null}}IT.extension={type:te.RendererSystem,name:"framebuffer"};ce.add(IT);const Pm={5126:4,5123:2,5121:1};class RT{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;oe.PREFER_ENV===co.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,l,h)=>n.drawElementsInstancedANGLE(i,s,o,l,h),e.drawArraysInstanced=(i,s,o,l)=>n.drawArraysInstancedANGLE(i,s,o,l)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];r.update(i)}}checkCompatibility(e,r){const n=e.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const n=e.attributes,i=r.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,l=r.program;l.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,l);const h=this.getSignature(e,l),c=e.glVertexArrayObjects[this.CONTEXT_UID];let f=c[h];if(f)return c[l.id]=f,f;const p=e.buffers,m=e.attributes,y={},_={};for(const E in p)y[E]=0,_[E]=0;for(const E in m)!m[E].size&&l.attributeData[E]?m[E].size=l.attributeData[E].size:m[E].size||console.warn(`PIXI Geometry attribute '${E}' size cannot be determined (likely the bound shader does not have the attribute)`),y[m[E].buffer]+=m[E].size*Pm[m[E].type];for(const E in m){const T=m[E],S=T.size;T.stride===void 0&&(y[T.buffer]===S*Pm[T.type]?T.stride=0:T.stride=y[T.buffer]),T.start===void 0&&(T.start=_[T.buffer],_[T.buffer]+=S*Pm[T.type])}f=i.createVertexArray(),i.bindVertexArray(f);for(let E=0;E<p.length;E++){const T=p[E];o.bind(T),n&&T._glBuffers[s].refCount++}return this.activateVao(e,l),c[l.id]=f,c[h]=f,i.bindVertexArray(null),o.unbind(qn.ARRAY_BUFFER),f}disposeGeometry(e,r){var l;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(l=this.renderer)==null?void 0:l.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let h=0;h<s.length;h++){const c=s[h]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!r&&o.dispose(s[h],r))}if(!r){for(const h in n)if(h[0]==="g"){const c=n[h];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,l=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let h=null;for(const c in l){const f=l[c],p=o[f.buffer],m=p._glBuffers[i];if(r.attributeData[c]){h!==m&&(s.bind(p),h=m);const y=r.attributeData[c].location;if(n.enableVertexAttribArray(y),n.vertexAttribPointer(y,f.size,f.type||n.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)n.vertexAttribDivisor(y,f.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const l=o.indexBuffer.data.BYTES_PER_ELEMENT,h=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,r||o.indexBuffer.data.length,h,(n||0)*l,i||1):s.drawElements(e,r||o.indexBuffer.data.length,h,(n||0)*l):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,r||o.getSize(),i||1):s.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}RT.extension={type:te.RendererSystem,name:"geometry"};ce.add(RT);const xw=new We;class rv{constructor(e,r){this._texture=e,this.mapCoord=new We,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(xw.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(xw));const o=r.baseTexture,l=this.uClampFrame,h=this.clampMargin/o.resolution,c=this.clampOffset;return l[0]=(r._frame.x+h+c)/o.width,l[1]=(r._frame.y+h+c)/o.height,l[2]=(r._frame.x+r._frame.width-h+c)/o.width,l[3]=(r._frame.y+r._frame.height-h+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var HD=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,$D=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class jD extends nr{constructor(e,r,n){let i=null;typeof e!="string"&&r===void 0&&n===void 0&&(i=e,e=void 0,r=void 0,n=void 0),super(e||$D,r||HD,n),this.maskSprite=i,this.maskMatrix=new We}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new rv(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,i))}}class WD{constructor(e=null){this.type=wt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=nr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=wt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MT{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new WD;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==wt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case wt.SCISSOR:this.renderer.scissor.push(n);break;case wt.STENCIL:this.renderer.stencil.push(n);break;case wt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case wt.COLOR:this.pushColorMask(n);break}n.type===wt.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case wt.SCISSOR:this.renderer.scissor.pop(r);break;case wt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case wt.SPRITE:this.popSpriteMask(r);break;case wt.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===wt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=wt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=wt.SCISSOR:e.type=wt.STENCIL:e.type=wt.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new jD])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=r;const s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}MT.extension={type:te.RendererSystem,name:"mask"};ce.add(MT);class kT{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const ww=new We,Ew=[],NT=class kc extends kT{constructor(e){super(e),this.glConst=oe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,Ew.pop()??new we);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||kc.isMatrixRotated(r.worldTransform)||kc.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,r,n,i,s){kc.isMatrixRotated(s)||(s=s?ww.copyFrom(s):ww.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&Ew.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};NT.extension={type:te.RendererSystem,name:"scissor"};let VD=NT;ce.add(VD);class DT extends kT{constructor(e){super(e),this.glConst=oe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}DT.extension={type:te.RendererSystem,name:"stencil"};ce.add(DT);class FT{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ie("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ie("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ie("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}FT.extension={type:[te.RendererSystem,te.CanvasRendererSystem],name:"_plugin"};ce.add(FT);class OT{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new We,this.transform=null}update(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(e){}destroy(){this.renderer=null}}OT.extension={type:te.RendererSystem,name:"projection"};ce.add(OT);const XD=new sf,bw=new we;class BT{constructor(e){this.renderer=e,this._tempMatrix=new We}generateTexture(e,r){const{region:n,...i}=r||{},s=(n==null?void 0:n.copyTo(bw))||e.getLocalBounds(bw,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const l=fo.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const h=e.transform;return e.transform=XD,this.renderer.render(e,{renderTexture:l,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=h,l}destroy(){}}BT.extension={type:[te.RendererSystem,te.CanvasRendererSystem],name:"textureGenerator"};ce.add(BT);const ks=new we,yl=new we;class LT{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new we,this.destinationFrame=new we,this.viewportFrame=new we}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const i=this.renderer;this.current=e;let s,o,l;e?(s=e.baseTexture,l=s.resolution,r||(ks.width=e.frame.width,ks.height=e.frame.height,r=ks),n||(yl.x=e.frame.x,yl.y=e.frame.y,yl.width=r.width,yl.height=r.height,n=yl),o=s.framebuffer):(l=i.resolution,r||(ks.width=i._view.screen.width,ks.height=i._view.screen.height,r=ks),n||(n=ks,n.width=r.width,n.height=r.height));const h=this.viewportFrame;h.x=n.x*l,h.y=n.y*l,h.width=n.width*l,h.height=n.height*l,e||(h.y=i.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(n,r,l,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=je.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,l=s.width!==o.width||s.height!==o.height;if(l){let{x:h,y:c,width:f,height:p}=this.viewportFrame;h=Math.round(h),c=Math.round(c),f=Math.round(f),p=Math.round(p),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,c,f,p)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),l&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}LT.extension={type:te.RendererSystem,name:"renderTexture"};ce.add(LT);class YD{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function QD(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=ET(e,s.type),l={type:o,name:s.name,size:wT(o),location:e.getAttribLocation(t,s.name)};r[s.name]=l}return r}function KD(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),l=!!s.name.match(/\[.*?\]$/),h=ET(e,s.type);r[o]={name:o,index:i,type:h,size:s.size,isArray:l,value:_T(h,s.size)}}return r}function qD(t,e){var l;const r=pw(t,t.VERTEX_SHADER,e.vertexSrc),n=pw(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=(l=e.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||AD(t,i,r,n),e.attributeData=QD(i,t),e.uniformData=KD(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const h=Object.keys(e.attributeData);h.sort((c,f)=>c>f?1:-1);for(let c=0;c<h.length;c++)e.attributeData[h[c]].location=c,t.bindAttribLocation(i,c,h[c]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const h in e.uniformData){const c=e.uniformData[h];o[h]={location:t.getUniformLocation(i,h),value:_T(c.type,c.size)}}return new YD(i,o)}function ZD(t,e,r,n,i){r.buffer.update(i)}const JD={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},UT={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function e3(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(r=UT[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const l=n%r%16;n+=l,i+=l}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function t3(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,i)=>n.index-i.index),r}function r3(t,e){if(!t.autoManage)return{size:0,syncFunc:ZD};const r=t3(t.uniforms,e),{uboElements:n,size:i}=e3(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const l=n[o],h=t.uniforms[l.data.name],c=l.data.name;let f=!1;for(let p=0;p<ma.length;p++){const m=ma[p];if(m.codeUbo&&m.test(l.data,h)){s.push(`offset = ${l.offset/4};`,ma[p].codeUbo(l.data.name,h)),f=!0;break}}if(!f)if(l.data.size>1){const p=wT(l.data.type),m=Math.max(UT[l.data.type]/16,1),y=p/m,_=(4-y%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};

                t = 0;

                for(var i=0; i < ${l.data.size*m}; i++)
                {
                    for(var j = 0; j < ${y}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${_};
                }

                `)}else{const p=JD[l.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};
                ${p};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let n3=0;const tc={textureCount:0,uboCount:0};class zT{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=n3++}systemCheck(){if(!PD())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(tc.textureCount=0,tc.uboCount=0,this.syncUniformGroup(e.uniformGroup,tc)),i}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=bD(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,tc,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let l=this._uboCache[o];if(l||(l=this._uboCache[o]=r3(e,this.shader.program.uniformData)),e.autoManage){const h=new Float32Array(l.size/4);e.buffer.update(h)}return r.uniformGroups[e.id]=l.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,i=qD(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}zT.extension={type:te.RendererSystem,name:"shader"};ce.add(zT);class wd{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.2 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}wd.defaultOptions={hello:!1},wd.extension={type:[te.RendererSystem,te.CanvasRendererSystem],name:"startup"};ce.add(wd);function i3(t,e=[]){return e[_e.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.ADD]=[t.ONE,t.ONE],e[_e.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.NONE]=[0,0],e[_e.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[_e.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[_e.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[_e.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[_e.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[_e.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[_e.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[_e.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[_e.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[_e.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[_e.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const s3=0,o3=1,a3=2,l3=3,u3=4,h3=5,GT=class w0{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=_e.NONE,this._blendEq=!1,this.map=[],this.map[s3]=this.setBlend,this.map[o3]=this.setOffset,this.map[a3]=this.setCullFace,this.map[l3]=this.setDepthTest,this.map[u3]=this.setFrontFace,this.map[h3]=this.setDepthMask,this.checks=[],this.defaultState=new ri,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=i3(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(w0.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(w0.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};GT.extension={type:te.RendererSystem,name:"state"};let c3=GT;ce.add(c3);class d3 extends Iu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(i=>e.systems[i]),n=[...r,...Object.keys(e.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(r=>{this.runners[r]=new xn(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](r[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Al=class Nc{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Nc.defaultMaxIdle,this.checkCountMax=Nc.defaultCheckCountMax,this.mode=Nc.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Vy.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let n=!1;for(let i=0;i<r.length;i++){const s=r[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<r.length;s++)r[s]!==null&&(r[i++]=r[s]);r.length=i}}unload(e){const r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Al.defaultMode=Vy.AUTO,Al.defaultMaxIdle=60*60,Al.defaultCheckCountMax=60*10,Al.extension={type:te.RendererSystem,name:"textureGC"};let Hs=Al;ce.add(Hs);class Im{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ge.UNSIGNED_BYTE,this.internalFormat=J.RGBA,this.samplerType=0}}function f3(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:ae.FLOAT,[t.RGBA]:ae.FLOAT,[t.ALPHA]:ae.FLOAT,[t.LUMINANCE]:ae.FLOAT,[t.LUMINANCE_ALPHA]:ae.FLOAT,[t.R8]:ae.FLOAT,[t.R8_SNORM]:ae.FLOAT,[t.RG8]:ae.FLOAT,[t.RG8_SNORM]:ae.FLOAT,[t.RGB8]:ae.FLOAT,[t.RGB8_SNORM]:ae.FLOAT,[t.RGB565]:ae.FLOAT,[t.RGBA4]:ae.FLOAT,[t.RGB5_A1]:ae.FLOAT,[t.RGBA8]:ae.FLOAT,[t.RGBA8_SNORM]:ae.FLOAT,[t.RGB10_A2]:ae.FLOAT,[t.RGB10_A2UI]:ae.FLOAT,[t.SRGB8]:ae.FLOAT,[t.SRGB8_ALPHA8]:ae.FLOAT,[t.R16F]:ae.FLOAT,[t.RG16F]:ae.FLOAT,[t.RGB16F]:ae.FLOAT,[t.RGBA16F]:ae.FLOAT,[t.R32F]:ae.FLOAT,[t.RG32F]:ae.FLOAT,[t.RGB32F]:ae.FLOAT,[t.RGBA32F]:ae.FLOAT,[t.R11F_G11F_B10F]:ae.FLOAT,[t.RGB9_E5]:ae.FLOAT,[t.R8I]:ae.INT,[t.R8UI]:ae.UINT,[t.R16I]:ae.INT,[t.R16UI]:ae.UINT,[t.R32I]:ae.INT,[t.R32UI]:ae.UINT,[t.RG8I]:ae.INT,[t.RG8UI]:ae.UINT,[t.RG16I]:ae.INT,[t.RG16UI]:ae.UINT,[t.RG32I]:ae.INT,[t.RG32UI]:ae.UINT,[t.RGB8I]:ae.INT,[t.RGB8UI]:ae.UINT,[t.RGB16I]:ae.INT,[t.RGB16UI]:ae.UINT,[t.RGB32I]:ae.INT,[t.RGB32UI]:ae.UINT,[t.RGBA8I]:ae.INT,[t.RGBA8UI]:ae.UINT,[t.RGBA16I]:ae.INT,[t.RGBA16UI]:ae.UINT,[t.RGBA32I]:ae.INT,[t.RGBA32UI]:ae.UINT,[t.DEPTH_COMPONENT16]:ae.FLOAT,[t.DEPTH_COMPONENT24]:ae.FLOAT,[t.DEPTH_COMPONENT32F]:ae.FLOAT,[t.DEPTH_STENCIL]:ae.FLOAT,[t.DEPTH24_STENCIL8]:ae.FLOAT,[t.DEPTH32F_STENCIL8]:ae.FLOAT}:e={[t.RGB]:ae.FLOAT,[t.RGBA]:ae.FLOAT,[t.ALPHA]:ae.FLOAT,[t.LUMINANCE]:ae.FLOAT,[t.LUMINANCE_ALPHA]:ae.FLOAT,[t.DEPTH_STENCIL]:ae.FLOAT},e}function p3(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[ge.UNSIGNED_BYTE]:{[J.RGBA]:t.RGBA8,[J.RGB]:t.RGB8,[J.RG]:t.RG8,[J.RED]:t.R8,[J.RGBA_INTEGER]:t.RGBA8UI,[J.RGB_INTEGER]:t.RGB8UI,[J.RG_INTEGER]:t.RG8UI,[J.RED_INTEGER]:t.R8UI,[J.ALPHA]:t.ALPHA,[J.LUMINANCE]:t.LUMINANCE,[J.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ge.BYTE]:{[J.RGBA]:t.RGBA8_SNORM,[J.RGB]:t.RGB8_SNORM,[J.RG]:t.RG8_SNORM,[J.RED]:t.R8_SNORM,[J.RGBA_INTEGER]:t.RGBA8I,[J.RGB_INTEGER]:t.RGB8I,[J.RG_INTEGER]:t.RG8I,[J.RED_INTEGER]:t.R8I},[ge.UNSIGNED_SHORT]:{[J.RGBA_INTEGER]:t.RGBA16UI,[J.RGB_INTEGER]:t.RGB16UI,[J.RG_INTEGER]:t.RG16UI,[J.RED_INTEGER]:t.R16UI,[J.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[ge.SHORT]:{[J.RGBA_INTEGER]:t.RGBA16I,[J.RGB_INTEGER]:t.RGB16I,[J.RG_INTEGER]:t.RG16I,[J.RED_INTEGER]:t.R16I},[ge.UNSIGNED_INT]:{[J.RGBA_INTEGER]:t.RGBA32UI,[J.RGB_INTEGER]:t.RGB32UI,[J.RG_INTEGER]:t.RG32UI,[J.RED_INTEGER]:t.R32UI,[J.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[ge.INT]:{[J.RGBA_INTEGER]:t.RGBA32I,[J.RGB_INTEGER]:t.RGB32I,[J.RG_INTEGER]:t.RG32I,[J.RED_INTEGER]:t.R32I},[ge.FLOAT]:{[J.RGBA]:t.RGBA32F,[J.RGB]:t.RGB32F,[J.RG]:t.RG32F,[J.RED]:t.R32F,[J.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[ge.HALF_FLOAT]:{[J.RGBA]:t.RGBA16F,[J.RGB]:t.RGB16F,[J.RG]:t.RG16F,[J.RED]:t.R16F},[ge.UNSIGNED_SHORT_5_6_5]:{[J.RGB]:t.RGB565},[ge.UNSIGNED_SHORT_4_4_4_4]:{[J.RGBA]:t.RGBA4},[ge.UNSIGNED_SHORT_5_5_5_1]:{[J.RGBA]:t.RGB5_A1},[ge.UNSIGNED_INT_2_10_10_10_REV]:{[J.RGBA]:t.RGB10_A2,[J.RGBA_INTEGER]:t.RGB10_A2UI},[ge.UNSIGNED_INT_10F_11F_11F_REV]:{[J.RGB]:t.R11F_G11F_B10F},[ge.UNSIGNED_INT_5_9_9_9_REV]:{[J.RGB]:t.RGB9_E5},[ge.UNSIGNED_INT_24_8]:{[J.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[ge.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[J.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[ge.UNSIGNED_BYTE]:{[J.RGBA]:t.RGBA,[J.RGB]:t.RGB,[J.ALPHA]:t.ALPHA,[J.LUMINANCE]:t.LUMINANCE,[J.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ge.UNSIGNED_SHORT_5_6_5]:{[J.RGB]:t.RGB},[ge.UNSIGNED_SHORT_4_4_4_4]:{[J.RGBA]:t.RGBA},[ge.UNSIGNED_SHORT_5_5_5_1]:{[J.RGBA]:t.RGBA}},e}class HT{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Se,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=p3(e),this.samplerTypes=f3(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Im(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Im(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==ae.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new Im(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??ae.FLOAT,this.webGLVersion===2&&e.type===ge.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var i;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(i=e.resource)==null?void 0:i.upload(n,e,r))r.samplerType!==ae.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,l=n.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,l.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(e);i!==-1&&pa(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Zn.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=yi.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==Zn.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===dn.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===dn.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===dn.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===dn.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}HT.extension={type:te.RendererSystem,name:"texture"};ce.add(HT);class $T{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();e._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const l=e.buffers[o];l&&(n.buffer.update(l),l._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,l._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const l=e.buffers[o];if(!l)continue;const h=l._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&s.dispose(l,r))}n&&(r||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}$T.extension={type:te.RendererSystem,name:"transformFeedback"};ce.add($T);class Ed{constructor(e){this.renderer=e}init(e){this.screen=new we(0,0,e.width,e.height),this.element=e.view||oe.ADAPTER.createCanvas(),this.resolution=e.resolution||oe.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Ed.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Ed.extension={type:[te.RendererSystem,te.CanvasRendererSystem],name:"_view"};ce.add(Ed);oe.PREFER_ENV=co.WEBGL2;oe.STRICT_TEXTURE_CACHE=!1;oe.RENDER_OPTIONS={...xd.defaultOptions,..._d.defaultOptions,...Ed.defaultOptions,...wd.defaultOptions};Object.defineProperties(oe,{WRAP_MODE:{get(){return Se.defaultOptions.wrapMode},set(t){Ie("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Se.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Se.defaultOptions.scaleMode},set(t){Ie("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Se.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Se.defaultOptions.mipmap},set(t){Ie("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Se.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Se.defaultOptions.anisotropicLevel},set(t){Ie("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Se.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return Ie("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),nr.defaultResolution},set(t){nr.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return Ie("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),nr.defaultMultisample},set(t){nr.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Gs.defaultMaxTextures},set(t){Ie("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Gs.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Gs.defaultBatchSize},set(t){Ie("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Gs.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Gs.canUploadSameBuffer},set(t){Ie("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Gs.canUploadSameBuffer=t}},GC_MODE:{get(){return Hs.defaultMode},set(t){Ie("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Hs.defaultMode=t}},GC_MAX_IDLE:{get(){return Hs.defaultMaxIdle},set(t){Ie("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Hs.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Hs.defaultCheckCountMax},set(t){Ie("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Hs.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Yn.defaultVertexPrecision},set(t){Ie("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Yn.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Yn.defaultFragmentPrecision},set(t){Ie("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Yn.defaultFragmentPrecision=t}}});var Jn=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Jn||{});class Rm{constructor(e,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const jT=class Er{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Rm(null,null,1/0),this.deltaMS=1/Er.targetFPMS,this.elapsedMS=1/Er.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=Jn.NORMAL){return this._addListener(new Rm(e,r,n))}addOnce(e,r,n=Jn.NORMAL){return this._addListener(new Rm(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Er.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,Er.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!Er._shared){const e=Er._shared=new Er;e.autoStart=!0,e._protected=!0}return Er._shared}static get system(){if(!Er._system){const e=Er._system=new Er;e.autoStart=!0,e._protected=!0}return Er._system}};jT.targetFPMS=.06;let kt=jT;Object.defineProperties(oe,{TARGET_FPMS:{get(){return kt.targetFPMS},set(t){Ie("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),kt.targetFPMS=t}}});class WT{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Jn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?kt.shared:new kt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}WT.extension=te.Application;ce.add(WT);const VT=[];ce.handleByList(te.Renderer,VT);function m3(t){for(const e of VT)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var g3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,y3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const v3=g3,XT=y3;class YT{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=yt.HIGH?this.multisample=yt.HIGH:r>=yt.MEDIUM?this.multisample=yt.MEDIUM:r>=yt.LOW?this.multisample=yt.LOW:this.multisample=yt.NONE}destroy(){}}YT.extension={type:te.RendererSystem,name:"_multisample"};ce.add(YT);class _3{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class QT{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(e,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,r.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new _3(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}QT.extension={type:te.RendererSystem,name:"buffer"};ce.add(QT);class KT{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let i,s,o,l;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,l=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!l){const h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}KT.extension={type:te.RendererSystem,name:"objectRenderer"};ce.add(KT);const Dc=class E0 extends d3{constructor(e){super(),this.type=LS.WEBGL,e=Object.assign({},oe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new wn({projectionMatrix:new We},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:E0.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(Ie("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=E0.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:$N()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ie("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ie("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ie("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ie("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ie("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ie("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ie("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ie("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};Dc.extension={type:te.Renderer,priority:1},Dc.__plugins={},Dc.__systems={};let nv=Dc;ce.handleByMap(te.RendererPlugin,nv.__plugins);ce.handleByMap(te.RendererSystem,nv.__systems);ce.add(nv);class qT extends yu{constructor(e,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Se;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof yu?this.addResourceAt(e[n],n):this.addResourceAt(gT(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class x3 extends qT{constructor(e,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ca.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:l}=e;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let h=0;h<i;h++){const c=o[h];s[h]<c.dirtyId&&(s[h]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,r.format,n.type,c.resource.source))}return!0}}class w3 extends Ti{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ZT=class Cl extends qT{constructor(e,r){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=r||{};if(e&&e.length!==Cl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let l=0;l<Cl.SIDES;l++)this.items[l].target=ca.TEXTURE_CUBE_MAP_POSITIVE_X+l;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),s!==!1&&this.load()}bind(e){super.bind(e),e.target=ca.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ca.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,n){const i=this.itemDirtyIds;for(let s=0;s<Cl.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Cl.SIDES}};ZT.SIDES=6;let E3=ZT;class na extends Ti{constructor(e,r){r=r||{};let n,i,s;typeof e=="string"?(n=na.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??s,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await oe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===fr.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return na._EMPTY=na._EMPTY??oe.ADAPTER.createCanvas(0,0),na._EMPTY}}const b0=class Fc extends Ti{constructor(e,r){r=r||{},super(oe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Fc.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Ti.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=r*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*r,s=this._overrideHeight||this._overrideWidth/r*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${ao()}`,o.getContext("2d").drawImage(e,0,0,r,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const r=Fc.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Fc.SVG_XML.test(e)}};b0.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,b0.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let S0=b0;class b3 extends Ti{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const T0=class A0 extends Ti{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Ti.crossOrigin(n,i,r.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:l,mime:h}=e[s];if(l=l||e[s],l.startsWith("data:"))h=l.slice(5,l.indexOf(";"));else if(!l.startsWith("blob:")){const c=l.split("?").shift().toLowerCase(),f=c.slice(c.lastIndexOf(".")+1);h=h||A0.MIME_TYPES[f]||`video/${f}`}o.src=l,h&&(o.type=h),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=kt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(kt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||A0.TYPES.includes(r)}};T0.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],T0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let JT=T0;d0.push(na,TT,w3,JT,b3,S0,ef,E3,x3);class vu{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?we.EMPTY:(e=e||new we(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:i,c:s,d:o,tx:l,ty:h}=e,c=n*r.x+s*r.y+l,f=i*r.x+o*r.y+h;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(e){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],l=e[1];r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,o=e[2],l=e[3],r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,o=e[4],l=e[5],r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,o=e[6],l=e[7],r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,r,n,i,s){this.addFrameMatrix(e.worldTransform,r,n,i,s)}addFrameMatrix(e,r,n,i,s){const o=e.a,l=e.b,h=e.c,c=e.d,f=e.tx,p=e.ty;let m=this.minX,y=this.minY,_=this.maxX,E=this.maxY,T=o*r+h*n+f,S=l*r+c*n+p;m=T<m?T:m,y=S<y?S:y,_=T>_?T:_,E=S>E?S:E,T=o*i+h*n+f,S=l*i+c*n+p,m=T<m?T:m,y=S<y?S:y,_=T>_?T:_,E=S>E?S:E,T=o*r+h*s+f,S=l*r+c*s+p,m=T<m?T:m,y=S<y?S:y,_=T>_?T:_,E=S>E?S:E,T=o*i+h*s+f,S=l*i+c*s+p,m=T<m?T:m,y=S<y?S:y,_=T>_?T:_,E=S>E?S:E,this.minX=m,this.minY=y,this.maxX=_,this.maxY=E}addVertexData(e,r,n){let i=this.minX,s=this.minY,o=this.maxX,l=this.maxY;for(let h=r;h<n;h+=2){const c=e[h],f=e[h+1];i=c<i?c:i,s=f<s?f:s,o=c>o?c:o,l=f>l?f:l}this.minX=i,this.minY=s,this.maxX=o,this.maxY=l}addVertices(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)}addVerticesMatrix(e,r,n,i,s=0,o=s){const l=e.a,h=e.b,c=e.c,f=e.d,p=e.tx,m=e.ty;let y=this.minX,_=this.minY,E=this.maxX,T=this.maxY;for(let S=n;S<i;S+=2){const b=r[S],x=r[S+1],A=l*b+c*x+p,P=f*x+h*b+m;y=Math.min(y,A-s),E=Math.max(E,A+s),_=Math.min(_,P-o),T=Math.max(T,P+o)}this.minX=y,this.minY=_,this.maxX=E,this.maxY=T}addBounds(e){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=s&&i<=o){const l=this.minX,h=this.minY,c=this.maxX,f=this.maxY;this.minX=n<l?n:l,this.minY=i<h?i:h,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=s&&i<=o){const l=this.minX,h=this.minY,c=this.maxX,f=this.maxY;this.minX=n<l?n:l,this.minY=i<h?i:h,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,i,s,o){e-=s,r-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class tt extends Iu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new sf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new vu,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(tt.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new we),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new we),e=this._localBoundsRect),this._localBounds||(this._localBounds=new vu);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,i){return r&&(e=r.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,i=1,s=0,o=0,l=0,h=0,c=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=l,this.pivot.x=h,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new S3),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*gD}set angle(e){this.transform.rotation=e*yD}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class S3 extends tt{constructor(){super(...arguments),this.sortDirty=null}}tt.prototype.displayObjectUpdateTransform=tt.prototype.updateTransform;const T3=new We;function A3(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const eA=class C0 extends tt{constructor(){super(),this.children=[],this.sortableChildren=C0.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const n=this.getChildIndex(e),i=this.getChildIndex(r);this.children[n]=r,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);pa(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,pa(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,pa(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const n=e,i=r,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let l=0;l<o.length;++l)o[l].parent=null,o[l].transform&&(o[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let l=0;l<o.length;++l)o[l].emit("removed",this),this.emit("childRemoved",o[l],this,l);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,n=this.children.length;r<n;++r){const i=this.children[r];i._lastSortedIndex=r,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(A3),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const n=super.getLocalBounds(e);if(!r)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==C0.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=T3.copyFrom(i),i.prepend(s)):i=s),n&&r.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,l=this.children.length;o<l;++o){const h=this.children[o],c=h.cullable;h.cullable=c||!this.cullArea,h.render(e),h.cullable=c}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,l;const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let h=0;h<r.length;h++)r[h].enabled&&this._enabledFilters.push(r[h])}const i=r&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==wt.NONE));if(i&&e.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let h=0,c=this.children.length;h<c;++h)this.children[h].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),r&&((l=this._enabledFilters)!=null&&l.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(r)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};eA.defaultSortableChildren=!1;let Jt=eA;Jt.prototype.containerUpdateTransform=Jt.prototype.updateTransform;Object.defineProperties(oe,{SORTABLE_CHILDREN:{get(){return Jt.defaultSortableChildren},set(t){Ie("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Jt.defaultSortableChildren=t}}});var of=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(of||{});const vl=new Ee,C3=new Uint16Array([0,1,2,0,2,3]);let _s=class tA extends Jt{constructor(e){super(),this._anchor=new fn(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new je(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=_e.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||ie.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=C3,this.pluginName="batch",this.isSprite=!0,this._roundPixels=oe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ts(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ts(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,l=r.tx,h=r.ty,c=this.vertexData,f=e.trim,p=e.orig,m=this._anchor;let y=0,_=0,E=0,T=0;if(f?(_=f.x-m._x*p.width,y=_+f.width,T=f.y-m._y*p.height,E=T+f.height):(_=-m._x*p.width,y=_+p.width,T=-m._y*p.height,E=T+p.height),c[0]=n*_+s*T+l,c[1]=o*T+i*_+h,c[2]=n*y+s*T+l,c[3]=o*T+i*y+h,c[4]=n*y+s*E+l,c[5]=o*E+i*y+h,c[6]=n*_+s*E+l,c[7]=o*E+i*_+h,this._roundPixels){const S=oe.RESOLUTION;for(let b=0;b<c.length;++b)c[b]=Math.round(c[b]*S)/S}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,l=s.b,h=s.c,c=s.d,f=s.tx,p=s.ty,m=-i._x*n.width,y=m+n.width,_=-i._y*n.height,E=_+n.height;if(r[0]=o*m+h*_+f,r[1]=c*_+l*m+p,r[2]=o*y+h*_+f,r[3]=c*_+l*y+p,r[4]=o*y+h*E+f,r[5]=c*E+l*y+p,r[6]=o*m+h*E+f,r[7]=c*E+l*m+p,this._roundPixels){const T=oe.RESOLUTION;for(let S=0;S<r.length;++S)r[S]=Math.round(r[S]*T)/T}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new vu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new we),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,vl);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return vl.x>=i&&vl.x<i+r&&(s=-n*this.anchor.y,vl.y>=s&&vl.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const n=e instanceof ie?e:ie.from(e,r);return new tA(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=ts(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=ts(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ie.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}};const rc={willReadFrequently:!0},zn=class me{static get experimentalLetterSpacingSupported(){let e=me._experimentalLetterSpacingSupported;if(e!==void 0){const r=oe.ADAPTER.getCanvasRenderingContext2D().prototype;e=me._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,i,s,o,l,h,c){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=l,this.maxLineWidth=h,this.fontProperties=c}static measureText(e,r,n,i=me._canvas){n=n??r.wordWrap;const s=r.toFontString(),o=me.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const l=i.getContext("2d",rc);l.font=s;const h=(n?me.wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(h.length);let f=0;for(let _=0;_<h.length;_++){const E=me._measureText(h[_],r.letterSpacing,l);c[_]=E,f=Math.max(f,E)}let p=f+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);const m=r.lineHeight||o.fontSize+r.strokeThickness;let y=Math.max(m,o.fontSize+r.strokeThickness*2)+r.leading+(h.length-1)*(m+r.leading);return r.dropShadow&&(y+=r.dropShadowDistance),new me(e,r,p,y,h,c,m+r.leading,f,o)}static _measureText(e,r,n){let i=!1;me.experimentalLetterSpacingSupported&&(me.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=r:s+=(me.graphemeSegmenter(e).length-1)*r),s}static wordWrap(e,r,n=me._canvas){const i=n.getContext("2d",rc);let s=0,o="",l="";const h=Object.create(null),{letterSpacing:c,whiteSpace:f}=r,p=me.collapseSpaces(f),m=me.collapseNewlines(f);let y=!p;const _=r.wordWrapWidth+c,E=me.tokenize(e);for(let T=0;T<E.length;T++){let S=E[T];if(me.isNewline(S)){if(!m){l+=me.addLine(o),y=!p,o="",s=0;continue}S=" "}if(p){const x=me.isBreakingSpace(S),A=me.isBreakingSpace(o[o.length-1]);if(x&&A)continue}const b=me.getFromCache(S,c,h,i);if(b>_)if(o!==""&&(l+=me.addLine(o),o="",s=0),me.canBreakWords(S,r.breakWords)){const x=me.wordWrapSplit(S);for(let A=0;A<x.length;A++){let P=x[A],F=P,M=1;for(;x[A+M];){const V=x[A+M];if(!me.canBreakChars(F,V,S,A,r.breakWords))P+=V;else break;F=V,M++}A+=M-1;const N=me.getFromCache(P,c,h,i);N+s>_&&(l+=me.addLine(o),y=!1,o="",s=0),o+=P,s+=N}}else{o.length>0&&(l+=me.addLine(o),o="",s=0);const x=T===E.length-1;l+=me.addLine(S,!x),y=!1,o="",s=0}else b+s>_&&(y=!1,l+=me.addLine(o),o="",s=0),(o.length>0||!me.isBreakingSpace(S)||y)&&(o+=S,s+=b)}return l+=me.addLine(o,!1),l}static addLine(e,r=!0){return e=me.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,n,i){let s=n[e];return typeof s!="number"&&(s=me._measureText(e,r,i)+r,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!me.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:me._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:me._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(me.isBreakingSpace(s,o)||me.isNewline(s)){n!==""&&(r.push(n),n=""),r.push(s);continue}n+=s}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,i,s){return!0}static wordWrapSplit(e){return me.graphemeSegmenter(e)}static measureFont(e){if(me._fonts[e])return me._fonts[e];const r={ascent:0,descent:0,fontSize:0},n=me._canvas,i=me._context;i.font=e;const s=me.METRICS_STRING+me.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let l=Math.ceil(i.measureText(me.BASELINE_SYMBOL).width);const h=Math.ceil(me.HEIGHT_MULTIPLIER*l);if(l=l*me.BASELINE_MULTIPLIER|0,o===0||h===0)return me._fonts[e]=r,r;n.width=o,n.height=h,i.fillStyle="#f00",i.fillRect(0,0,o,h),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,l);const c=i.getImageData(0,0,o,h).data,f=c.length,p=o*4;let m=0,y=0,_=!1;for(m=0;m<l;++m){for(let E=0;E<p;E+=4)if(c[y+E]!==255){_=!0;break}if(!_)y+=p;else break}for(r.ascent=l-m,y=f-p,_=!1,m=h;m>l;--m){for(let E=0;E<p;E+=4)if(c[y+E]!==255){_=!0;break}if(!_)y-=p;else break}return r.descent=m-l,r.fontSize=r.ascent+r.descent,me._fonts[e]=r,r}static clearMetrics(e=""){e?delete me._fonts[e]:me._fonts={}}static get _canvas(){var e;if(!me.__canvas){let r;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",rc))!=null&&e.measureText)return me.__canvas=n,n;r=oe.ADAPTER.createCanvas()}catch{r=oe.ADAPTER.createCanvas()}r.width=r.height=10,me.__canvas=r}return me.__canvas}static get _context(){return me.__context||(me.__context=me._canvas.getContext("2d",rc)),me.__context}};zn.METRICS_STRING="|q",zn.BASELINE_SYMBOL="M",zn.BASELINE_MULTIPLIER=1.4,zn.HEIGHT_MULTIPLIER=2,zn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})(),zn.experimentalLetterSpacing=!1,zn._fonts={},zn._newlines=[10,13],zn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Xi=zn;const P3=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rA=class Pl{constructor(e){this.styleID=0,this.reset(),km(this,e,e)}clone(){const e={};return km(e,this,Pl.defaultStyle),new Pl(e)}reset(){km(this,Pl.defaultStyle,Pl.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=Mm(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=Mm(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){I3(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=Mm(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!P3.includes(i)&&(i=`"${i}"`),r[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}};rA.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:of.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ai=rA;function Mm(t){const e=je.shared,r=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(r):r(t)}function I3(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function km(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const R3={texture:!0,children:!1,baseTexture:!0},nA=class P0 extends _s{constructor(e,r,n){let i=!1;n||(n=oe.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=ie.from(n);s.orig=new we,s.trim=new we,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=P0.defaultResolution??oe.RESOLUTION,this._autoResolution=P0.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return Xi.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ie("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Xi.experimentalLetterSpacing=e}updateText(e){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=Xi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,l=i.lines,h=i.lineHeight,c=i.lineWidths,f=i.maxLineWidth,p=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;let m,y;const _=r.dropShadow?2:1;for(let E=0;E<_;++E){const T=r.dropShadow&&E===0,S=T?Math.ceil(Math.max(1,o)+r.padding*2):0,b=S*this._resolution;if(T){n.fillStyle="black",n.strokeStyle="black";const A=r.dropShadowColor,P=r.dropShadowBlur*this._resolution,F=r.dropShadowDistance*this._resolution;n.shadowColor=je.shared.setValue(A).setAlpha(r.dropShadowAlpha).toRgbaString(),n.shadowBlur=P,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*F,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*F+b}else n.fillStyle=this._generateFillStyle(r,l,i),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let x=(h-p.fontSize)/2;h-p.fontSize<0&&(x=0);for(let A=0;A<l.length;A++)m=r.strokeThickness/2,y=r.strokeThickness/2+A*h+p.ascent+x,r.align==="right"?m+=f-c[A]:r.align==="center"&&(m+=(f-c[A])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(l[A],m+r.padding,y+r.padding-S,!0),r.fill&&this.drawLetterSpacing(l[A],m+r.padding,y+r.padding-S)}this.updateTexture()}drawLetterSpacing(e,r,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Xi.experimentalLetterSpacingSupported&&(Xi.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,r,n):this.context.fillText(e,r,n);return}let l=r;const h=Xi.graphemeSegmenter(e);let c=this.context.measureText(e).width,f=0;for(let p=0;p<h.length;++p){const m=h[p];i?this.context.strokeText(m,l,n):this.context.fillText(m,l,n);let y="";for(let _=p+1;_<h.length;++_)y+=h[_];f=this.context.measureText(y).width,l+=c-f+s,c=f}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=sD(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,n=this._style,i=n.trim?0:n.padding,s=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-i*2,r.orig.height=r._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,r)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,r,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,h=this.canvas.width/this._resolution-o-l*2,c=this.canvas.height/this._resolution-o-l*2,f=i.slice(),p=e.fillGradientStops.slice();if(!p.length){const m=f.length+1;for(let y=1;y<m;++y)p.push(y/m)}if(f.unshift(i[0]),p.unshift(0),f.push(i[i.length-1]),p.push(1),e.fillGradientType===of.LINEAR_VERTICAL){s=this.context.createLinearGradient(h/2,l,h/2,c+l);const m=n.fontProperties.fontSize+e.strokeThickness;for(let y=0;y<r.length;y++){const _=n.lineHeight*(y-1)+m,E=n.lineHeight*y;let T=E;y>0&&_>E&&(T=(E+_)/2);const S=E+m,b=n.lineHeight*(y+1);let x=S;y+1<r.length&&b<S&&(x=(S+b)/2);const A=(x-T)/c;for(let P=0;P<f.length;P++){let F=0;typeof p[P]=="number"?F=p[P]:F=P/f.length;let M=Math.min(1,Math.max(0,T/c+F*A));M=Number(M.toFixed(5)),s.addColorStop(M,f[P])}}}else{s=this.context.createLinearGradient(l,c/2,h+l,c/2);const m=f.length+1;let y=1;for(let _=0;_<f.length;_++){let E;typeof p[_]=="number"?E=p[_]:E=y/m,s.addColorStop(E,f[_]),y++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},R3,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const r=ts(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const r=ts(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Ai?this._style=e:this._style=new Ai(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};nA.defaultAutoResolution=!0;let iv=nA;class bd{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Oc{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],l=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const c in l){const f=l[c].split("="),p=f[0],m=f[1].replace(/"/gm,""),y=parseFloat(m),_=isNaN(y)?m:y;h[p]=_}n[o].push(h)}const i=new bd;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class I0{static test(e){const r=e;return typeof e!="string"&&"getElementsByTagName"in e&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new bd,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),l=e.getElementsByTagName("kerning"),h=e.getElementsByTagName("distanceField");for(let c=0;c<n.length;c++)r.info.push({face:n[c].getAttribute("face"),size:parseInt(n[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)r.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)r.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const f=o[c];r.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let c=0;c<l.length;c++)r.kerning.push({first:parseInt(l[c].getAttribute("first"),10),second:parseInt(l[c].getAttribute("second"),10),amount:parseInt(l[c].getAttribute("amount"),10)});for(let c=0;c<h.length;c++)r.distanceField.push({fieldType:h[c].getAttribute("fieldType"),distanceRange:parseInt(h[c].getAttribute("distanceRange"),10)});return r}}class R0{static test(e){return typeof e=="string"&&e.includes("<font>")?I0.test(oe.ADAPTER.parseXML(e)):!1}static parse(e){return I0.parse(oe.ADAPTER.parseXML(e))}}const Nm=[Oc,I0,R0];function M3(t){for(let e=0;e<Nm.length;e++)if(Nm[e].test(t))return Nm[e];return null}function k3(t,e,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let l;const h=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,f=t.width/n-h-c*2,p=t.height/n-h-c*2,m=o.slice(),y=r.fillGradientStops.slice();if(!y.length){const _=m.length+1;for(let E=1;E<_;++E)y.push(E/_)}if(m.unshift(o[0]),y.unshift(0),m.push(o[o.length-1]),y.push(1),r.fillGradientType===of.LINEAR_VERTICAL){l=e.createLinearGradient(f/2,c,f/2,p+c);let _=0;const E=(s.fontProperties.fontSize+r.strokeThickness)/p;for(let T=0;T<i.length;T++){const S=s.lineHeight*T;for(let b=0;b<m.length;b++){let x=0;typeof y[b]=="number"?x=y[b]:x=b/m.length;const A=S/p+x*E;let P=Math.max(_,A);P=Math.min(P,1),l.addColorStop(P,m[b]),_=P}}}else{l=e.createLinearGradient(c,p/2,f+c,p/2);const _=m.length+1;let E=1;for(let T=0;T<m.length;T++){let S;typeof y[T]=="number"?S=y[T]:S=E/_,l.addColorStop(S,m[T]),E++}}return l}function N3(t,e,r,n,i,s,o){const l=r.text,h=r.fontProperties;e.translate(n,i),e.scale(s,s);const c=o.strokeThickness/2,f=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=k3(t,e,o,s,[l],r),e.strokeStyle=o.stroke,o.dropShadow){const p=o.dropShadowColor,m=o.dropShadowBlur*s,y=o.dropShadowDistance*s;e.shadowColor=je.shared.setValue(p).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=m,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*y,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*y}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(l,c,f+r.lineHeight-h.descent),o.fill&&e.fillText(l,c,f+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Bc(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function iA(t){return Array.from?Array.from(t):t.split("")}function D3(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let l=s,h=o;l<=h;l++)e.push(String.fromCharCode(l))}else e.push(...iA(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Hi=class Gn{constructor(e,r,n){var f;const[i]=e.info,[s]=e.common,[o]=e.page,[l]=e.distanceField,h=bi(o.file),c={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=c;for(let p=0;p<e.page.length;p++){const{id:m,file:y}=e.page[p];c[m]=r instanceof Array?r[p]:r[y],l!=null&&l.fieldType&&l.fieldType!=="none"&&(c[m].baseTexture.alphaMode=fr.NO_PREMULTIPLIED_ALPHA,c[m].baseTexture.mipmap=Zn.OFF)}for(let p=0;p<e.char.length;p++){const{id:m,page:y}=e.char[p];let{x:_,y:E,width:T,height:S,xoffset:b,yoffset:x,xadvance:A}=e.char[p];_/=h,E/=h,T/=h,S/=h,b/=h,x/=h,A/=h;const P=new we(_+c[y].frame.x/h,E+c[y].frame.y/h,T,S);this.chars[m]={xOffset:b,yOffset:x,xAdvance:A,kerning:{},texture:new ie(c[y].baseTexture,P),page:y}}for(let p=0;p<e.kerning.length;p++){let{first:m,second:y,amount:_}=e.kerning[p];m/=h,y/=h,_/=h,this.chars[y]&&(this.chars[y].kerning[m]=_)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=((f=l==null?void 0:l.fieldType)==null?void 0:f.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,r,n){let i;if(e instanceof bd)i=e;else{const o=M3(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}r instanceof ie&&(r=[r]);const s=new Gn(i,r,n);return Gn.available[s.font]=s,s}static uninstall(e){const r=Gn.available[e];if(!r)throw new Error(`No font found named '${e}'`);r.destroy(),delete Gn.available[e]}static from(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:l,textureHeight:h,...c}=Object.assign({},Gn.defaultOptions,n),f=D3(i),p=r instanceof Ai?r:new Ai(r),m=l,y=new bd;y.info[0]={face:p.fontFamily,size:p.fontSize},y.common[0]={lineHeight:p.fontSize};let _=0,E=0,T,S,b,x=0;const A=[];for(let F=0;F<f.length;F++){T||(T=oe.ADAPTER.createCanvas(),T.width=l,T.height=h,S=T.getContext("2d"),b=new Se(T,{resolution:o,...c}),A.push(new ie(b)),y.page.push({id:A.length-1,file:""}));const M=f[F],N=Xi.measureText(M,p,!1,T),V=N.width,$=Math.ceil(N.height),fe=Math.ceil((p.fontStyle==="italic"?2:1)*V);if(E>=h-$*o){if(E===0)throw new Error(`[BitmapFont] textureHeight ${h}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${M}')`);--F,T=null,S=null,b=null,E=0,_=0,x=0;continue}if(x=Math.max($+N.fontProperties.descent,x),fe*o+_>=m){if(_===0)throw new Error(`[BitmapFont] textureWidth ${l}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${M}')`);--F,E+=x*o,E=Math.ceil(E),_=0,x=0;continue}N3(T,S,N,_,E,o,p);const Y=Bc(N.text);y.char.push({id:Y,page:A.length-1,x:_/o,y:E/o,width:fe,height:$,xoffset:0,yoffset:0,xadvance:V-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),_+=(fe+2*s)*o,_=Math.ceil(_)}if(!(n!=null&&n.skipKerning))for(let F=0,M=f.length;F<M;F++){const N=f[F];for(let V=0;V<M;V++){const $=f[V],fe=S.measureText(N).width,Y=S.measureText($).width,O=S.measureText(N+$).width-(fe+Y);O&&y.kerning.push({first:Bc(N),second:Bc($),amount:O})}}const P=new Gn(y,A,!0);return Gn.available[e]!==void 0&&Gn.uninstall(e),Gn.available[e]=P,P}};Hi.ALPHA=[["a","z"],["A","Z"]," "],Hi.NUMERIC=[["0","9"]],Hi.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Hi.ASCII=[[" ","~"]],Hi.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Hi.ALPHANUMERIC},Hi.available={};let $i=Hi;class F3{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Dm=new Ee,Sw=new Js,sA=class oA extends Jt{constructor(e,r,n,i=Wr.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=n||ri.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=oe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Wr.TRIANGLES&&r.length<oA.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,l=i.c,h=i.d,c=i.tx,f=i.ty,p=this.vertexData;for(let m=0;m<p.length/2;m++){const y=r[m*2],_=r[m*2+1];p[m*2]=s*y+l*_+c,p[m*2+1]=o*y+h*_+f}if(this._roundPixels){const m=oe.RESOLUTION;for(let y=0;y<p.length;++y)p[y]=Math.round(p[y]*m)/m}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new F3(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Dm);const r=this.geometry.getBuffer("aVertexPosition").data,n=Sw.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let l=0;l+2<s;l+=o){const h=i[l]*2,c=i[l+1]*2,f=i[l+2]*2;if(n[0]=r[h],n[1]=r[h+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[f],n[5]=r[f+1],Sw.contains(Dm.x,Dm.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};sA.BATCHABLE_SIZE=100;let _u=sA;class af extends Si{constructor(e,r,n){super();const i=new it(e),s=new it(r,!0),o=new it(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,ge.FLOAT).addAttribute("aTextureCoord",s,2,!1,ge.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var O3=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,B3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class xu extends En{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:We.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Yn.from(B3,O3),n),this._colorDirty=!1,this.uvMatrix=new rv(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new je(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;je.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var L3=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,U3=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Tw=[],Aw=[],Cw=[],aA=class lA extends Jt{constructor(e,r={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:l,fontSize:h}=Object.assign({},lA.styleDefaults,r);if(!$i.available[l])throw new Error(`Missing BitmapFont "${l}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new je(i),this._font=void 0,this._fontName=l,this._fontSize=h,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new fn(()=>{this.dirty=!0},this,0,0),this._roundPixels=oe.ROUND_PIXELS,this.dirty=!0,this._resolution=oe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var fe;const e=$i.available[this._fontName],r=this.fontSize,n=r/e.size,i=new Ee,s=[],o=[],l=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=iA(h),f=this._maxWidth*e.size/r,p=e.distanceFieldType==="none"?Tw:Aw;let m=null,y=0,_=0,E=0,T=-1,S=0,b=0,x=0,A=0;for(let Y=0;Y<c.length;Y++){const O=c[Y],X=Bc(O);if(/(?:\s)/.test(O)&&(T=Y,S=y,A++),O==="\r"||O===`
`){o.push(y),l.push(-1),_=Math.max(_,y),++E,++b,i.x=0,i.y+=e.lineHeight,m=null,A=0;continue}const ne=e.chars[X];if(!ne)continue;m&&ne.kerning[m]&&(i.x+=ne.kerning[m]);const le=Cw.pop()||{texture:ie.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Ee};le.texture=ne.texture,le.line=E,le.charCode=X,le.position.x=Math.round(i.x+ne.xOffset+this._letterSpacing/2),le.position.y=Math.round(i.y+ne.yOffset),le.prevSpaces=A,s.push(le),y=le.position.x+Math.max(ne.xAdvance-ne.xOffset,ne.texture.orig.width),i.x+=ne.xAdvance+this._letterSpacing,x=Math.max(x,ne.yOffset+ne.texture.height),m=X,T!==-1&&f>0&&i.x>f&&(++b,pa(s,1+T-b,1+Y-T),Y=T,T=-1,o.push(S),l.push(s.length>0?s[s.length-1].prevSpaces:0),_=Math.max(_,S),E++,i.x=0,i.y+=e.lineHeight,m=null,A=0)}const P=c[c.length-1];P!=="\r"&&P!==`
`&&(/(?:\s)/.test(P)&&(y=S),o.push(y),_=Math.max(_,y),l.push(-1));const F=[];for(let Y=0;Y<=E;Y++){let O=0;this._align==="right"?O=_-o[Y]:this._align==="center"?O=(_-o[Y])/2:this._align==="justify"&&(O=l[Y]<0?0:(_-o[Y])/l[Y]),F.push(O)}const M=s.length,N={},V=[],$=this._activePagesMeshData;p.push(...$);for(let Y=0;Y<M;Y++){const O=s[Y].texture,X=O.baseTexture.uid;if(!N[X]){let ne=p.pop();if(!ne){const se=new af;let R,G;e.distanceFieldType==="none"?(R=new xu(ie.EMPTY),G=_e.NORMAL):(R=new xu(ie.EMPTY,{program:Yn.from(U3,L3),uniforms:{uFWidth:0}}),G=_e.NORMAL_NPM);const D=new _u(se,R);D.blendMode=G,ne={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:D,vertices:null,uvs:null,indices:null}}ne.index=0,ne.indexCount=0,ne.vertexCount=0,ne.uvsCount=0,ne.total=0;const{_textureCache:le}=this;le[X]=le[X]||new ie(O.baseTexture),ne.mesh.texture=le[X],ne.mesh.tint=this._tintColor.value,V.push(ne),N[X]=ne}N[X].total++}for(let Y=0;Y<$.length;Y++)V.includes($[Y])||this.removeChild($[Y].mesh);for(let Y=0;Y<V.length;Y++)V[Y].mesh.parent!==this&&this.addChild(V[Y].mesh);this._activePagesMeshData=V;for(const Y in N){const O=N[Y],X=O.total;if(!(((fe=O.indices)==null?void 0:fe.length)>6*X)||O.vertices.length<_u.BATCHABLE_SIZE*2)O.vertices=new Float32Array(4*2*X),O.uvs=new Float32Array(4*2*X),O.indices=new Uint16Array(6*X);else{const ne=O.total,le=O.vertices;for(let se=ne*4*2;se<le.length;se++)le[se]=0}O.mesh.size=6*X}for(let Y=0;Y<M;Y++){const O=s[Y];let X=O.position.x+F[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(X=Math.round(X));const ne=X*n,le=O.position.y*n,se=O.texture,R=N[se.baseTexture.uid],G=se.frame,D=se._uvs,U=R.index++;R.indices[U*6+0]=0+U*4,R.indices[U*6+1]=1+U*4,R.indices[U*6+2]=2+U*4,R.indices[U*6+3]=0+U*4,R.indices[U*6+4]=2+U*4,R.indices[U*6+5]=3+U*4,R.vertices[U*8+0]=ne,R.vertices[U*8+1]=le,R.vertices[U*8+2]=ne+G.width*n,R.vertices[U*8+3]=le,R.vertices[U*8+4]=ne+G.width*n,R.vertices[U*8+5]=le+G.height*n,R.vertices[U*8+6]=ne,R.vertices[U*8+7]=le+G.height*n,R.uvs[U*8+0]=D.x0,R.uvs[U*8+1]=D.y0,R.uvs[U*8+2]=D.x1,R.uvs[U*8+3]=D.y1,R.uvs[U*8+4]=D.x2,R.uvs[U*8+5]=D.y2,R.uvs[U*8+6]=D.x3,R.uvs[U*8+7]=D.y3}this._textWidth=_*n,this._textHeight=(i.y+e.lineHeight)*n;for(const Y in N){const O=N[Y];if(this.anchor.x!==0||this.anchor.y!==0){let se=0;const R=this._textWidth*this.anchor.x,G=this._textHeight*this.anchor.y;for(let D=0;D<O.total;D++)O.vertices[se++]-=R,O.vertices[se++]-=G,O.vertices[se++]-=R,O.vertices[se++]-=G,O.vertices[se++]-=R,O.vertices[se++]-=G,O.vertices[se++]-=R,O.vertices[se++]-=G}this._maxLineHeight=x*n;const X=O.mesh.geometry.getBuffer("aVertexPosition"),ne=O.mesh.geometry.getBuffer("aTextureCoord"),le=O.mesh.geometry.getIndex();X.data=O.vertices,ne.data=O.uvs,le.data=O.indices,X.update(),ne.update(),le.update()}for(let Y=0;Y<s.length;Y++)Cw.push(s[Y]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:n,size:i}=$i.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:l,d:h}=this.worldTransform,c=Math.sqrt(s*s+o*o),f=Math.sqrt(l*l+h*h),p=(Math.abs(c)+Math.abs(f))/2,m=this.fontSize/i,y=e._view.resolution;for(const _ of this._activePagesMeshData)_.mesh.shader.uniforms.uFWidth=p*r*m*y}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=$i.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!$i.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??$i.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:r}=this,n=$i.available[this._fontName].distanceFieldType==="none"?Tw:Aw;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>r[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=ie.EMPTY});for(const i in r)r[i].destroy(),delete r[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};aA.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let z3=aA;const Pw={loader:te.LoadParser,resolver:te.ResolveParser,cache:te.CacheParser,detection:te.DetectionParser};ce.handle(te.Asset,t=>{const e=t.ref;Object.entries(Pw).filter(([r])=>!!e[r]).forEach(([r,n])=>ce.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(Pw).filter(r=>!!e[r]).forEach(r=>ce.remove(e[r]))});class G3{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ba(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function xs(t,e){const r=t.split("?")[0],n=Ft.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const cn=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t),M0=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function uA(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const l=s[o];r<e.length-1?uA(t.replace(n[r],l),e,r+1,n,i):i.push(t.replace(n[r],l))}}function H3(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),uA(t,i,0,r,n)}else n.push(t);return n}const Sd=t=>!Array.isArray(t);class $3{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=cn(e);let i;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.test(r)){i=h.getCacheableAssets(n,r);break}}i||(i={},n.forEach(l=>{i[l]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(l=>{this._cacheMap.set(l,o)}),s.forEach(l=>{this._cache.has(l)&&this._cache.get(l)!==r&&console.warn("[Cache] already has key:",l),this._cache.set(l,i[l])}),r instanceof ie){const l=r;n.forEach(h=>{l.baseTexture!==ie.EMPTY.baseTexture&&Se.addToCache(l.baseTexture,h),ie.addToCache(l,h)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const di=new $3;class j3{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,l;let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.load&&((o=c.test)!=null&&o.call(c,e,r,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,r,this),n.parser=s;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];c.parse&&c.parse&&await((l=c.testParse)==null?void 0:l.call(c,i,r,this))&&(i=await c.parse(i,r,this)||i,n.parser=c)}return i})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Sd(e),o=cn(e,c=>({alias:[c],src:c})),l=o.length,h=o.map(async c=>{const f=Ft.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,c)),i[c.src]=await this.promiseCache[f].promise,r&&r(++n/l)}catch(p){throw delete this.promiseCache[f],delete i[c.src],new Error(`[Loader.load] Failed to load ${f}.
${p}`)}});return await Promise.all(h),s?i[o[0].src]:i}async unload(e){const r=cn(e,n=>({alias:[n],src:n})).map(async n=>{var o,l;const i=Ft.toAbsolute(n.src),s=this.promiseCache[i];if(s){const h=await s.promise;delete this.promiseCache[i],(l=(o=s.parser)==null?void 0:o.unload)==null||l.call(o,h,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var Sn=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Sn||{});const W3=".json",V3="application/json",X3={extension:{type:te.LoadParser,priority:Sn.Low},name:"loadJson",test(t){return Ba(t,V3)||xs(t,W3)},async load(t){return await(await oe.ADAPTER.fetch(t)).json()}};ce.add(X3);const Y3=".txt",Q3="text/plain",K3={name:"loadTxt",extension:{type:te.LoadParser,priority:Sn.Low},test(t){return Ba(t,Q3)||xs(t,Y3)},async load(t){return await(await oe.ADAPTER.fetch(t)).text()}};ce.add(K3);const q3=["normal","bold","100","200","300","400","500","600","700","800","900"],Z3=[".ttf",".otf",".woff",".woff2"],J3=["font/ttf","font/otf","font/woff","font/woff2"],eF=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function tF(t){const e=Ft.extname(t),r=Ft.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=r.length>0;for(const s of r)if(!s.match(eF)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const rF=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function nF(t){return rF.test(t)?t:encodeURI(t)}const iF={extension:{type:te.LoadParser,priority:Sn.Low},name:"loadWebFont",test(t){return Ba(t,J3)||xs(t,Z3)},async load(t,e){var n,i,s;const r=oe.ADAPTER.getFontFaceSet();if(r){const o=[],l=((n=e.data)==null?void 0:n.family)??tF(t),h=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(f=>q3.includes(f)))??["normal"],c=e.data??{};for(let f=0;f<h.length;f++){const p=h[f],m=new FontFace(l,`url(${nF(t)})`,{...c,weight:p});await m.load(),r.add(m),o.push(m)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>oe.ADAPTER.getFontFaceSet().delete(e))}};ce.add(iF);const sF=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ga=null,k0=class{constructor(){ga||(ga=URL.createObjectURL(new Blob([sF],{type:"application/javascript"}))),this.worker=new Worker(ga)}};k0.revokeObjectURL=function(){ga&&(URL.revokeObjectURL(ga),ga=null)};const oF=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let ya=null;class hA{constructor(){ya||(ya=URL.createObjectURL(new Blob([oF],{type:"application/javascript"}))),this.worker=new Worker(ya)}}hA.revokeObjectURL=function(){ya&&(URL.revokeObjectURL(ya),ya=null)};let Iw=0,Fm;class aF{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new k0;r.addEventListener("message",n=>{r.terminate(),k0.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Fm===void 0&&(Fm=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Fm&&(this._createdWorkers++,e=new hA().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[Iw]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:Iw++,id:n})}}const Rw=new aF;function Nu(t,e,r){t.resource.internal=!0;const n=new ie(t),i=()=>{delete e.promiseCache[r],di.has(r)&&di.remove(r)};return n.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const lF=[".jpeg",".jpg",".png",".webp",".avif"],uF=["image/jpeg","image/png","image/webp","image/avif"];async function hF(t){const e=await oe.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const lf={name:"loadTextures",extension:{type:te.LoadParser,priority:Sn.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Ba(t,uF)||xs(t,lF)},async load(t,e,r){var l;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await Rw.isImageBitmapSupported()?i=await Rw.loadImageBitmap(t):i=await hF(t):i=await new Promise((h,c)=>{const f=new Image;f.crossOrigin=this.config.crossOrigin,f.src=t,f.complete?h(f):(f.onload=()=>h(f),f.onerror=p=>c(p))});const s={...e.data};s.resolution??(s.resolution=bi(t)),n&&((l=s.resourceOptions)==null?void 0:l.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Se(i,s);return o.resource.src=t,Nu(o,r,t)},unload(t){t.destroy(!0)}};ce.add(lf);const cF=".svg",dF="image/svg+xml",fF={extension:{type:te.LoadParser,priority:Sn.High},name:"loadSVG",test(t){return Ba(t,dF)||xs(t,cF)},async testParse(t){return S0.test(t)},async parse(t,e,r){var s;const n=new S0(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new Se(n,{resolution:bi(t),...e==null?void 0:e.data});return i.resource.src=e.src,Nu(i,r,e.src)},async load(t,e){return(await oe.ADAPTER.fetch(t)).text()},unload:lf.unload};ce.add(fF);const pF=[".mp4",".m4v",".webm",".ogv"],mF=["video/mp4","video/webm","video/ogg"],gF={name:"loadVideo",extension:{type:te.LoadParser,priority:Sn.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Ba(t,mF)||xs(t,pF)},async load(t,e,r){var o;let n;const i=await(await oe.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const l={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},h=new JT(s,l);await h.load();const c=new Se(h,{alphaMode:await HN(),resolution:bi(t),...e==null?void 0:e.data});c.resource.src=t,n=Nu(c,r,t),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(l){throw URL.revokeObjectURL(s),l}return n},unload(t){t.destroy(!0)}};ce.add(gF);class yF{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,name:n,src:i,srcs:s}=e;return cn(r||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(l=>(l==null?void 0:l.src)??(l==null?void 0:l.srcs)??l):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let l;if(typeof o=="string"){const h=this._createBundleAssetId(e,o);n.push(h),l=[o,h]}else{const h=o.map(c=>this._createBundleAssetId(e,c));n.push(...h),l=[...o,...h]}this.add({...i,alias:l,src:s})}):Object.keys(r).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof r[i]=="string")this.add({alias:s,src:r[i]});else if(Array.isArray(r[i]))this.add({alias:s,src:r[i]});else{const o=r[i],l=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(l)?l:[l]})}n.push(...s)}),this._bundles[e]=n}add(e,r,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ie("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let l;l=h=>{this.hasKey(h)&&console.warn(`[Resolver] already has key: ${h} overwriting`)},cn(o).forEach(h=>{const{src:c,srcs:f}=h;let{data:p,format:m,loadParser:y}=h;const _=cn(c||f).map(S=>typeof S=="string"?H3(S):Array.isArray(S)?S:[S]),E=this.getAlias(h);Array.isArray(E)?E.forEach(l):l(E);const T=[];_.forEach(S=>{S.forEach(b=>{let x={};if(typeof b!="object"){x.src=b;for(let A=0;A<this._parsers.length;A++){const P=this._parsers[A];if(P.test(b)){x=P.parse(b);break}}}else p=b.data??p,m=b.format??m,y=b.loadParser??y,x={...x,...b};if(!E)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this.buildResolvedAsset(x,{aliases:E,data:p,format:m,loadParser:y}),T.push(x)})}),E.forEach(S=>{this._assetMap[S]=T})})}resolveBundle(e){const r=Sd(e);e=cn(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),l={};for(const h in o){const c=o[h];l[this._extractAssetIdFromBundle(i,h)]=c}n[i]=l}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(e){const r=Sd(e);e=cn(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],l=this._getPreferredOrder(s);l==null||l.priority.forEach(h=>{l.params[h].forEach(c=>{const f=s.filter(p=>p[h]?p[h]===c:!1);f.length&&(s=f)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:n,data:i,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=Ft.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Ft.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class vF{constructor(){this._detections=[],this._initialized=!1,this.resolver=new yF,this.loader=new j3,this.cache=di,this._backgroundLoader=new G3(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const r=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof r=="number"?[r]:r,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n,i,s){this.resolver.add(e,r,n,i,s)}async load(e,r){this._initialized||await this.init();const n=Sd(e),i=cn(e).map(l=>{if(typeof l!="string"){const h=this.resolver.getAlias(l);return h.some(c=>!this.resolver.hasKey(c))&&this.add(l),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let l=0,h=0;const c=()=>{r==null||r(++l/h)},f=o.map(p=>{const m=i[p];return h+=Object.keys(m).length,this._mapLoadToResolve(m,c).then(y=>{s[p]=y})});return await Promise.all(f),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return di.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=di.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((l,h)=>{const c=s[l.src],f=[l.src];l.alias&&f.push(...l.alias),o[i[h]]=c,di.set(f,c)}),o}async unload(e){this._initialized||await this.init();const r=cn(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=cn(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{di.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,i)=>r.indexOf(n)===i),r}get detections(){return this._detections}get preferWorkers(){return lf.config.preferWorkers}set preferWorkers(e){Ie("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const rs=new vF;ce.handleByList(te.LoadParser,rs.loader.parsers).handleByList(te.ResolveParser,rs.resolver.parsers).handleByList(te.CacheParser,rs.cache.parsers).handleByList(te.DetectionParser,rs.detections);const _F={extension:te.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof ie),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};ce.add(_F);async function cA(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const xF={extension:{type:te.DetectionParser,priority:1},test:async()=>cA("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};ce.add(xF);const wF={extension:{type:te.DetectionParser,priority:0},test:async()=>cA("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};ce.add(wF);const Mw=["png","jpg","jpeg"],EF={extension:{type:te.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Mw],remove:async t=>t.filter(e=>!Mw.includes(e))};ce.add(EF);const bF="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function sv(t){return bF?!1:document.createElement("video").canPlayType(t)!==""}const SF={extension:{type:te.DetectionParser,priority:0},test:async()=>sv("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};ce.add(SF);const TF={extension:{type:te.DetectionParser,priority:0},test:async()=>sv("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};ce.add(TF);const AF={extension:{type:te.DetectionParser,priority:0},test:async()=>sv("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};ce.add(AF);const CF={extension:te.ResolveParser,test:lf.test,parse:t=>{var e;return{resolution:parseFloat(((e=oe.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Ft.extname(t).slice(1),src:t}}};ce.add(CF);const PF=[".xml",".fnt"],IF={extension:{type:te.LoadParser,priority:Sn.Normal},name:"loadBitmapFont",test(t){return PF.includes(Ft.extname(t).toLowerCase())},async testParse(t){return Oc.test(t)||R0.test(t)},async parse(t,e,r){const n=Oc.test(t)?Oc.parse(t):R0.parse(t),{src:i}=e,{page:s}=n,o=[];for(let c=0;c<s.length;++c){const f=s[c].file;let p=Ft.join(Ft.dirname(i),f);p=M0(p,i),o.push(p)}const l=await r.load(o),h=o.map(c=>l[c]);return $i.install(n,h,!0)},async load(t,e){return(await oe.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};ce.add(IF);const Td={build(t){const e=t.points;let r,n,i,s,o,l;if(t.type===Gt.CIRC){const _=t.shape;r=_.x,n=_.y,o=l=_.radius,i=s=0}else if(t.type===Gt.ELIP){const _=t.shape;r=_.x,n=_.y,o=_.width,l=_.height,i=s=0}else{const _=t.shape,E=_.width/2,T=_.height/2;r=_.x+E,n=_.y+T,o=l=Math.max(0,Math.min(_.radius,Math.min(E,T))),i=E-o,s=T-l}if(!(o>=0&&l>=0&&i>=0&&s>=0)){e.length=0;return}const h=Math.ceil(2.3*Math.sqrt(o+l)),c=h*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(h===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s;return}let f=0,p=h*4+(i?2:0)+2,m=p,y=c;{const _=i+o,E=s,T=r+_,S=r-_,b=n+E;if(e[f++]=T,e[f++]=b,e[--p]=b,e[--p]=S,s){const x=n-E;e[m++]=S,e[m++]=x,e[--y]=x,e[--y]=T}}for(let _=1;_<h;_++){const E=Math.PI/2*(_/h),T=i+Math.cos(E)*o,S=s+Math.sin(E)*l,b=r+T,x=r-T,A=n+S,P=n-S;e[f++]=b,e[f++]=A,e[--p]=A,e[--p]=x,e[m++]=x,e[m++]=P,e[--y]=P,e[--y]=b}{const _=i,E=s+l,T=r+_,S=r-_,b=n+E,x=n-E;e[f++]=T,e[f++]=b,e[--y]=x,e[--y]=T,i&&(e[f++]=S,e[f++]=b,e[--y]=x,e[--y]=S)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(r.length===0)return;let s=n.length/2;const o=s;let l,h;if(t.type!==Gt.RREC){const f=t.shape;l=f.x,h=f.y}else{const f=t.shape;l=f.x+f.width/2,h=f.y+f.height/2}const c=t.matrix;n.push(t.matrix?c.a*l+c.c*h+c.tx:l,t.matrix?c.b*l+c.d*h+c.ty:h),s++,n.push(r[0],r[1]);for(let f=2;f<r.length;f+=2)n.push(r[f],r[f+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function kw(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const l=t[i],h=t[i+1];n+=(l-s)*(h+o),s=l,o=h}if(!e&&n>0||e&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,l=r-s-1,h=s,c=s+1;[t[o],t[h]]=[t[h],t[o]],[t[l],t[c]]=[t[c],t[l]]}}}const dA={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){kw(r,!1);const o=[];for(let c=0;c<n.length;c++){const f=n[c];kw(f.points,!0),o.push(r.length/2),r=r.concat(f.points)}const l=uM(r,o,2);if(!l)return;const h=i.length/2;for(let c=0;c<l.length;c+=3)s.push(l[c]+h),s.push(l[c+1]+h),s.push(l[c+2]+h);for(let c=0;c<r.length;c++)i.push(r[c])}}},RF={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},MF={build(t){Td.build(t)},triangulate(t,e){Td.triangulate(t,e)}};var Gr=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Gr||{}),ns=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(ns||{});const Ia={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Nw{static curveTo(e,r,n,i,s,o){const l=o[o.length-2],h=o[o.length-1]-r,c=l-e,f=i-r,p=n-e,m=Math.abs(h*p-c*f);if(m<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const y=h*h+c*c,_=f*f+p*p,E=h*f+c*p,T=s*Math.sqrt(y)/m,S=s*Math.sqrt(_)/m,b=T*E/y,x=S*E/_,A=T*p+S*c,P=T*f+S*h,F=c*(S+b),M=h*(S+b),N=p*(T+x),V=f*(T+x),$=Math.atan2(M-P,F-A),fe=Math.atan2(V-P,N-A);return{cx:A+e,cy:P+r,radius:s,startAngle:$,endAngle:fe,anticlockwise:c*f>p*h}}static arc(e,r,n,i,s,o,l,h,c){const f=l-o,p=Ia._segmentsCount(Math.abs(f)*s,Math.ceil(Math.abs(f)/vd)*40),m=f/(p*2),y=m*2,_=Math.cos(m),E=Math.sin(m),T=p-1,S=T%1/T;for(let b=0;b<=T;++b){const x=b+S*b,A=m+o+y*x,P=Math.cos(A),F=-Math.sin(A);c.push((_*P+E*F)*s+n,(_*-F+E*P)*s+i)}}}class kF{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class ov{static curveLength(e,r,n,i,s,o,l,h){let c=0,f=0,p=0,m=0,y=0,_=0,E=0,T=0,S=0,b=0,x=0,A=e,P=r;for(let F=1;F<=10;++F)f=F/10,p=f*f,m=p*f,y=1-f,_=y*y,E=_*y,T=E*e+3*_*f*n+3*y*p*s+m*l,S=E*r+3*_*f*i+3*y*p*o+m*h,b=A-T,x=P-S,A=T,P=S,c+=Math.sqrt(b*b+x*x);return c}static curveTo(e,r,n,i,s,o,l){const h=l[l.length-2],c=l[l.length-1];l.length-=2;const f=Ia._segmentsCount(ov.curveLength(h,c,e,r,n,i,s,o));let p=0,m=0,y=0,_=0,E=0;l.push(h,c);for(let T=1,S=0;T<=f;++T)S=T/f,p=1-S,m=p*p,y=m*p,_=S*S,E=_*S,l.push(y*h+3*m*S*e+3*p*_*n+E*s,y*c+3*m*S*r+3*p*_*i+E*o)}}function Dw(t,e,r,n,i,s,o,l){const h=t-r*i,c=e-n*i,f=t+r*s,p=e+n*s;let m,y;o?(m=n,y=-r):(m=-n,y=r);const _=h+m,E=c+y,T=f+m,S=p+y;return l.push(_,E,T,S),2}function Ns(t,e,r,n,i,s,o,l){const h=r-t,c=n-e;let f=Math.atan2(h,c),p=Math.atan2(i-t,s-e);l&&f<p?f+=Math.PI*2:!l&&f>p&&(p+=Math.PI*2);let m=f;const y=p-f,_=Math.abs(y),E=Math.sqrt(h*h+c*c),T=(15*_*Math.sqrt(E)/Math.PI>>0)+1,S=y/T;if(m+=S,l){o.push(t,e,r,n);for(let b=1,x=m;b<T;b++,x+=S)o.push(t,e,t+Math.sin(x)*E,e+Math.cos(x)*E);o.push(t,e,i,s)}else{o.push(r,n,t,e);for(let b=1,x=m;b<T;b++,x+=S)o.push(t+Math.sin(x)*E,e+Math.cos(x)*E,t,e);o.push(i,s,t,e)}return T*2}function NF(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=t.lineStyle,o=new Ee(n[0],n[1]),l=new Ee(n[n.length-2],n[n.length-1]),h=r.type!==Gt.POLY||r.closeStroke,c=Math.abs(o.x-l.x)<i&&Math.abs(o.y-l.y)<i;if(h){n=n.slice(),c&&(n.pop(),n.pop(),l.set(n[n.length-2],n[n.length-1]));const se=(o.x+l.x)*.5,R=(l.y+o.y)*.5;n.unshift(se,R),n.push(se,R)}const f=e.points,p=n.length/2;let m=n.length;const y=f.length/2,_=s.width/2,E=_*_,T=s.miterLimit*s.miterLimit;let S=n[0],b=n[1],x=n[2],A=n[3],P=0,F=0,M=-(b-A),N=S-x,V=0,$=0,fe=Math.sqrt(M*M+N*N);M/=fe,N/=fe,M*=_,N*=_;const Y=s.alignment,O=(1-Y)*2,X=Y*2;h||(s.cap===ns.ROUND?m+=Ns(S-M*(O-X)*.5,b-N*(O-X)*.5,S-M*O,b-N*O,S+M*X,b+N*X,f,!0)+2:s.cap===ns.SQUARE&&(m+=Dw(S,b,M,N,O,X,!0,f))),f.push(S-M*O,b-N*O,S+M*X,b+N*X);for(let se=1;se<p-1;++se){S=n[(se-1)*2],b=n[(se-1)*2+1],x=n[se*2],A=n[se*2+1],P=n[(se+1)*2],F=n[(se+1)*2+1],M=-(b-A),N=S-x,fe=Math.sqrt(M*M+N*N),M/=fe,N/=fe,M*=_,N*=_,V=-(A-F),$=x-P,fe=Math.sqrt(V*V+$*$),V/=fe,$/=fe,V*=_,$*=_;const R=x-S,G=b-A,D=x-P,U=F-A,ee=R*D+G*U,be=G*D-U*R,ye=be<0;if(Math.abs(be)<.001*Math.abs(ee)){f.push(x-M*O,A-N*O,x+M*X,A+N*X),ee>=0&&(s.join===Gr.ROUND?m+=Ns(x,A,x-M*O,A-N*O,x-V*O,A-$*O,f,!1)+4:m+=2,f.push(x-V*X,A-$*X,x+V*O,A+$*O));continue}const Pe=(-M+S)*(-N+A)-(-M+x)*(-N+b),Te=(-V+P)*(-$+A)-(-V+x)*(-$+F),Me=(R*Te-D*Pe)/be,St=(U*Pe-G*Te)/be,Ot=(Me-x)*(Me-x)+(St-A)*(St-A),lt=x+(Me-x)*O,Ce=A+(St-A)*O,Ve=x-(Me-x)*X,Oe=A-(St-A)*X,Mr=Math.min(R*R+G*G,D*D+U*U),kr=ye?O:X,Es=Mr+kr*kr*E,ff=Ot<=Es;let po=s.join;if(po===Gr.MITER&&Ot/E>T&&(po=Gr.BEVEL),ff)switch(po){case Gr.MITER:{f.push(lt,Ce,Ve,Oe);break}case Gr.BEVEL:{ye?f.push(lt,Ce,x+M*X,A+N*X,lt,Ce,x+V*X,A+$*X):f.push(x-M*O,A-N*O,Ve,Oe,x-V*O,A-$*O,Ve,Oe),m+=2;break}case Gr.ROUND:{ye?(f.push(lt,Ce,x+M*X,A+N*X),m+=Ns(x,A,x+M*X,A+N*X,x+V*X,A+$*X,f,!0)+4,f.push(lt,Ce,x+V*X,A+$*X)):(f.push(x-M*O,A-N*O,Ve,Oe),m+=Ns(x,A,x-M*O,A-N*O,x-V*O,A-$*O,f,!1)+4,f.push(x-V*O,A-$*O,Ve,Oe));break}}else{switch(f.push(x-M*O,A-N*O,x+M*X,A+N*X),po){case Gr.MITER:{ye?f.push(Ve,Oe,Ve,Oe):f.push(lt,Ce,lt,Ce),m+=2;break}case Gr.ROUND:{ye?m+=Ns(x,A,x+M*X,A+N*X,x+V*X,A+$*X,f,!0)+2:m+=Ns(x,A,x-M*O,A-N*O,x-V*O,A-$*O,f,!1)+2;break}}f.push(x-V*O,A-$*O,x+V*X,A+$*X),m+=2}}S=n[(p-2)*2],b=n[(p-2)*2+1],x=n[(p-1)*2],A=n[(p-1)*2+1],M=-(b-A),N=S-x,fe=Math.sqrt(M*M+N*N),M/=fe,N/=fe,M*=_,N*=_,f.push(x-M*O,A-N*O,x+M*X,A+N*X),h||(s.cap===ns.ROUND?m+=Ns(x-M*(O-X)*.5,A-N*(O-X)*.5,x-M*O,A-N*O,x+M*X,A+N*X,f,!1)+2:s.cap===ns.SQUARE&&(m+=Dw(x,A,M,N,O,X,!1,f)));const ne=e.indices,le=Ia.epsilon*Ia.epsilon;for(let se=y;se<m+y-2;++se)S=f[se*2],b=f[se*2+1],x=f[(se+1)*2],A=f[(se+1)*2+1],P=f[(se+2)*2],F=f[(se+2)*2+1],!(Math.abs(S*(A-F)+x*(F-b)+P*(b-A))<le)&&ne.push(se,se+1,se+2)}function DF(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==Gt.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,l=e.indices,h=i.length/2,c=o.length/2;let f=c;for(o.push(i[0],i[1]),r=1;r<h;r++)o.push(i[r*2],i[r*2+1]),l.push(f,f+1),f++;s&&l.push(f,c)}function Fw(t,e){t.lineStyle.native?DF(t,e):NF(t,e)}class av{static curveLength(e,r,n,i,s,o){const l=e-2*n+s,h=r-2*i+o,c=2*n-2*e,f=2*i-2*r,p=4*(l*l+h*h),m=4*(l*c+h*f),y=c*c+f*f,_=2*Math.sqrt(p+m+y),E=Math.sqrt(p),T=2*p*E,S=2*Math.sqrt(y),b=m/E;return(T*_+E*m*(_-S)+(4*y*p-m*m)*Math.log((2*E+b+_)/(b+S)))/(4*T)}static curveTo(e,r,n,i,s){const o=s[s.length-2],l=s[s.length-1],h=Ia._segmentsCount(av.curveLength(o,l,e,r,n,i));let c=0,f=0;for(let p=1;p<=h;++p){const m=p/h;c=o+(e-o)*m,f=l+(r-l)*m,s.push(c+(e+(n-e)*m-c)*m,f+(r+(i-r)*m-f)*m)}}}const Om={[Gt.POLY]:dA,[Gt.CIRC]:Td,[Gt.ELIP]:Td,[Gt.RECT]:RF,[Gt.RREC]:MF},Ow=[],nc=[];class Ad{constructor(e,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}clone(){return new Ad(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Fo=new Ee,fA=class pA extends yT{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new vu,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),nc.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),Ow.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,n=null,i=null){const s=new Ad(e,r,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const n=new Ad(e,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Fo):Fo.copyFrom(e),i.shape.contains(Fo.x,Fo.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Fo.x,Fo.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let h=this.shapeIndex;h<r.length;h++){this.shapeIndex++;const c=r[h],f=c.fillStyle,p=c.lineStyle;Om[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(f.visible||p.visible)&&this.processHoles(c.holes);for(let m=0;m<2;m++){const y=m===0?f:p;if(!y.visible)continue;const _=y.texture.baseTexture,E=this.indices.length,T=this.points.length/2;_.wrapMode=yi.REPEAT,m===0?this.processFill(c):this.processLine(c);const S=this.points.length/2-T;S!==0&&(n&&!this._compareStyles(i,y)&&(n.end(E,T),n=null),n||(n=Ow.pop()||new kF,n.begin(y,E,T),this.batches.push(n),i=y),this.addUvs(this.points,e,y.texture,T,S,y.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const l=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&l===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=l?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,n=e.length;r<n;r++){const i=e[r];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<pA.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Se._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),nc.push(this.drawCalls[p]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let i=nc.pop();i||(i=new p0,i.texArray=new v0),i.texArray.count=0,i.start=0,i.size=0,i.type=Wr.TRIANGLES;let s=0,o=null,l=0,h=!1,c=Wr.TRIANGLES,f=0;this.drawCalls.push(i);for(let p=0;p<this.batches.length;p++){const m=this.batches[p],y=8,_=m.style,E=_.texture.baseTexture;h!==!!_.native&&(h=!!_.native,c=h?Wr.LINES:Wr.TRIANGLES,o=null,s=y,e++),o!==E&&(o=E,E._batchEnabled!==e&&(s===y&&(e++,s=0,i.size>0&&(i=nc.pop(),i||(i=new p0,i.texArray=new v0),this.drawCalls.push(i)),i.start=f,i.size=0,i.texArray.count=0,i.type=c),E.touched=1,E._batchEnabled=e,E._batchLocation=s,E.wrapMode=yi.REPEAT,i.texArray.elements[i.texArray.count++]=E,s++)),i.size+=m.size,f+=m.size,l=E._batchLocation,this.addColors(r,_.color,_.alpha,m.attribSize,m.attribStart),this.addTextureIds(n,l,m.attribSize,m.attribStart)}Se._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),l=new Uint32Array(s);let h=0;for(let c=0;c<e.length/2;c++)o[h++]=e[c*2],o[h++]=e[c*2+1],o[h++]=r[c*2],o[h++]=r[c*2+1],l[h++]=n[c],o[h++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?dA.triangulate(e,this):Om[e.type].triangulate(e,this)}processLine(e){Fw(e,this);for(let r=0;r<e.holes.length;r++)Fw(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const n=e[r];Om[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=r.a*i+r.c*s+r.tx,e[n*2+1]=r.b*i+r.d*s+r.ty}}addColors(e,r,n,i,s=0){const o=je.shared.setValue(r).toLittleEndianNumber(),l=je.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let h=0;h<i;h++)e[s+h]=l}addTextureIds(e,r,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=r}addUvs(e,r,n,i,s,o=null){let l=0;const h=r.length,c=n.frame;for(;l<s;){let p=e[(i+l)*2],m=e[(i+l)*2+1];if(o){const y=o.a*p+o.c*m+o.tx;m=o.b*p+o.d*m+o.ty,p=y}l++,r.push(p/c.width,m/c.height)}const f=n.baseTexture;(c.width<f.width||c.height<f.height)&&this.adjustUvs(r,n,h,s)}adjustUvs(e,r,n,i){const s=r.baseTexture,o=1e-6,l=n+i*2,h=r.frame,c=h.width/s.width,f=h.height/s.height;let p=h.x/h.width,m=h.y/h.height,y=Math.floor(e[n]+o),_=Math.floor(e[n+1]+o);for(let E=n+2;E<l;E+=2)y=Math.min(y,Math.floor(e[E]+o)),_=Math.min(_,Math.floor(e[E+1]+o));p-=y,m-=_;for(let E=n;E<l;E+=2)e[E]=(e[E]+p)*c,e[E+1]=(e[E+1]+m)*f}};fA.BATCHABLE_SIZE=100;let FF=fA;class uf{constructor(){this.color=16777215,this.alpha=1,this.texture=ie.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new uf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=ie.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class lv extends uf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ns.BUTT,this.join=Gr.MITER,this.miterLimit=10}clone(){const e=new lv;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ns.BUTT,this.join=Gr.MITER,this.miterLimit=10}}const Bm={},N0=class Lc extends Jt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new uf,this._lineStyle=new lv,this._matrix=null,this._holeMode=!1,this.state=ri.for2d(),this._geometry=e||new FF,this._geometry.refCount++,this._transformID=-1,this._tintColor=new je(16777215),this.blendMode=_e.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Lc(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:ie.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ns.BUTT,join:Gr.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Js,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new Js,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==r)&&n.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),av.curveTo(e,r,n,i,s),this}bezierCurveTo(e,r,n,i,s,o){return this._initCurve(),ov.curveTo(e,r,n,i,s,o,this.currentPath.points),this}arcTo(e,r,n,i,s){this._initCurve(e,r);const o=this.currentPath.points,l=Nw.curveTo(e,r,n,i,s,o);if(l){const{cx:h,cy:c,radius:f,startAngle:p,endAngle:m,anticlockwise:y}=l;this.arc(h,c,f,p,m,y)}return this}arc(e,r,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=vd:o&&i<=s&&(i+=vd),s-i===0)return this;const l=e+Math.cos(i)*n,h=r+Math.sin(i)*n,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const p=Math.abs(f[f.length-2]-l),m=Math.abs(f[f.length-1]-h);p<c&&m<c||f.push(l,h)}else this.moveTo(l,h),f=this.currentPath.points;return Nw.arc(l,h,e,r,n,i,s,o,f),this}beginFill(e=0,r){return this.beginTextureFill({texture:ie.WHITE,color:e,alpha:r})}normalizeColor(e){const r=je.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:ie.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,n,i){return this.drawShape(new we(e,r,n,i))}drawRoundedRect(e,r,n,i,s){return this.drawShape(new nf(e,r,n,i,s))}drawCircle(e,r,n){return this.drawShape(new tf(e,r,n))}drawEllipse(e,r,n,i){return this.drawShape(new rf(e,r,n,i))}drawPolygon(...e){let r,n=!0;const i=e[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(e[0])?r=e[0]:r=e;const s=new Js(r);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Gt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),h=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),f={vertexData:l,blendMode:r,indices:c,uvs:h,_batchRGB:je.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=f}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const r=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=r.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,je.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(let l=0,h=o.length;l<h;l++)this._renderDrawCallDirect(e,n.drawCalls[l])}_renderDrawCallDirect(e,r){const{texArray:n,type:i,size:s,start:o}=r,l=n.count;for(let h=0;h<l;h++)e.texture.bind(n.elements[h],h);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let r=this.shader;const n=this.pluginName;if(!r){if(!Bm[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let h=0;h<i;h++)s[h]=h;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new We,default:wn.from({uSamplers:s},!0)},l=e.plugins[n]._shader.program;Bm[n]=new En(l,o)}r=Bm[n]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,r,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Lc._TEMP_POINT),this._geometry.containsPoint(Lc._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=je.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,l=r.tx,h=r.ty,c=this._geometry.points,f=this.vertexData;let p=0;for(let m=0;m<c.length;m+=2){const y=c[m],_=c[m+1];f[p++]=n*y+s*_+l,f[p++]=o*_+i*y+h}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};N0.curves=Ia,N0._TEMP_POINT=new Ee;let Vl=N0;class OF extends af{constructor(e=100,r=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=e,this.height=r,this.build()}build(){const e=this.segWidth*this.segHeight,r=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,l=this.width/s,h=this.height/o;for(let f=0;f<e;f++){const p=f%this.segWidth,m=f/this.segWidth|0;r.push(p*l,m*h),n.push(p/s,m/o)}const c=s*o;for(let f=0;f<c;f++){const p=f%s,m=f/s|0,y=m*this.segWidth+p,_=m*this.segWidth+p+1,E=(m+1)*this.segWidth+p,T=(m+1)*this.segWidth+p+1;i.push(y,_,E,_,T,E)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class BF extends af{constructor(e=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let l=0,h=e[0];const c=this._width*this.textureScale,f=e.length;for(let m=0;m<f;m++){const y=m*4;if(this.textureScale>0){const _=h.x-e[m].x,E=h.y-e[m].y,T=Math.sqrt(_*_+E*E);h=e[m],l+=T/c}else l=m/(f-1);s[y]=l,s[y+1]=0,s[y+2]=l,s[y+3]=1}let p=0;for(let m=0;m<f-1;m++){const y=m*2;o[p++]=y,o[p++]=y+1,o[p++]=y+2,o[p++]=y+2,o[p++]=y+1,o[p++]=y+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],n,i=0,s=0;const o=this.buffers[0].data,l=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<l;c++){const f=e[c],p=c*4;c<e.length-1?n=e[c+1]:n=f,s=-(n.x-r.x),i=n.y-r.y;const m=Math.sqrt(i*i+s*s);m<1e-6?(i=0,s=0):(i/=m,s/=m,i*=h,s*=h),o[p]=f.x+i,o[p+1]=f.y+s,o[p+2]=f.x-i,o[p+3]=f.y-s,r=f}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class LF extends _u{constructor(e,r,n){const i=new OF(e.width,e.height,r,n),s=new xu(ie.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const ic=10;class UF extends LF{constructor(e,r,n,i,s){var o,l,h,c;super(ie.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??((o=e.defaultBorders)==null?void 0:o.left)??ic,this._rightWidth=i??((l=e.defaultBorders)==null?void 0:l.right)??ic,this._topHeight=n??((h=e.defaultBorders)==null?void 0:h.top)??ic,this._bottomHeight=s??((c=e.defaultBorders)==null?void 0:c.bottom)??ic,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(r,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,i=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=i*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class zF extends _u{constructor(e=ie.EMPTY,r,n,i,s){const o=new af(r,n,i);o.getBuffer("aVertexPosition").static=!1;const l=new xu(e);super(o,l,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class GF extends _u{constructor(e,r,n=0){const i=new BF(e.height,r,n),s=new xu(e);n>0&&(e.baseTexture.wrapMode=yi.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(e)}}class HF extends Jt{constructor(e=1500,r,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=_e.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new je(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const r=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Bw{constructor(e,r,n){this.geometry=new Si,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ge.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new it(pT(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];l.offset=r,r+=l.size,this.dynamicStride+=l.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new it(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];l.offset=i,i+=l.size,this.staticStride+=l.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new it(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];e.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===ge.UNSIGNED_BYTE,l.type,this.dynamicStride*4,l.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];e.addAttribute(l.attributeName,this.staticBuffer,0,l.type===ge.UNSIGNED_BYTE,l.type,this.staticStride*4,l.offset*4)}}uploadDynamic(e,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,r,n,s.type===ge.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,r,n,s.type===ge.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var $F=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,jF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class mA extends ku{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new We,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ge.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=En.from(jF,$F,{}),this.state=ri.for2d()}render(e){const r=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));const h=r[0]._texture.baseTexture,c=h.alphaMode>0;this.state.blendMode=fT(e.blendMode,c),s.state.set(this.state);const f=s.gl,p=e.worldTransform.copyTo(this.tempMatrix);p.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=je.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let m=!1;for(let y=0,_=0;y<o;y+=i,_+=1){let E=o-y;E>i&&(E=i),_>=l.length&&l.push(this._generateOneMoreBuffer(e));const T=l[_];T.uploadDynamic(r,y,E);const S=e._bufferUpdateIDs[_]||0;m=m||T._updateID<S,m&&(T._updateID=e._updateID,T.uploadStatic(r,y,E)),s.geometry.bind(T.geometry),f.drawElements(f.TRIANGLES,E*6,f.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)r.push(new Bw(this.properties,s,i));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new Bw(this.properties,n,r)}uploadVertices(e,r,n,i,s,o){let l=0,h=0,c=0,f=0;for(let p=0;p<n;++p){const m=e[r+p],y=m._texture,_=m.scale.x,E=m.scale.y,T=y.trim,S=y.orig;T?(h=T.x-m.anchor.x*S.width,l=h+T.width,f=T.y-m.anchor.y*S.height,c=f+T.height):(l=S.width*(1-m.anchor.x),h=S.width*-m.anchor.x,c=S.height*(1-m.anchor.y),f=S.height*-m.anchor.y),i[o]=h*_,i[o+1]=f*E,i[o+s]=l*_,i[o+s+1]=f*E,i[o+s*2]=l*_,i[o+s*2+1]=c*E,i[o+s*3]=h*_,i[o+s*3+1]=c*E,o+=s*4}}uploadPosition(e,r,n,i,s,o){for(let l=0;l<n;l++){const h=e[r+l].position;i[o]=h.x,i[o+1]=h.y,i[o+s]=h.x,i[o+s+1]=h.y,i[o+s*2]=h.x,i[o+s*2+1]=h.y,i[o+s*3]=h.x,i[o+s*3+1]=h.y,o+=s*4}}uploadRotation(e,r,n,i,s,o){for(let l=0;l<n;l++){const h=e[r+l].rotation;i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}uploadUvs(e,r,n,i,s,o){for(let l=0;l<n;++l){const h=e[r+l]._texture._uvs;h?(i[o]=h.x0,i[o+1]=h.y0,i[o+s]=h.x1,i[o+s+1]=h.y1,i[o+s*2]=h.x2,i[o+s*2+1]=h.y2,i[o+s*3]=h.x3,i[o+s*3+1]=h.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,r,n,i,s,o){for(let l=0;l<n;++l){const h=e[r+l],c=je.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}mA.extension={name:"particle",type:te.RendererPlugin};ce.add(mA);class wu extends _s{constructor(e,r=!0){super(e[0]instanceof ie?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(kt.shared.add(this.update,this,Jn.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=r/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let n=0;n<e.length;++n)r.push(ie.from(e[n]));return new wu(r)}static fromImages(e){const r=[];for(let n=0;n<e.length;++n)r.push(ie.from(e[n]));return new wu(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof ie)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(kt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const _l=new Ee;let WF=class gA extends _s{constructor(e,r=100,n=100){super(e),this.tileTransform=new sf,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new rv(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,r,n,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new we),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,_l);const r=this._width,n=this._height,i=-r*this.anchor._x;if(_l.x>=i&&_l.x<i+r){const s=-n*this.anchor._y;if(_l.y>=s&&_l.y<s+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,r){const n=e instanceof ie?e:ie.from(e,r);return new gA(n,r.width,r.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}};var VF=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,XF=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,YF=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Lw=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,QF=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const sc=new We;class yA extends ku{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new CT,this.state=ri.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=En.from(Lw,QF,r),this.shader=e.context.webGLVersion>1?En.from(XF,VF,r):En.from(Lw,YF,r)}render(e){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const l=e._texture,h=l.baseTexture,c=h.alphaMode>0,f=e.tileTransform.localTransform,p=e.uvMatrix;let m=h.isPowerOfTwo&&l.frame.width===h.width&&l.frame.height===h.height;m&&(h._glTextures[r.CONTEXT_UID]?m=h.wrapMode!==yi.CLAMP:h.wrapMode===yi.CLAMP&&(h.wrapMode=yi.REPEAT));const y=m?this.simpleShader:this.shader,_=l.width,E=l.height,T=e._width,S=e._height;sc.set(f.a*_/T,f.b*_/S,f.c*E/T,f.d*E/S,f.tx/T,f.ty/S),sc.invert(),m?sc.prepend(p.mapCoord):(y.uniforms.uMapCoord=p.mapCoord.toArray(!0),y.uniforms.uClampFrame=p.uClampFrame,y.uniforms.uClampOffset=p.uClampOffset),y.uniforms.uTransform=sc.toArray(!0),y.uniforms.uColor=je.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(y.uniforms.uColor),y.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),y.uniforms.uSampler=l,r.shader.bind(y),r.geometry.bind(n),this.state.blendMode=fT(e.blendMode,c),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}yA.extension={name:"tilingSprite",type:te.RendererPlugin};ce.add(yA);const vA=class D0{constructor(e){this.stage=new Jt,e=Object.assign({forceCanvas:!1},e),this.renderer=m3(e),D0._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,r){const n=D0._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};vA._plugins=[];let hf=vA;ce.handleByList(te.Application,hf._plugins);class _A{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}_A.extension=te.Application;ce.add(_A);var xA={exports:{}},KF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qF=KF,ZF=qF;function wA(){}function EA(){}EA.resetWarningCache=wA;var JF=function(){function t(n,i,s,o,l,h){if(h!==ZF){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:EA,resetWarningCache:wA};return r.PropTypes=r,r};xA.exports=JF();var eO=xA.exports;const Ye=bu(eO);function Cr(t){return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(t)}function bA(t){var e=function(r,n){if(Cr(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Cr(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(t,"string");return Cr(e)==="symbol"?e:String(e)}function pt(t,e,r){return(e=bA(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ci(t){return function(e){if(Array.isArray(e))return Lm(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return Lm(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lm(e,r):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var tO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nO=function(t){return t==null};function Il(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=Ci(t);else{if(t===null||Cr(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(r){return!nO(r)&&!isNaN(r)}).map(Number)}function Uw(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Um(t){return t instanceof Ee||t instanceof fn}var Cd=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function zm(t,e,r){if(Um(t[e])&&Um(r))t[e].copyFrom(r);else if(Um(t[e])){var n=Il(r);ct(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(r),Cr(r)),t[e].set(n.shift(),n.shift())}else t[e]=r}var Oo,SA=function(t){var e,r=t;if(!Array.isArray(r)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(t)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},TA=function(t){return function(){return!t.apply(void 0,arguments)}},F0="children",iO=(pt(Oo={},F0,!0),pt(Oo,"parent",!0),pt(Oo,"worldAlpha",!0),pt(Oo,"worldTransform",!0),pt(Oo,"worldVisible",!0),Oo),O0={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},ei=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(l){return requestAnimationFrame(function(){var h,c;l==null||(h=l.__reactpixi)===null||h===void 0||(c=h.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(l,h){if(r.hasOwnProperty(l))return ct(h.typeofs.some(function(c){return Cr(r[l])===c})||h.instanceofs.some(function(c){return r[l]instanceof c}),"".concat(t," ").concat(l," prop is invalid")),r[l]};if(r.texture)return ct(r.texture instanceof ie,"".concat(t," texture needs to be typeof `Texture`")),r.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,ie]});ct(!!s,"".concat(t," could not get texture from props"));var o=ie.from(s);return o.__reactpixi={root:e},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},sO=TA(SA([].concat(Ci(Object.keys(iO)),Ci(Cd))));function ti(t,e,r){var n=!1;if(ct(tt.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Cr(t)),!r.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<Cd.length;o++){var l=Cd[o];e[l]!==r[l]&&(n=!0,typeof e[l]=="function"&&i&&t.removeListener(l,e[l]),typeof r[l]=="function"&&s&&t.on(l,r[l]))}var h=Object.keys(r||{});if(r.overwriteProps){for(var c=0;c<h.length;c++){var f=h[c];e[f]!==r[f]&&(n=!0,zm(t,f,r[f]))}return n}for(var p=h.filter(sO),m=0;m<p.length;m++){var y=p[m],_=r[y];r[y]!==e[y]&&(n=!0),_!==void 0?zm(t,y,_):y in O0?(console.warn("setting default value: ".concat(y,", from: ").concat(t[y]," to: ").concat(_," for"),t),n=!0,zm(t,y,O0[y])):console.warn("ignoring prop: ".concat(y,", from ").concat(t[y]," to ").concat(_," for"),t)}return n}var oO=function(t,e){var r=e.text,n=e.style;return new z3(r,n)},aO=function(){return new Jt};function ws(t,e){if(t==null)return{};var r,n,i=function(o,l){if(o==null)return{};var h,c,f={},p=Object.keys(o);for(c=0;c<p.length;c++)h=p[c],l.indexOf(h)>=0||(f[h]=o[h]);return f}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var lO=["draw","geometry"],uO=function(t,e){var r=e.geometry;ct(!r||r instanceof Vl,"Graphics geometry needs to be a `PIXI.Graphics`");var n=r?new Vl(r.geometry):new Vl;return n.applyProps=function(i,s,o){var l=o.draw;o.geometry;var h=ti(i,s,ws(o,lO));return s.draw!==l&&typeof l=="function"&&(h=!0,l.call(n,n)),h},n},hO=["image","texture"],cO=function(t,e){var r=e.leftWidth,n=r===void 0?10:r,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,l=o===void 0?10:o,h=e.bottomHeight,c=h===void 0?10:h,f=ei("NineSlicePlane",t,e),p=new UF(f,n,s,l,c);return p.applyProps=function(m,y,_){var E=_.image,T=_.texture,S=ti(m,y,ws(_,hO));return(E||T)&&(T!==y.texture&&(S=!0),m.texture=ei("NineSlicePlane",t,_)),S},p};function zw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zw(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var dO=function(t,e){var r=e.maxSize,n=r===void 0?1500:r,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,l=o!==void 0&&o,h=oc(oc({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),c=oc(oc({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),f=new HF(n,h,s,l);return f.willUnmount=function(p,m,y){p.destroy(c)},f},fO=["image","texture"],pO=function(t,e){var r=new _s(ei("Sprite",t,e));return r.applyProps=function(n,i,s){var o=s.image,l=s.texture,h=ti(n,i,ws(s,fO));return(l&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(h=!0),n.texture=ei("Sprite",t,s)),h},r},mO=["textures","isPlaying","initialFrame"],gO=function(t,e){var r=e.textures,n=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,l=function(c){return c.map(function(f){return ct(f instanceof ie||(f==null?void 0:f.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),f})},h=n?wu.fromImages(n):new wu(l(r));return h[s?"gotoAndPlay":"gotoAndStop"](o||0),h.applyProps=function(c,f,p){var m=p.textures,y=p.isPlaying,_=p.initialFrame,E=ti(c,f,ws(p,mO));if(m&&f.textures!==m&&(c.textures=l(m),E=!0),y!==f.isPlaying||_!==f.initialFrame){var T=typeof _=="number"?_:h.currentFrame||0;h[y?"gotoAndPlay":"gotoAndStop"](T),E=!0}return E},h},yO=function(t,e){var r=e.text,n=r===void 0?"":r,i=e.style,s=i===void 0?{}:i,o=e.isSprite,l=new iv(n,s);return o?(l.updateText(),new _s(l.texture)):l},vO=["tileScale","tilePosition","image","texture"],_O=function(t,e){var r=e.width,n=r===void 0?100:r,i=e.height,s=i===void 0?100:i,o=ei("TilingSprite",t,e),l=new WF(o,n,s);return l.applyProps=function(h,c,f){var p=f.tileScale,m=f.tilePosition,y=f.image,_=f.texture,E=ti(h,c,ws(f,vO));if(m){var T,S=Il(m);(T=h.tilePosition).set.apply(T,Ci(S)),E=!Uw(Il(c.tilePosition),S)||E}if(p){var b,x=Il(p);(b=h.tileScale).set.apply(b,Ci(x)),E=!Uw(Il(c.tileScale),x)||E}return(y||_)&&(_!==c.texture&&(E=!0),h.texture=ei("Sprite",t,f)),E},l},xO=["image","texture"],wO=function(t,e){var r=ei("Mesh",t,e),n=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,l=o===void 0?Wr.TRIANGLES:o,h=new zF(r,n,i,s,l);return h.applyProps=function(c,f,p){var m=p.image,y=p.texture,_=ti(c,f,ws(p,xO));return(m||y)&&(y!==f.texture&&(_=!0),c.texture=ei("Mesh",t,p)),_},h},EO=["image","texture"],bO=function(t,e){var r=ei("SimpleRope",t,e),n=e.points,i=new GF(r,n);return i.applyProps=function(s,o,l){var h=l.image,c=l.texture,f=ws(l,EO);ct(Array.isArray(l.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var p=ti(s,o,f);return(h||c)&&(c!==o.texture&&(p=!0),s.texture=ei("SimpleRope",t,l)),p},i},SO=Object.freeze({__proto__:null,BitmapText:oO,Container:aO,Graphics:uO,NineSlicePlane:cO,ParticleContainer:dO,Sprite:pO,Text:yO,TilingSprite:_O,SimpleMesh:wO,SimpleRope:bO,AnimatedSprite:gO});function Gw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gw(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var yr={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},TO=Object.keys(yr).reduce(function(t,e){return Hw(Hw({},t),{},pt({},e,SO[e]))},{}),AA={};function AO(t,e){return ct(!!t,"Expect type to be defined, got `%s`",t),ct(!yr[t],"Component `%s` could not be created, already exists in default components.",t),AA[t]=e,t}var $w,jw,Ww,Vw,B0={},L0={},CO={get exports(){return L0},set exports(t){L0=t}},Xw={};function PO(){return jw||(jw=1,CO.exports=($w||($w=1,function(t){function e(R,G){var D=R.length;R.push(G);e:for(;0<D;){var U=D-1>>>1,ee=R[U];if(!(0<i(ee,G)))break e;R[U]=G,R[D]=ee,D=U}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var G=R[0],D=R.pop();if(D!==G){R[0]=D;e:for(var U=0,ee=R.length,be=ee>>>1;U<be;){var ye=2*(U+1)-1,Pe=R[ye],Te=ye+1,Me=R[Te];if(0>i(Pe,D))Te<ee&&0>i(Me,Pe)?(R[U]=Me,R[Te]=D,U=Te):(R[U]=Pe,R[ye]=D,U=ye);else{if(!(Te<ee&&0>i(Me,D)))break e;R[U]=Me,R[Te]=D,U=Te}}}return G}function i(R,G){var D=R.sortIndex-G.sortIndex;return D!==0?D:R.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var h=[],c=[],f=1,p=null,m=3,y=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function x(R){for(var G=r(c);G!==null;){if(G.callback===null)n(c);else{if(!(G.startTime<=R))break;n(c),G.sortIndex=G.expirationTime,e(h,G)}G=r(c)}}function A(R){if(E=!1,x(R),!_)if(r(h)!==null)_=!0,le(P);else{var G=r(c);G!==null&&se(A,G.startTime-R)}}function P(R,G){_=!1,E&&(E=!1,S(V),V=-1),y=!0;var D=m;try{for(x(G),p=r(h);p!==null&&(!(p.expirationTime>G)||R&&!Y());){var U=p.callback;if(typeof U=="function"){p.callback=null,m=p.priorityLevel;var ee=U(p.expirationTime<=G);G=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===r(h)&&n(h),x(G)}else n(h);p=r(h)}if(p!==null)var be=!0;else{var ye=r(c);ye!==null&&se(A,ye.startTime-G),be=!1}return be}finally{p=null,m=D,y=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var F,M=!1,N=null,V=-1,$=5,fe=-1;function Y(){return!(t.unstable_now()-fe<$)}function O(){if(N!==null){var R=t.unstable_now();fe=R;var G=!0;try{G=N(!0,R)}finally{G?F():(M=!1,N=null)}}else M=!1}if(typeof b=="function")F=function(){b(O)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ne=X.port2;X.port1.onmessage=O,F=function(){ne.postMessage(null)}}else F=function(){T(O,0)};function le(R){N=R,M||(M=!0,F())}function se(R,G){V=T(function(){R(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,le(P))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var D=m;m=G;try{return R()}finally{m=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,G){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=m;m=R;try{return G()}finally{m=D}},t.unstable_scheduleCallback=function(R,G,D){var U=t.unstable_now();switch(D=typeof D=="object"&&D!==null&&typeof(D=D.delay)=="number"&&0<D?U+D:U,R){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return R={id:f++,callback:G,priorityLevel:R,startTime:D,expirationTime:ee=D+ee,sortIndex:-1},D>U?(R.sortIndex=D,e(c,R),r(h)===null&&R===r(c)&&(E?(S(V),V=-1):E=!0,se(A,D-U))):(R.sortIndex=ee,e(h,R),_||y||(_=!0,le(P))),R},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(R){var G=m;return function(){var D=m;m=G;try{return R.apply(this,arguments)}finally{m=D}}}}(Xw)),Xw)),L0}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function IO(){return Vw||(Vw=1,Ww=function(t){var e={},r=Tr,n=PO(),i=Object.assign;function s(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),h=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:typeof(a=A&&a[A]||a["@@iterator"])=="function"?a:null}function F(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case c:return"Fragment";case h:return"Portal";case p:return"Profiler";case f:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case y:return(a.displayName||"Context")+".Consumer";case m:return(a._context.displayName||"Context")+".Provider";case _:var u=a.render;return(a=a.displayName)||(a=(a=u.displayName||u.name||"")!==""?"ForwardRef("+a+")":"ForwardRef"),a;case S:return(u=a.displayName||null)!==null?u:F(a.type)||"Memo";case b:u=a._payload,a=a._init;try{return F(a(u))}catch{}}return null}function M(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=(a=u.render).displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(u);case 8:return u===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function N(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do 4098&(u=a).flags&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function V(a){if(N(a)!==a)throw Error(s(188))}function $(a){var u=a.alternate;if(!u){if((u=N(a))===null)throw Error(s(188));return u!==a?null:a}for(var d=a,g=u;;){var v=d.return;if(v===null)break;var w=v.alternate;if(w===null){if((g=v.return)!==null){d=g;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===d)return V(v),a;if(w===g)return V(v),u;w=w.sibling}throw Error(s(188))}if(d.return!==g.return)d=v,g=w;else{for(var C=!1,I=v.child;I;){if(I===d){C=!0,d=v,g=w;break}if(I===g){C=!0,g=v,d=w;break}I=I.sibling}if(!C){for(I=w.child;I;){if(I===d){C=!0,d=w,g=v;break}if(I===g){C=!0,g=w,d=v;break}I=I.sibling}if(!C)throw Error(s(189))}}if(d.alternate!==g)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:u}function fe(a){return(a=$(a))!==null?Y(a):null}function Y(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Y(a);if(u!==null)return u;a=a.sibling}return null}function O(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var u=O(a);if(u!==null)return u}a=a.sibling}return null}var X,ne=Array.isArray,le=t.getPublicInstance,se=t.getRootHostContext,R=t.getChildHostContext,G=t.prepareForCommit,D=t.resetAfterCommit,U=t.createInstance,ee=t.appendInitialChild,be=t.finalizeInitialChildren,ye=t.prepareUpdate,Pe=t.shouldSetTextContent,Te=t.createTextInstance,Me=t.scheduleTimeout,St=t.cancelTimeout,Ot=t.noTimeout,lt=t.isPrimaryRenderer,Ce=t.supportsMutation,Ve=t.supportsPersistence,Oe=t.supportsHydration,Mr=t.getInstanceFromNode,kr=t.preparePortalMount,Es=t.getCurrentEventPriority,ff=t.detachDeletedInstance,po=t.supportsMicrotasks,JA=t.scheduleMicrotask,Ua=t.supportsTestSelectors,eC=t.findFiberRoot,tC=t.getBoundingRect,rC=t.getTextContent,za=t.isHiddenSubtree,nC=t.matchAccessibilityRole,iC=t.setFocusIfFocusable,sC=t.setupIntersectionObserver,oC=t.appendChild,aC=t.appendChildToContainer,lC=t.commitTextUpdate,uC=t.commitMount,hC=t.commitUpdate,cC=t.insertBefore,dC=t.insertInContainerBefore,fC=t.removeChild,pC=t.removeChildFromContainer,cv=t.resetTextContent,mC=t.hideInstance,gC=t.hideTextInstance,yC=t.unhideInstance,vC=t.unhideTextInstance,_C=t.clearContainer,xC=t.cloneInstance,dv=t.createContainerChildSet,fv=t.appendChildToContainerChildSet,wC=t.finalizeContainerChildren,pf=t.replaceContainerChildren,pv=t.cloneHiddenInstance,mv=t.cloneHiddenTextInstance,EC=t.canHydrateInstance,bC=t.canHydrateTextInstance,SC=t.canHydrateSuspenseInstance,gv=t.isSuspenseInstancePending,mf=t.isSuspenseInstanceFallback,TC=t.getSuspenseInstanceFallbackErrorDetails,AC=t.registerSuspenseInstanceRetry,Fu=t.getNextHydratableSibling,CC=t.getFirstHydratableChild,PC=t.getFirstHydratableChildWithinContainer,IC=t.getFirstHydratableChildWithinSuspenseInstance,RC=t.hydrateInstance,MC=t.hydrateTextInstance,kC=t.hydrateSuspenseInstance,NC=t.getNextHydratableInstanceAfterSuspenseInstance,DC=t.commitHydratedContainer,FC=t.commitHydratedSuspenseInstance,OC=t.clearSuspenseBoundary,BC=t.clearSuspenseBoundaryFromContainer,LC=t.shouldDeleteUnhydratedTailInstances,UC=t.didNotMatchHydratedContainerTextInstance,zC=t.didNotMatchHydratedTextInstance;function Ga(a){if(X===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);X=u&&u[1]||""}return`
`+X+a}var gf=!1;function yf(a,u){if(!a||gf)return"";gf=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(z){var g=z}Reflect.construct(a,[],u)}else{try{u.call()}catch(z){g=z}a.call(u.prototype)}else{try{throw Error()}catch(z){g=z}a()}}catch(z){if(z&&g&&typeof z.stack=="string"){for(var v=z.stack.split(`
`),w=g.stack.split(`
`),C=v.length-1,I=w.length-1;1<=C&&0<=I&&v[C]!==w[I];)I--;for(;1<=C&&0<=I;C--,I--)if(v[C]!==w[I]){if(C!==1||I!==1)do if(C--,0>--I||v[C]!==w[I]){var B=`
`+v[C].replace(" at new "," at ");return a.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",a.displayName)),B}while(1<=C&&0<=I);break}}}finally{gf=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?Ga(a):""}var GC=Object.prototype.hasOwnProperty,vf=[],mo=-1;function Ii(a){return{current:a}}function Ke(a){0>mo||(a.current=vf[mo],vf[mo]=null,mo--)}function He(a,u){mo++,vf[mo]=a.current,a.current=u}var Ri={},jt=Ii(Ri),ar=Ii(!1),bs=Ri;function go(a,u){var d=a.type.contextTypes;if(!d)return Ri;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var v,w={};for(v in d)w[v]=u[v];return g&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=w),w}function vr(a){return(a=a.childContextTypes)!=null}function _f(){Ke(ar),Ke(jt)}function yv(a,u,d){if(jt.current!==Ri)throw Error(s(168));He(jt,u),He(ar,d)}function vv(a,u,d){var g=a.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return d;for(var v in g=g.getChildContext())if(!(v in u))throw Error(s(108,M(a)||"Unknown",v));return i({},d,g)}function Ou(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ri,bs=jt.current,He(jt,a),He(ar,ar.current),!0}function _v(a,u,d){var g=a.stateNode;if(!g)throw Error(s(169));d?(a=vv(a,u,bs),g.__reactInternalMemoizedMergedChildContext=a,Ke(ar),Ke(jt),He(jt,a)):Ke(ar),He(ar,d)}var qr=Math.clz32?Math.clz32:function(a){return(a>>>=0)===0?32:31-(HC(a)/$C|0)|0},HC=Math.log,$C=Math.LN2,xf=64,wf=4194304;function Ha(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&a;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&a;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Bu(a,u){var d=a.pendingLanes;if(d===0)return 0;var g=0,v=a.suspendedLanes,w=a.pingedLanes,C=268435455&d;if(C!==0){var I=C&~v;I!==0?g=Ha(I):(w&=C)!==0&&(g=Ha(w))}else(C=d&~v)!==0?g=Ha(C):w!==0&&(g=Ha(w));if(g===0)return 0;if(u!==0&&u!==g&&!(u&v)&&((v=g&-g)>=(w=u&-u)||v===16&&4194240&w))return u;if(4&g&&(g|=16&d),(u=a.entangledLanes)!==0)for(a=a.entanglements,u&=g;0<u;)v=1<<(d=31-qr(u)),g|=a[d],u&=~v;return g}function jC(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function Ef(a){return(a=-1073741825&a.pendingLanes)!==0?a:1073741824&a?1073741824:0}function xv(){var a=xf;return!(4194240&(xf<<=1))&&(xf=64),a}function bf(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function $a(a,u,d){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),(a=a.eventTimes)[u=31-qr(u)]=d}function Sf(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var g=31-qr(d),v=1<<g;v&u|a[g]&u&&(a[g]|=u),d&=~v}}var Be=0;function wv(a){return 1<(a&=-a)?4<a?268435455&a?16:536870912:4:1}var Tf=n.unstable_scheduleCallback,Ev=n.unstable_cancelCallback,WC=n.unstable_shouldYield,VC=n.unstable_requestPaint,Tt=n.unstable_now,Af=n.unstable_ImmediatePriority,XC=n.unstable_UserBlockingPriority,bv=n.unstable_NormalPriority,YC=n.unstable_IdlePriority,Lu=null,Tn=null,Zr=typeof Object.is=="function"?Object.is:function(a,u){return a===u&&(a!==0||1/a==1/u)||a!=a&&u!=u},ni=null,Uu=!1,Cf=!1;function Sv(a){ni===null?ni=[a]:ni.push(a)}function An(){if(!Cf&&ni!==null){Cf=!0;var a=0,u=Be;try{var d=ni;for(Be=1;a<d.length;a++){var g=d[a];do g=g(!0);while(g!==null)}ni=null,Uu=!1}catch(v){throw ni!==null&&(ni=ni.slice(a+1)),Tf(Af,An),v}finally{Be=u,Cf=!1}}return null}var yo=[],vo=0,zu=null,Gu=0,Nr=[],Dr=0,Ss=null,Cn=1,ii="";function Ts(a,u){yo[vo++]=Gu,yo[vo++]=zu,zu=a,Gu=u}function Tv(a,u,d){Nr[Dr++]=Cn,Nr[Dr++]=ii,Nr[Dr++]=Ss,Ss=a;var g=Cn;a=ii;var v=32-qr(g)-1;g&=~(1<<v),d+=1;var w=32-qr(u)+v;if(30<w){var C=v-v%5;w=(g&(1<<C)-1).toString(32),g>>=C,v-=C,Cn=1<<32-qr(u)+v|d<<v|g,ii=w+a}else Cn=1<<w|d<<v|g,ii=a}function Pf(a){a.return!==null&&(Ts(a,1),Tv(a,1,0))}function If(a){for(;a===zu;)zu=yo[--vo],yo[vo]=null,Gu=yo[--vo],yo[vo]=null;for(;a===Ss;)Ss=Nr[--Dr],Nr[Dr]=null,ii=Nr[--Dr],Nr[Dr]=null,Cn=Nr[--Dr],Nr[Dr]=null}var _r=null,Fr=null,qe=!1,ja=!1,Jr=null;function Av(a,u){var d=zr(5,null,null,0);d.elementType="DELETED",d.stateNode=u,d.return=a,(u=a.deletions)===null?(a.deletions=[d],a.flags|=16):u.push(d)}function Cv(a,u){switch(a.tag){case 5:return(u=EC(u,a.type,a.pendingProps))!==null&&(a.stateNode=u,_r=a,Fr=CC(u),!0);case 6:return(u=bC(u,a.pendingProps))!==null&&(a.stateNode=u,_r=a,Fr=null,!0);case 13:if((u=SC(u))!==null){var d=Ss!==null?{id:Cn,overflow:ii}:null;return a.memoizedState={dehydrated:u,treeContext:d,retryLane:1073741824},(d=zr(18,null,null,0)).stateNode=u,d.return=a,a.child=d,_r=a,Fr=null,!0}return!1;default:return!1}}function Rf(a){return(1&a.mode)!=0&&(128&a.flags)==0}function Mf(a){if(qe){var u=Fr;if(u){var d=u;if(!Cv(a,u)){if(Rf(a))throw Error(s(418));u=Fu(d);var g=_r;u&&Cv(a,u)?Av(g,d):(a.flags=-4097&a.flags|2,qe=!1,_r=a)}}else{if(Rf(a))throw Error(s(418));a.flags=-4097&a.flags|2,qe=!1,_r=a}}}function Pv(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;_r=a}function Hu(a){if(!Oe||a!==_r)return!1;if(!qe)return Pv(a),qe=!0,!1;if(a.tag!==3&&(a.tag!==5||LC(a.type)&&!Pe(a.type,a.memoizedProps))){var u=Fr;if(u){if(Rf(a))throw Iv(),Error(s(418));for(;u;)Av(a,u),u=Fu(u)}}if(Pv(a),a.tag===13){if(!Oe)throw Error(s(316));if(!(a=(a=a.memoizedState)!==null?a.dehydrated:null))throw Error(s(317));Fr=NC(a)}else Fr=_r?Fu(a.stateNode):null;return!0}function Iv(){for(var a=Fr;a;)a=Fu(a)}function _o(){Oe&&(Fr=_r=null,ja=qe=!1)}function kf(a){Jr===null?Jr=[a]:Jr.push(a)}var QC=o.ReactCurrentBatchConfig;function $u(a,u){if(Zr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),g=Object.keys(u);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var v=d[g];if(!GC.call(u,v)||!Zr(a[v],u[v]))return!1}return!0}function KC(a){switch(a.tag){case 5:return Ga(a.type);case 16:return Ga("Lazy");case 13:return Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 2:case 15:return a=yf(a.type,!1);case 11:return a=yf(a.type.render,!1);case 1:return a=yf(a.type,!0);default:return""}}function en(a,u){if(a&&a.defaultProps){for(var d in u=i({},u),a=a.defaultProps)u[d]===void 0&&(u[d]=a[d]);return u}return u}var ju=Ii(null),Wu=null,xo=null,Nf=null;function Df(){Nf=xo=Wu=null}function Rv(a,u,d){lt?(He(ju,u._currentValue),u._currentValue=d):(He(ju,u._currentValue2),u._currentValue2=d)}function Ff(a){var u=ju.current;Ke(ju),lt?a._currentValue=u:a._currentValue2=u}function Of(a,u,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),a===d)break;a=a.return}}function wo(a,u){Wu=a,Nf=xo=null,(a=a.dependencies)!==null&&a.firstContext!==null&&(a.lanes&u&&(lr=!0),a.firstContext=null)}function Or(a){var u=lt?a._currentValue:a._currentValue2;if(Nf!==a)if(a={context:a,memoizedValue:u,next:null},xo===null){if(Wu===null)throw Error(s(308));xo=a,Wu.dependencies={lanes:0,firstContext:a}}else xo=xo.next=a;return u}var As=null;function Bf(a){As===null?As=[a]:As.push(a)}function Mv(a,u,d,g){var v=u.interleaved;return v===null?(d.next=d,Bf(u)):(d.next=v.next,v.next=d),u.interleaved=d,Pn(a,g)}function Pn(a,u){a.lanes|=u;var d=a.alternate;for(d!==null&&(d.lanes|=u),d=a,a=a.return;a!==null;)a.childLanes|=u,(d=a.alternate)!==null&&(d.childLanes|=u),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Mi=!1;function Lf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kv(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function si(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function ki(a,u,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(2&De)!=0){var v=g.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),g.pending=u,Pn(a,d)}return(v=g.interleaved)===null?(u.next=u,Bf(g)):(u.next=v.next,v.next=u),g.interleaved=u,Pn(a,d)}function Vu(a,u,d){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&d)!=0)){var g=u.lanes;d|=g&=a.pendingLanes,u.lanes=d,Sf(a,d)}}function Nv(a,u){var d=a.updateQueue,g=a.alternate;if(g!==null&&d===(g=g.updateQueue)){var v=null,w=null;if((d=d.firstBaseUpdate)!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};w===null?v=w=C:w=w.next=C,d=d.next}while(d!==null);w===null?v=w=u:w=w.next=u}else v=w=u;return d={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:g.shared,effects:g.effects},void(a.updateQueue=d)}(a=d.lastBaseUpdate)===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}function Xu(a,u,d,g){var v=a.updateQueue;Mi=!1;var w=v.firstBaseUpdate,C=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var B=I,z=B.next;B.next=null,C===null?w=z:C.next=z,C=B;var j=a.alternate;j!==null&&(I=(j=j.updateQueue).lastBaseUpdate)!==C&&(I===null?j.firstBaseUpdate=z:I.next=z,j.lastBaseUpdate=B)}if(w!==null){var re=v.baseState;for(C=0,j=z=B=null,I=w;;){var H=I.lane,Z=I.eventTime;if((g&H)===H){j!==null&&(j=j.next={eventTime:Z,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var de=a,Ae=I;switch(H=u,Z=d,Ae.tag){case 1:if(typeof(de=Ae.payload)=="function"){re=de.call(Z,re,H);break e}re=de;break e;case 3:de.flags=-65537&de.flags|128;case 0:if((H=typeof(de=Ae.payload)=="function"?de.call(Z,re,H):de)==null)break e;re=i({},re,H);break e;case 2:Mi=!0}}I.callback!==null&&I.lane!==0&&(a.flags|=64,(H=v.effects)===null?v.effects=[I]:H.push(I))}else Z={eventTime:Z,lane:H,tag:I.tag,payload:I.payload,callback:I.callback,next:null},j===null?(z=j=Z,B=re):j=j.next=Z,C|=H;if((I=I.next)===null){if((I=v.shared.pending)===null)break;I=(H=I).next,H.next=null,v.lastBaseUpdate=H,v.shared.pending=null}}if(j===null&&(B=re),v.baseState=B,v.firstBaseUpdate=z,v.lastBaseUpdate=j,(u=v.shared.interleaved)!==null){v=u;do C|=v.lane,v=v.next;while(v!==u)}else w===null&&(v.shared.lanes=0);Ps|=C,a.lanes=C,a.memoizedState=re}}function Dv(a,u,d){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var g=a[u],v=g.callback;if(v!==null){if(g.callback=null,g=d,typeof v!="function")throw Error(s(191,v));v.call(g)}}}var Fv=new r.Component().refs;function Uf(a,u,d,g){d=(d=d(g,u=a.memoizedState))==null?u:i({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Yu={isMounted:function(a){return!!(a=a._reactInternals)&&N(a)===a},enqueueSetState:function(a,u,d){a=a._reactInternals;var g=Xt(),v=Oi(a),w=si(g,v);w.payload=u,d!=null&&(w.callback=d),(u=ki(a,w,v))!==null&&(Ur(u,a,v,g),Vu(u,a,v))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var g=Xt(),v=Oi(a),w=si(g,v);w.tag=1,w.payload=u,d!=null&&(w.callback=d),(u=ki(a,w,v))!==null&&(Ur(u,a,v,g),Vu(u,a,v))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=Xt(),g=Oi(a),v=si(d,g);v.tag=2,u!=null&&(v.callback=u),(u=ki(a,v,g))!==null&&(Ur(u,a,g,d),Vu(u,a,g))}};function Ov(a,u,d,g,v,w,C){return typeof(a=a.stateNode).shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,w,C):!u.prototype||!u.prototype.isPureReactComponent||!$u(d,g)||!$u(v,w)}function Bv(a,u,d){var g=!1,v=Ri,w=u.contextType;return typeof w=="object"&&w!==null?w=Or(w):(v=vr(u)?bs:jt.current,w=(g=(g=u.contextTypes)!=null)?go(a,v):Ri),u=new u(d,w),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Yu,a.stateNode=u,u._reactInternals=a,g&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=w),u}function Lv(a,u,d,g){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,g),u.state!==a&&Yu.enqueueReplaceState(u,u.state,null)}function zf(a,u,d,g){var v=a.stateNode;v.props=d,v.state=a.memoizedState,v.refs=Fv,Lf(a);var w=u.contextType;typeof w=="object"&&w!==null?v.context=Or(w):(w=vr(u)?bs:jt.current,v.context=go(a,w)),v.state=a.memoizedState,typeof(w=u.getDerivedStateFromProps)=="function"&&(Uf(a,u,w,d),v.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(u=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),u!==v.state&&Yu.enqueueReplaceState(v,v.state,null),Xu(a,d,v,g),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Wa(a,u,d){if((a=d.ref)!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner){if(d.tag!==1)throw Error(s(309));var g=d.stateNode}if(!g)throw Error(s(147,a));var v=g,w=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===w?u.ref:(u=function(C){var I=v.refs;I===Fv&&(I=v.refs={}),C===null?delete I[w]:I[w]=C},u._stringRef=w,u)}if(typeof a!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,a))}return a}function Qu(a,u){throw a=Object.prototype.toString.call(u),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function Uv(a){return(0,a._init)(a._payload)}function zv(a){function u(W,k){if(a){var L=W.deletions;L===null?(W.deletions=[k],W.flags|=16):L.push(k)}}function d(W,k){if(!a)return null;for(;k!==null;)u(W,k),k=k.sibling;return null}function g(W,k){for(W=new Map;k!==null;)k.key!==null?W.set(k.key,k):W.set(k.index,k),k=k.sibling;return W}function v(W,k){return(W=Li(W,k)).index=0,W.sibling=null,W}function w(W,k,L){return W.index=L,a?(L=W.alternate)!==null?(L=L.index)<k?(W.flags|=2,k):L:(W.flags|=2,k):(W.flags|=1048576,k)}function C(W){return a&&W.alternate===null&&(W.flags|=2),W}function I(W,k,L,Q){return k===null||k.tag!==6?((k=Ap(L,W.mode,Q)).return=W,k):((k=v(k,L)).return=W,k)}function B(W,k,L,Q){var ve=L.type;return ve===c?j(W,k,L.props.children,Q,L.key):k!==null&&(k.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===b&&Uv(ve)===k.type)?((Q=v(k,L.props)).ref=Wa(W,k,L),Q.return=W,Q):((Q=wh(L.type,L.key,L.props,null,W.mode,Q)).ref=Wa(W,k,L),Q.return=W,Q)}function z(W,k,L,Q){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?((k=Cp(L,W.mode,Q)).return=W,k):((k=v(k,L.children||[])).return=W,k)}function j(W,k,L,Q,ve){return k===null||k.tag!==7?((k=Ms(L,W.mode,Q,ve)).return=W,k):((k=v(k,L)).return=W,k)}function re(W,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return(k=Ap(""+k,W.mode,L)).return=W,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case l:return(L=wh(k.type,k.key,k.props,null,W.mode,L)).ref=Wa(W,null,k),L.return=W,L;case h:return(k=Cp(k,W.mode,L)).return=W,k;case b:return re(W,(0,k._init)(k._payload),L)}if(ne(k)||P(k))return(k=Ms(k,W.mode,L,null)).return=W,k;Qu(W,k)}return null}function H(W,k,L,Q){var ve=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ve!==null?null:I(W,k,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case l:return L.key===ve?B(W,k,L,Q):null;case h:return L.key===ve?z(W,k,L,Q):null;case b:return H(W,k,(ve=L._init)(L._payload),Q)}if(ne(L)||P(L))return ve!==null?null:j(W,k,L,Q,null);Qu(W,L)}return null}function Z(W,k,L,Q,ve){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return I(k,W=W.get(L)||null,""+Q,ve);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case l:return B(k,W=W.get(Q.key===null?L:Q.key)||null,Q,ve);case h:return z(k,W=W.get(Q.key===null?L:Q.key)||null,Q,ve);case b:return Z(W,k,L,(0,Q._init)(Q._payload),ve)}if(ne(Q)||P(Q))return j(k,W=W.get(L)||null,Q,ve,null);Qu(k,Q)}return null}function de(W,k,L,Q){for(var ve=null,Ue=null,pe=k,Le=k=0,Lt=null;pe!==null&&Le<L.length;Le++){pe.index>Le?(Lt=pe,pe=null):Lt=pe.sibling;var ze=H(W,pe,L[Le],Q);if(ze===null){pe===null&&(pe=Lt);break}a&&pe&&ze.alternate===null&&u(W,pe),k=w(ze,k,Le),Ue===null?ve=ze:Ue.sibling=ze,Ue=ze,pe=Lt}if(Le===L.length)return d(W,pe),qe&&Ts(W,Le),ve;if(pe===null){for(;Le<L.length;Le++)(pe=re(W,L[Le],Q))!==null&&(k=w(pe,k,Le),Ue===null?ve=pe:Ue.sibling=pe,Ue=pe);return qe&&Ts(W,Le),ve}for(pe=g(W,pe);Le<L.length;Le++)(Lt=Z(pe,W,Le,L[Le],Q))!==null&&(a&&Lt.alternate!==null&&pe.delete(Lt.key===null?Le:Lt.key),k=w(Lt,k,Le),Ue===null?ve=Lt:Ue.sibling=Lt,Ue=Lt);return a&&pe.forEach(function(Ui){return u(W,Ui)}),qe&&Ts(W,Le),ve}function Ae(W,k,L,Q){var ve=P(L);if(typeof ve!="function")throw Error(s(150));if((L=ve.call(L))==null)throw Error(s(151));for(var Ue=ve=null,pe=k,Le=k=0,Lt=null,ze=L.next();pe!==null&&!ze.done;Le++,ze=L.next()){pe.index>Le?(Lt=pe,pe=null):Lt=pe.sibling;var Ui=H(W,pe,ze.value,Q);if(Ui===null){pe===null&&(pe=Lt);break}a&&pe&&Ui.alternate===null&&u(W,pe),k=w(Ui,k,Le),Ue===null?ve=Ui:Ue.sibling=Ui,Ue=Ui,pe=Lt}if(ze.done)return d(W,pe),qe&&Ts(W,Le),ve;if(pe===null){for(;!ze.done;Le++,ze=L.next())(ze=re(W,ze.value,Q))!==null&&(k=w(ze,k,Le),Ue===null?ve=ze:Ue.sibling=ze,Ue=ze);return qe&&Ts(W,Le),ve}for(pe=g(W,pe);!ze.done;Le++,ze=L.next())(ze=Z(pe,W,Le,ze.value,Q))!==null&&(a&&ze.alternate!==null&&pe.delete(ze.key===null?Le:ze.key),k=w(ze,k,Le),Ue===null?ve=ze:Ue.sibling=ze,Ue=ze);return a&&pe.forEach(function(xP){return u(W,xP)}),qe&&Ts(W,Le),ve}return function W(k,L,Q,ve){if(typeof Q=="object"&&Q!==null&&Q.type===c&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case l:e:{for(var Ue=Q.key,pe=L;pe!==null;){if(pe.key===Ue){if((Ue=Q.type)===c){if(pe.tag===7){d(k,pe.sibling),(L=v(pe,Q.props.children)).return=k,k=L;break e}}else if(pe.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===b&&Uv(Ue)===pe.type){d(k,pe.sibling),(L=v(pe,Q.props)).ref=Wa(k,pe,Q),L.return=k,k=L;break e}d(k,pe);break}u(k,pe),pe=pe.sibling}Q.type===c?((L=Ms(Q.props.children,k.mode,ve,Q.key)).return=k,k=L):((ve=wh(Q.type,Q.key,Q.props,null,k.mode,ve)).ref=Wa(k,L,Q),ve.return=k,k=ve)}return C(k);case h:e:{for(pe=Q.key;L!==null;){if(L.key===pe){if(L.tag===4&&L.stateNode.containerInfo===Q.containerInfo&&L.stateNode.implementation===Q.implementation){d(k,L.sibling),(L=v(L,Q.children||[])).return=k,k=L;break e}d(k,L);break}u(k,L),L=L.sibling}(L=Cp(Q,k.mode,ve)).return=k,k=L}return C(k);case b:return W(k,L,(pe=Q._init)(Q._payload),ve)}if(ne(Q))return de(k,L,Q,ve);if(P(Q))return Ae(k,L,Q,ve);Qu(k,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,L!==null&&L.tag===6?(d(k,L.sibling),(L=v(L,Q)).return=k,k=L):(d(k,L),(L=Ap(Q,k.mode,ve)).return=k,k=L),C(k)):d(k,L)}}var Eo=zv(!0),Gv=zv(!1),Va={},Br=Ii(Va),Xa=Ii(Va),bo=Ii(Va);function In(a){if(a===Va)throw Error(s(174));return a}function Gf(a,u){He(bo,u),He(Xa,a),He(Br,Va),a=se(u),Ke(Br),He(Br,a)}function So(){Ke(Br),Ke(Xa),Ke(bo)}function Hv(a){var u=In(bo.current),d=In(Br.current);d!==(u=R(d,a.type,u))&&(He(Xa,a),He(Br,u))}function Hf(a){Xa.current===a&&(Ke(Br),Ke(Xa))}var ut=Ii(0);function Ku(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&((d=d.dehydrated)===null||gv(d)||mf(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(128&u.flags)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var $f=[];function jf(){for(var a=0;a<$f.length;a++){var u=$f[a];lt?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}$f.length=0}var qu=o.ReactCurrentDispatcher,Wf=o.ReactCurrentBatchConfig,Cs=0,rt=null,At=null,Ct=null,Zu=!1,Ya=!1,Qa=0,qC=0;function Wt(){throw Error(s(321))}function Vf(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!Zr(a[d],u[d]))return!1;return!0}function Xf(a,u,d,g,v,w){if(Cs=w,rt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,qu.current=a===null||a.memoizedState===null?tP:rP,a=d(g,v),Ya){w=0;do{if(Ya=!1,Qa=0,25<=w)throw Error(s(301));w+=1,Ct=At=null,u.updateQueue=null,qu.current=nP,a=d(g,v)}while(Ya)}if(qu.current=th,u=At!==null&&At.next!==null,Cs=0,Ct=At=rt=null,Zu=!1,u)throw Error(s(300));return a}function Yf(){var a=Qa!==0;return Qa=0,a}function Rn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?rt.memoizedState=Ct=a:Ct=Ct.next=a,Ct}function Lr(){if(At===null){var a=rt.alternate;a=a!==null?a.memoizedState:null}else a=At.next;var u=Ct===null?rt.memoizedState:Ct.next;if(u!==null)Ct=u,At=a;else{if(a===null)throw Error(s(310));a={memoizedState:(At=a).memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ct===null?rt.memoizedState=Ct=a:Ct=Ct.next=a}return Ct}function Ka(a,u){return typeof u=="function"?u(a):u}function Qf(a){var u=Lr(),d=u.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=At,v=g.baseQueue,w=d.pending;if(w!==null){if(v!==null){var C=v.next;v.next=w.next,w.next=C}g.baseQueue=v=w,d.pending=null}if(v!==null){w=v.next,g=g.baseState;var I=C=null,B=null,z=w;do{var j=z.lane;if((Cs&j)===j)B!==null&&(B=B.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),g=z.hasEagerState?z.eagerState:a(g,z.action);else{var re={lane:j,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};B===null?(I=B=re,C=g):B=B.next=re,rt.lanes|=j,Ps|=j}z=z.next}while(z!==null&&z!==w);B===null?C=g:B.next=I,Zr(g,u.memoizedState)||(lr=!0),u.memoizedState=g,u.baseState=C,u.baseQueue=B,d.lastRenderedState=g}if((a=d.interleaved)!==null){v=a;do w=v.lane,rt.lanes|=w,Ps|=w,v=v.next;while(v!==a)}else v===null&&(d.lanes=0);return[u.memoizedState,d.dispatch]}function Kf(a){var u=Lr(),d=u.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=d.dispatch,v=d.pending,w=u.memoizedState;if(v!==null){d.pending=null;var C=v=v.next;do w=a(w,C.action),C=C.next;while(C!==v);Zr(w,u.memoizedState)||(lr=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),d.lastRenderedState=w}return[w,g]}function $v(){}function jv(a,u){var d=rt,g=Lr(),v=u(),w=!Zr(g.memoizedState,v);if(w&&(g.memoizedState=v,lr=!0),g=g.queue,qf(Xv.bind(null,d,g,a),[a]),g.getSnapshot!==u||w||Ct!==null&&1&Ct.memoizedState.tag){if(d.flags|=2048,qa(9,Vv.bind(null,d,g,v,u),void 0,null),Pt===null)throw Error(s(349));30&Cs||Wv(d,u,v)}return v}function Wv(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},(u=rt.updateQueue)===null?(u={lastEffect:null,stores:null},rt.updateQueue=u,u.stores=[a]):(d=u.stores)===null?u.stores=[a]:d.push(a)}function Vv(a,u,d,g){u.value=d,u.getSnapshot=g,Yv(u)&&Qv(a)}function Xv(a,u,d){return d(function(){Yv(u)&&Qv(a)})}function Yv(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!Zr(a,d)}catch{return!0}}function Qv(a){var u=Pn(a,1);u!==null&&Ur(u,a,1,-1)}function Kv(a){var u=Rn();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:a},u.queue=a,a=a.dispatch=eP.bind(null,rt,a),[u.memoizedState,a]}function qa(a,u,d,g){return a={tag:a,create:u,destroy:d,deps:g,next:null},(u=rt.updateQueue)===null?(u={lastEffect:null,stores:null},rt.updateQueue=u,u.lastEffect=a.next=a):(d=u.lastEffect)===null?u.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,u.lastEffect=a),a}function qv(){return Lr().memoizedState}function Ju(a,u,d,g){var v=Rn();rt.flags|=a,v.memoizedState=qa(1|u,d,void 0,g===void 0?null:g)}function eh(a,u,d,g){var v=Lr();g=g===void 0?null:g;var w=void 0;if(At!==null){var C=At.memoizedState;if(w=C.destroy,g!==null&&Vf(g,C.deps))return void(v.memoizedState=qa(u,d,w,g))}rt.flags|=a,v.memoizedState=qa(1|u,d,w,g)}function Zv(a,u){return Ju(8390656,8,a,u)}function qf(a,u){return eh(2048,8,a,u)}function Jv(a,u){return eh(4,2,a,u)}function e1(a,u){return eh(4,4,a,u)}function t1(a,u){return typeof u=="function"?(a=a(),u(a),function(){u(null)}):u!=null?(a=a(),u.current=a,function(){u.current=null}):void 0}function r1(a,u,d){return d=d!=null?d.concat([a]):null,eh(4,4,t1.bind(null,u,a),d)}function Zf(){}function n1(a,u){var d=Lr();u=u===void 0?null:u;var g=d.memoizedState;return g!==null&&u!==null&&Vf(u,g[1])?g[0]:(d.memoizedState=[a,u],a)}function i1(a,u){var d=Lr();u=u===void 0?null:u;var g=d.memoizedState;return g!==null&&u!==null&&Vf(u,g[1])?g[0]:(a=a(),d.memoizedState=[a,u],a)}function s1(a,u,d){return 21&Cs?(Zr(d,u)||(d=xv(),rt.lanes|=d,Ps|=d,a.baseState=!0),u):(a.baseState&&(a.baseState=!1,lr=!0),a.memoizedState=d)}function ZC(a,u){var d=Be;Be=d!==0&&4>d?d:4,a(!0);var g=Wf.transition;Wf.transition={};try{a(!1),u()}finally{Be=d,Wf.transition=g}}function o1(){return Lr().memoizedState}function JC(a,u,d){var g=Oi(a);d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},a1(a)?l1(u,d):(d=Mv(a,u,d,g))!==null&&(Ur(d,a,g,Xt()),u1(d,u,g))}function eP(a,u,d){var g=Oi(a),v={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(a1(a))l1(u,v);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer)!==null)try{var C=u.lastRenderedState,I=w(C,d);if(v.hasEagerState=!0,v.eagerState=I,Zr(I,C)){var B=u.interleaved;return B===null?(v.next=v,Bf(u)):(v.next=B.next,B.next=v),void(u.interleaved=v)}}catch{}(d=Mv(a,u,v,g))!==null&&(Ur(d,a,g,v=Xt()),u1(d,u,g))}}function a1(a){var u=a.alternate;return a===rt||u!==null&&u===rt}function l1(a,u){Ya=Zu=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function u1(a,u,d){if(4194240&d){var g=u.lanes;d|=g&=a.pendingLanes,u.lanes=d,Sf(a,d)}}var th={readContext:Or,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},tP={readContext:Or,useCallback:function(a,u){return Rn().memoizedState=[a,u===void 0?null:u],a},useContext:Or,useEffect:Zv,useImperativeHandle:function(a,u,d){return d=d!=null?d.concat([a]):null,Ju(4194308,4,t1.bind(null,u,a),d)},useLayoutEffect:function(a,u){return Ju(4194308,4,a,u)},useInsertionEffect:function(a,u){return Ju(4,2,a,u)},useMemo:function(a,u){var d=Rn();return u=u===void 0?null:u,a=a(),d.memoizedState=[a,u],a},useReducer:function(a,u,d){var g=Rn();return u=d!==void 0?d(u):u,g.memoizedState=g.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},g.queue=a,a=a.dispatch=JC.bind(null,rt,a),[g.memoizedState,a]},useRef:function(a){return a={current:a},Rn().memoizedState=a},useState:Kv,useDebugValue:Zf,useDeferredValue:function(a){return Rn().memoizedState=a},useTransition:function(){var a=Kv(!1),u=a[0];return a=ZC.bind(null,a[1]),Rn().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,d){var g=rt,v=Rn();if(qe){if(d===void 0)throw Error(s(407));d=d()}else{if(d=u(),Pt===null)throw Error(s(349));30&Cs||Wv(g,u,d)}v.memoizedState=d;var w={value:d,getSnapshot:u};return v.queue=w,Zv(Xv.bind(null,g,w,a),[a]),g.flags|=2048,qa(9,Vv.bind(null,g,w,d,u),void 0,null),d},useId:function(){var a=Rn(),u=Pt.identifierPrefix;if(qe){var d=ii;u=":"+u+"R"+(d=(Cn&~(1<<32-qr(Cn)-1)).toString(32)+d),0<(d=Qa++)&&(u+="H"+d.toString(32)),u+=":"}else u=":"+u+"r"+(d=qC++).toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},rP={readContext:Or,useCallback:n1,useContext:Or,useEffect:qf,useImperativeHandle:r1,useInsertionEffect:Jv,useLayoutEffect:e1,useMemo:i1,useReducer:Qf,useRef:qv,useState:function(){return Qf(Ka)},useDebugValue:Zf,useDeferredValue:function(a){return s1(Lr(),At.memoizedState,a)},useTransition:function(){return[Qf(Ka)[0],Lr().memoizedState]},useMutableSource:$v,useSyncExternalStore:jv,useId:o1,unstable_isNewReconciler:!1},nP={readContext:Or,useCallback:n1,useContext:Or,useEffect:qf,useImperativeHandle:r1,useInsertionEffect:Jv,useLayoutEffect:e1,useMemo:i1,useReducer:Kf,useRef:qv,useState:function(){return Kf(Ka)},useDebugValue:Zf,useDeferredValue:function(a){var u=Lr();return At===null?u.memoizedState=a:s1(u,At.memoizedState,a)},useTransition:function(){return[Kf(Ka)[0],Lr().memoizedState]},useMutableSource:$v,useSyncExternalStore:jv,useId:o1,unstable_isNewReconciler:!1};function To(a,u){try{var d="",g=u;do d+=KC(g),g=g.return;while(g);var v=d}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:u,stack:v,digest:null}}function Jf(a,u,d){return{value:a,source:null,stack:d??null,digest:u??null}}function ep(a,u){try{console.error(u.value)}catch(d){setTimeout(function(){throw d})}}var iP=typeof WeakMap=="function"?WeakMap:Map;function h1(a,u,d){(d=si(-1,d)).tag=3,d.payload={element:null};var g=u.value;return d.callback=function(){mh||(mh=!0,_p=g),ep(0,u)},d}function c1(a,u,d){(d=si(-1,d)).tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;d.payload=function(){return g(v)},d.callback=function(){ep(0,u)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(d.callback=function(){ep(0,u),typeof g!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})}),d}function d1(a,u,d){var g=a.pingCache;if(g===null){g=a.pingCache=new iP;var v=new Set;g.set(u,v)}else(v=g.get(u))===void 0&&(v=new Set,g.set(u,v));v.has(d)||(v.add(d),a=fP.bind(null,a,u,d),u.then(a,a))}function f1(a){do{var u;if((u=a.tag===13)&&(u=(u=a.memoizedState)===null||u.dehydrated!==null),u)return a;a=a.return}while(a!==null);return null}function p1(a,u,d,g,v){return 1&a.mode?(a.flags|=65536,a.lanes=v,a):(a===u?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:((u=si(-1,1)).tag=2,ki(d,u,1))),d.lanes|=1),a)}var sP=o.ReactCurrentOwner,lr=!1;function ur(a,u,d,g){u.child=a===null?Gv(u,null,d,g):Eo(u,a.child,d,g)}function m1(a,u,d,g,v){d=d.render;var w=u.ref;return wo(u,v),g=Xf(a,u,d,g,w,v),d=Yf(),a===null||lr?(qe&&d&&Pf(u),u.flags|=1,ur(a,u,g,v),u.child):(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~v,oi(a,u,v))}function g1(a,u,d,g,v){if(a===null){var w=d.type;return typeof w!="function"||Tp(w)||w.defaultProps!==void 0||d.compare!==null||d.defaultProps!==void 0?((a=wh(d.type,null,g,u,u.mode,v)).ref=u.ref,a.return=u,u.child=a):(u.tag=15,u.type=w,y1(a,u,w,g,v))}if(w=a.child,(a.lanes&v)==0){var C=w.memoizedProps;if((d=(d=d.compare)!==null?d:$u)(C,g)&&a.ref===u.ref)return oi(a,u,v)}return u.flags|=1,(a=Li(w,g)).ref=u.ref,a.return=u,u.child=a}function y1(a,u,d,g,v){if(a!==null){var w=a.memoizedProps;if($u(w,g)&&a.ref===u.ref){if(lr=!1,u.pendingProps=g=w,(a.lanes&v)==0)return u.lanes=a.lanes,oi(a,u,v);131072&a.flags&&(lr=!0)}}return tp(a,u,d,g,v)}function v1(a,u,d){var g=u.pendingProps,v=g.children,w=a!==null?a.memoizedState:null;if(g.mode==="hidden")if(!(1&u.mode))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Co,xr),xr|=d;else{if(!(1073741824&d))return a=w!==null?w.baseLanes|d:d,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,He(Co,xr),xr|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=w!==null?w.baseLanes:d,He(Co,xr),xr|=g}else w!==null?(g=w.baseLanes|d,u.memoizedState=null):g=d,He(Co,xr),xr|=g;return ur(a,u,v,d),u.child}function _1(a,u){var d=u.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(u.flags|=512,u.flags|=2097152)}function tp(a,u,d,g,v){var w=vr(d)?bs:jt.current;return w=go(u,w),wo(u,v),d=Xf(a,u,d,g,w,v),g=Yf(),a===null||lr?(qe&&g&&Pf(u),u.flags|=1,ur(a,u,d,v),u.child):(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~v,oi(a,u,v))}function x1(a,u,d,g,v){if(vr(d)){var w=!0;Ou(u)}else w=!1;if(wo(u,v),u.stateNode===null)sh(a,u),Bv(u,d,g),zf(u,d,g,v),g=!0;else if(a===null){var C=u.stateNode,I=u.memoizedProps;C.props=I;var B=C.context,z=d.contextType;typeof z=="object"&&z!==null?z=Or(z):z=go(u,z=vr(d)?bs:jt.current);var j=d.getDerivedStateFromProps,re=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function";re||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I!==g||B!==z)&&Lv(u,C,g,z),Mi=!1;var H=u.memoizedState;C.state=H,Xu(u,g,C,v),B=u.memoizedState,I!==g||H!==B||ar.current||Mi?(typeof j=="function"&&(Uf(u,d,j,g),B=u.memoizedState),(I=Mi||Ov(u,d,I,g,H,B,z))?(re||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=B),C.props=g,C.state=B,C.context=z,g=I):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{C=u.stateNode,kv(a,u),I=u.memoizedProps,z=u.type===u.elementType?I:en(u.type,I),C.props=z,re=u.pendingProps,H=C.context,typeof(B=d.contextType)=="object"&&B!==null?B=Or(B):B=go(u,B=vr(d)?bs:jt.current);var Z=d.getDerivedStateFromProps;(j=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I!==re||H!==B)&&Lv(u,C,g,B),Mi=!1,H=u.memoizedState,C.state=H,Xu(u,g,C,v);var de=u.memoizedState;I!==re||H!==de||ar.current||Mi?(typeof Z=="function"&&(Uf(u,d,Z,g),de=u.memoizedState),(z=Mi||Ov(u,d,z,g,H,de,B)||!1)?(j||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,de,B),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,de,B)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=de),C.props=g,C.state=de,C.context=B,g=z):(typeof C.componentDidUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=1024),g=!1)}return rp(a,u,d,g,w,v)}function rp(a,u,d,g,v,w){_1(a,u);var C=(128&u.flags)!=0;if(!g&&!C)return v&&_v(u,d,!1),oi(a,u,w);g=u.stateNode,sP.current=u;var I=C&&typeof d.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,a!==null&&C?(u.child=Eo(u,a.child,null,w),u.child=Eo(u,null,I,w)):ur(a,u,I,w),u.memoizedState=g.state,v&&_v(u,d,!0),u.child}function w1(a){var u=a.stateNode;u.pendingContext?yv(0,u.pendingContext,u.pendingContext!==u.context):u.context&&yv(0,u.context,!1),Gf(a,u.containerInfo)}function E1(a,u,d,g,v){return _o(),kf(v),u.flags|=256,ur(a,u,d,g),u.child}var Za,Ja,rh,nh,np={dehydrated:null,treeContext:null,retryLane:0};function ip(a){return{baseLanes:a,cachePool:null,transitions:null}}function b1(a,u,d){var g,v=u.pendingProps,w=ut.current,C=!1,I=(128&u.flags)!=0;if((g=I)||(g=(a===null||a.memoizedState!==null)&&(2&w)!=0),g?(C=!0,u.flags&=-129):a!==null&&a.memoizedState===null||(w|=1),He(ut,1&w),a===null)return Mf(u),(a=u.memoizedState)!==null&&(a=a.dehydrated)!==null?(1&u.mode?mf(a)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(I=v.children,a=v.fallback,C?(v=u.mode,C=u.child,I={mode:"hidden",children:I},!(1&v)&&C!==null?(C.childLanes=0,C.pendingProps=I):C=Eh(I,v,0,null),a=Ms(a,v,d,null),C.return=u,a.return=u,C.sibling=a,u.child=C,u.child.memoizedState=ip(d),u.memoizedState=np,a):sp(u,I));if((w=a.memoizedState)!==null&&(g=w.dehydrated)!==null)return function(z,j,re,H,Z,de,Ae){if(re)return 256&j.flags?(j.flags&=-257,ih(z,j,Ae,H=Jf(Error(s(422))))):j.memoizedState!==null?(j.child=z.child,j.flags|=128,null):(de=H.fallback,Z=j.mode,H=Eh({mode:"visible",children:H.children},Z,0,null),(de=Ms(de,Z,Ae,null)).flags|=2,H.return=j,de.return=j,H.sibling=de,j.child=H,1&j.mode&&Eo(j,z.child,null,Ae),j.child.memoizedState=ip(Ae),j.memoizedState=np,de);if(!(1&j.mode))return ih(z,j,Ae,null);if(mf(Z))return H=TC(Z).digest,de=Error(s(419)),H=Jf(de,H,void 0),ih(z,j,Ae,H);if(re=(Ae&z.childLanes)!=0,lr||re){if((H=Pt)!==null){switch(Ae&-Ae){case 4:Z=2;break;case 16:Z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Z=32;break;case 536870912:Z=268435456;break;default:Z=0}(Z=Z&(H.suspendedLanes|Ae)?0:Z)!==0&&Z!==de.retryLane&&(de.retryLane=Z,Pn(z,Z),Ur(H,z,Z,-1))}return Sp(),ih(z,j,Ae,H=Jf(Error(s(421))))}return gv(Z)?(j.flags|=128,j.child=z.child,j=pP.bind(null,z),AC(Z,j),null):(z=de.treeContext,Oe&&(Fr=IC(Z),_r=j,qe=!0,Jr=null,ja=!1,z!==null&&(Nr[Dr++]=Cn,Nr[Dr++]=ii,Nr[Dr++]=Ss,Cn=z.id,ii=z.overflow,Ss=j)),j=sp(j,H.children),j.flags|=4096,j)}(a,u,I,v,g,w,d);if(C){C=v.fallback,I=u.mode,g=(w=a.child).sibling;var B={mode:"hidden",children:v.children};return!(1&I)&&u.child!==w?((v=u.child).childLanes=0,v.pendingProps=B,u.deletions=null):(v=Li(w,B)).subtreeFlags=14680064&w.subtreeFlags,g!==null?C=Li(g,C):(C=Ms(C,I,d,null)).flags|=2,C.return=u,v.return=u,v.sibling=C,u.child=v,v=C,C=u.child,I=(I=a.child.memoizedState)===null?ip(d):{baseLanes:I.baseLanes|d,cachePool:null,transitions:I.transitions},C.memoizedState=I,C.childLanes=a.childLanes&~d,u.memoizedState=np,v}return a=(C=a.child).sibling,v=Li(C,{mode:"visible",children:v.children}),!(1&u.mode)&&(v.lanes=d),v.return=u,v.sibling=null,a!==null&&((d=u.deletions)===null?(u.deletions=[a],u.flags|=16):d.push(a)),u.child=v,u.memoizedState=null,v}function sp(a,u){return(u=Eh({mode:"visible",children:u},a.mode,0,null)).return=a,a.child=u}function ih(a,u,d,g){return g!==null&&kf(g),Eo(u,a.child,null,d),(a=sp(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,a}function S1(a,u,d){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u),Of(a.return,u,d)}function op(a,u,d,g,v){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:v}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=d,w.tailMode=v)}function T1(a,u,d){var g=u.pendingProps,v=g.revealOrder,w=g.tail;if(ur(a,u,g.children,d),(2&(g=ut.current))!=0)g=1&g|2,u.flags|=128;else{if(a!==null&&128&a.flags)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&S1(a,d,u);else if(a.tag===19)S1(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(He(ut,g),(1&u.mode)==0)u.memoizedState=null;else switch(v){case"forwards":for(d=u.child,v=null;d!==null;)(a=d.alternate)!==null&&Ku(a)===null&&(v=d),d=d.sibling;(d=v)===null?(v=u.child,u.child=null):(v=d.sibling,d.sibling=null),op(u,!1,v,d,w);break;case"backwards":for(d=null,v=u.child,u.child=null;v!==null;){if((a=v.alternate)!==null&&Ku(a)===null){u.child=v;break}a=v.sibling,v.sibling=d,d=v,v=a}op(u,!0,d,null,w);break;case"together":op(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function sh(a,u){!(1&u.mode)&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function oi(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),Ps|=u.lanes,(d&u.childLanes)==0)return null;if(a!==null&&u.child!==a.child)throw Error(s(153));if(u.child!==null){for(d=Li(a=u.child,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,(d=d.sibling=Li(a,a.pendingProps)).return=u;d.sibling=null}return u.child}function Mn(a){a.flags|=4}function A1(a,u){if(a!==null&&a.child===u.child)return!0;if(16&u.flags)return!1;for(a=u.child;a!==null;){if(12854&a.flags||12854&a.subtreeFlags)return!1;a=a.sibling}return!0}if(Ce)Za=function(a,u){for(var d=u.child;d!==null;){if(d.tag===5||d.tag===6)ee(a,d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Ja=function(){},rh=function(a,u,d,g,v){if((a=a.memoizedProps)!==g){var w=u.stateNode,C=In(Br.current);d=ye(w,d,a,g,v,C),(u.updateQueue=d)&&Mn(u)}},nh=function(a,u,d,g){d!==g&&Mn(u)};else if(Ve){Za=function(a,u,d,g){for(var v=u.child;v!==null;){if(v.tag===5){var w=v.stateNode;d&&g&&(w=pv(w,v.type,v.memoizedProps,v)),ee(a,w)}else if(v.tag===6)w=v.stateNode,d&&g&&(w=mv(w,v.memoizedProps,v)),ee(a,w);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)(w=v.child)!==null&&(w.return=v),Za(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};var C1=function(a,u,d,g){for(var v=u.child;v!==null;){if(v.tag===5){var w=v.stateNode;d&&g&&(w=pv(w,v.type,v.memoizedProps,v)),fv(a,w)}else if(v.tag===6)w=v.stateNode,d&&g&&(w=mv(w,v.memoizedProps,v)),fv(a,w);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)(w=v.child)!==null&&(w.return=v),C1(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};Ja=function(a,u){var d=u.stateNode;if(!A1(a,u)){a=d.containerInfo;var g=dv(a);C1(g,u,!1,!1),d.pendingChildren=g,Mn(u),wC(a,g)}},rh=function(a,u,d,g,v){var w=a.stateNode,C=a.memoizedProps;if((a=A1(a,u))&&C===g)u.stateNode=w;else{var I=u.stateNode,B=In(Br.current),z=null;C!==g&&(z=ye(I,d,C,g,v,B)),a&&z===null?u.stateNode=w:(w=xC(w,z,d,C,g,u,a,I),be(w,d,g,v,B)&&Mn(u),u.stateNode=w,a?Mn(u):Za(w,u,!1,!1))}},nh=function(a,u,d,g){d!==g?(a=In(bo.current),d=In(Br.current),u.stateNode=Te(g,a,d,u),Mn(u)):u.stateNode=a.stateNode}}else Ja=function(){},rh=function(){},nh=function(){};function el(a,u){if(!qe)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function er(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(u)for(var v=a.child;v!==null;)d|=v.lanes|v.childLanes,g|=14680064&v.subtreeFlags,g|=14680064&v.flags,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)d|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=d,u}function oP(a,u,d){var g=u.pendingProps;switch(If(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(u),null;case 1:case 17:return vr(u.type)&&_f(),er(u),null;case 3:return d=u.stateNode,So(),Ke(ar),Ke(jt),jf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),a!==null&&a.child!==null||(Hu(u)?Mn(u):a===null||a.memoizedState.isDehydrated&&!(256&u.flags)||(u.flags|=1024,Jr!==null&&(Ep(Jr),Jr=null))),Ja(a,u),er(u),null;case 5:Hf(u),d=In(bo.current);var v=u.type;if(a!==null&&u.stateNode!=null)rh(a,u,v,g,d),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(s(166));return er(u),null}if(a=In(Br.current),Hu(u)){if(!Oe)throw Error(s(175));a=RC(u.stateNode,u.type,u.memoizedProps,d,a,u,!ja),u.updateQueue=a,a!==null&&Mn(u)}else{var w=U(v,g,d,a,u);Za(w,u,!1,!1),u.stateNode=w,be(w,v,g,d,a)&&Mn(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return er(u),null;case 6:if(a&&u.stateNode!=null)nh(a,u,a.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(s(166));if(a=In(bo.current),d=In(Br.current),Hu(u)){if(!Oe)throw Error(s(176));if(a=u.stateNode,d=u.memoizedProps,(g=MC(a,d,u,!ja))&&(v=_r)!==null)switch(v.tag){case 3:UC(v.stateNode.containerInfo,a,d,(1&v.mode)!=0);break;case 5:zC(v.type,v.memoizedProps,v.stateNode,a,d,(1&v.mode)!=0)}g&&Mn(u)}else u.stateNode=Te(g,a,d,u)}return er(u),null;case 13:if(Ke(ut),g=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(qe&&Fr!==null&&1&u.mode&&!(128&u.flags))Iv(),_o(),u.flags|=98560,v=!1;else if(v=Hu(u),g!==null&&g.dehydrated!==null){if(a===null){if(!v)throw Error(s(318));if(!Oe)throw Error(s(344));if(!(v=(v=u.memoizedState)!==null?v.dehydrated:null))throw Error(s(317));kC(v,u)}else _o(),!(128&u.flags)&&(u.memoizedState=null),u.flags|=4;er(u),v=!1}else Jr!==null&&(Ep(Jr),Jr=null),v=!0;if(!v)return 65536&u.flags?u:null}return 128&u.flags?(u.lanes=d,u):((d=g!==null)!=(a!==null&&a.memoizedState!==null)&&d&&(u.child.flags|=8192,1&u.mode&&(a===null||1&ut.current?_t===0&&(_t=3):Sp())),u.updateQueue!==null&&(u.flags|=4),er(u),null);case 4:return So(),Ja(a,u),a===null&&kr(u.stateNode.containerInfo),er(u),null;case 10:return Ff(u.type._context),er(u),null;case 19:if(Ke(ut),(v=u.memoizedState)===null)return er(u),null;if(g=(128&u.flags)!=0,(w=v.rendering)===null)if(g)el(v,!1);else{if(_t!==0||a!==null&&128&a.flags)for(a=u.child;a!==null;){if((w=Ku(a))!==null){for(u.flags|=128,el(v,!1),(a=w.updateQueue)!==null&&(u.updateQueue=a,u.flags|=4),u.subtreeFlags=0,a=d,d=u.child;d!==null;)v=a,(g=d).flags&=14680066,(w=g.alternate)===null?(g.childLanes=0,g.lanes=v,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,v=w.dependencies,g.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),d=d.sibling;return He(ut,1&ut.current|2),u.child}a=a.sibling}v.tail!==null&&Tt()>vp&&(u.flags|=128,g=!0,el(v,!1),u.lanes=4194304)}else{if(!g)if((a=Ku(w))!==null){if(u.flags|=128,g=!0,(a=a.updateQueue)!==null&&(u.updateQueue=a,u.flags|=4),el(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!qe)return er(u),null}else 2*Tt()-v.renderingStartTime>vp&&d!==1073741824&&(u.flags|=128,g=!0,el(v,!1),u.lanes=4194304);v.isBackwards?(w.sibling=u.child,u.child=w):((a=v.last)!==null?a.sibling=w:u.child=w,v.last=w)}return v.tail!==null?(u=v.tail,v.rendering=u,v.tail=u.sibling,v.renderingStartTime=Tt(),u.sibling=null,a=ut.current,He(ut,g?1&a|2:1&a),u):(er(u),null);case 22:case 23:return bp(),d=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==d&&(u.flags|=8192),d&&1&u.mode?1073741824&xr&&(er(u),Ce&&6&u.subtreeFlags&&(u.flags|=8192)):er(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function aP(a,u){switch(If(u),u.tag){case 1:return vr(u.type)&&_f(),65536&(a=u.flags)?(u.flags=-65537&a|128,u):null;case 3:return So(),Ke(ar),Ke(jt),jf(),65536&(a=u.flags)&&!(128&a)?(u.flags=-65537&a|128,u):null;case 5:return Hf(u),null;case 13:if(Ke(ut),(a=u.memoizedState)!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(s(340));_o()}return 65536&(a=u.flags)?(u.flags=-65537&a|128,u):null;case 19:return Ke(ut),null;case 4:return So(),null;case 10:return Ff(u.type._context),null;case 22:case 23:return bp(),null;default:return null}}var oh=!1,Vt=!1,lP=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Ao(a,u){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ze(a,u,g)}else d.current=null}function P1(a,u,d){try{d()}catch(g){Ze(a,u,g)}}var I1=!1;function tl(a,u,d){var g=u.updateQueue;if((g=g!==null?g.lastEffect:null)!==null){var v=g=g.next;do{if((v.tag&a)===a){var w=v.destroy;v.destroy=void 0,w!==void 0&&P1(u,d,w)}v=v.next}while(v!==g)}}function ah(a,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var d=u=u.next;do{if((d.tag&a)===a){var g=d.create;d.destroy=g()}d=d.next}while(d!==u)}}function ap(a){var u=a.ref;if(u!==null){var d=a.stateNode;a.tag===5?a=le(d):a=d,typeof u=="function"?u(a):u.current=a}}function R1(a){var u=a.alternate;u!==null&&(a.alternate=null,R1(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode)!==null&&ff(u),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function M1(a){return a.tag===5||a.tag===3||a.tag===4}function k1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||M1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(2&a.flags||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(2&a.flags))return a.stateNode}}function lp(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?dC(d,a,u):aC(d,a);else if(g!==4&&(a=a.child)!==null)for(lp(a,u,d),a=a.sibling;a!==null;)lp(a,u,d),a=a.sibling}function up(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?cC(d,a,u):oC(d,a);else if(g!==4&&(a=a.child)!==null)for(up(a,u,d),a=a.sibling;a!==null;)up(a,u,d),a=a.sibling}var tr=null,kn=!1;function Nn(a,u,d){for(d=d.child;d!==null;)hp(a,u,d),d=d.sibling}function hp(a,u,d){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Lu,d)}catch{}switch(d.tag){case 5:Vt||Ao(d,u);case 6:if(Ce){var g=tr,v=kn;tr=null,Nn(a,u,d),kn=v,(tr=g)!==null&&(kn?pC(tr,d.stateNode):fC(tr,d.stateNode))}else Nn(a,u,d);break;case 18:Ce&&tr!==null&&(kn?BC(tr,d.stateNode):OC(tr,d.stateNode));break;case 4:Ce?(g=tr,v=kn,tr=d.stateNode.containerInfo,kn=!0,Nn(a,u,d),tr=g,kn=v):(Ve&&(g=d.stateNode.containerInfo,v=dv(g),pf(g,v)),Nn(a,u,d));break;case 0:case 11:case 14:case 15:if(!Vt&&(g=d.updateQueue)!==null&&(g=g.lastEffect)!==null){v=g=g.next;do{var w=v,C=w.destroy;w=w.tag,C!==void 0&&(2&w||4&w)&&P1(d,u,C),v=v.next}while(v!==g)}Nn(a,u,d);break;case 1:if(!Vt&&(Ao(d,u),typeof(g=d.stateNode).componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(I){Ze(d,u,I)}Nn(a,u,d);break;case 21:Nn(a,u,d);break;case 22:1&d.mode?(Vt=(g=Vt)||d.memoizedState!==null,Nn(a,u,d),Vt=g):Nn(a,u,d);break;default:Nn(a,u,d)}}function N1(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new lP),u.forEach(function(g){var v=mP.bind(null,a,g);d.has(g)||(d.add(g),g.then(v,v))})}}function tn(a,u){var d=u.deletions;if(d!==null)for(var g=0;g<d.length;g++){var v=d[g];try{var w=a,C=u;if(Ce){var I=C;e:for(;I!==null;){switch(I.tag){case 5:tr=I.stateNode,kn=!1;break e;case 3:case 4:tr=I.stateNode.containerInfo,kn=!0;break e}I=I.return}if(tr===null)throw Error(s(160));hp(w,C,v),tr=null,kn=!1}else hp(w,C,v);var B=v.alternate;B!==null&&(B.return=null),v.return=null}catch(z){Ze(v,u,z)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)D1(u,a),u=u.sibling}function D1(a,u){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(tn(u,a),Dn(a),4&g){try{tl(3,a,a.return),ah(3,a)}catch(H){Ze(a,a.return,H)}try{tl(5,a,a.return)}catch(H){Ze(a,a.return,H)}}break;case 1:tn(u,a),Dn(a),512&g&&d!==null&&Ao(d,d.return);break;case 5:if(tn(u,a),Dn(a),512&g&&d!==null&&Ao(d,d.return),Ce){if(32&a.flags){var v=a.stateNode;try{cv(v)}catch(H){Ze(a,a.return,H)}}if(4&g&&(v=a.stateNode)!=null){var w=a.memoizedProps;if(d=d!==null?d.memoizedProps:w,g=a.type,u=a.updateQueue,a.updateQueue=null,u!==null)try{hC(v,u,g,d,w,a)}catch(H){Ze(a,a.return,H)}}}break;case 6:if(tn(u,a),Dn(a),4&g&&Ce){if(a.stateNode===null)throw Error(s(162));v=a.stateNode,w=a.memoizedProps,d=d!==null?d.memoizedProps:w;try{lC(v,d,w)}catch(H){Ze(a,a.return,H)}}break;case 3:if(tn(u,a),Dn(a),4&g){if(Ce&&Oe&&d!==null&&d.memoizedState.isDehydrated)try{DC(u.containerInfo)}catch(H){Ze(a,a.return,H)}if(Ve){v=u.containerInfo,w=u.pendingChildren;try{pf(v,w)}catch(H){Ze(a,a.return,H)}}}break;case 4:if(tn(u,a),Dn(a),4&g&&Ve){v=(w=a.stateNode).containerInfo,w=w.pendingChildren;try{pf(v,w)}catch(H){Ze(a,a.return,H)}}break;case 13:tn(u,a),Dn(a),8192&(v=a.child).flags&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(yp=Tt())),4&g&&N1(a);break;case 22:var C=d!==null&&d.memoizedState!==null;if(1&a.mode?(Vt=(d=Vt)||C,tn(u,a),Vt=d):tn(u,a),Dn(a),8192&g){if(d=a.memoizedState!==null,(a.stateNode.isHidden=d)&&!C&&(1&a.mode)!=0)for(ue=a,g=a.child;g!==null;){for(u=ue=g;ue!==null;){var I=(C=ue).child;switch(C.tag){case 0:case 11:case 14:case 15:tl(4,C,C.return);break;case 1:Ao(C,C.return);var B=C.stateNode;if(typeof B.componentWillUnmount=="function"){var z=C,j=C.return;try{var re=z;B.props=re.memoizedProps,B.state=re.memoizedState,B.componentWillUnmount()}catch(H){Ze(z,j,H)}}break;case 5:Ao(C,C.return);break;case 22:if(C.memoizedState!==null){B1(u);continue}}I!==null?(I.return=C,ue=I):B1(u)}g=g.sibling}if(Ce){e:if(g=null,Ce)for(u=a;;){if(u.tag===5){if(g===null){g=u;try{v=u.stateNode,d?mC(v):yC(u.stateNode,u.memoizedProps)}catch(H){Ze(a,a.return,H)}}}else if(u.tag===6){if(g===null)try{w=u.stateNode,d?gC(w):vC(w,u.memoizedProps)}catch(H){Ze(a,a.return,H)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:tn(u,a),Dn(a),4&g&&N1(a);break;case 21:break;default:tn(u,a),Dn(a)}}function Dn(a){var u=a.flags;if(2&u){try{if(Ce){e:{for(var d=a.return;d!==null;){if(M1(d)){var g=d;break e}d=d.return}throw Error(s(160))}switch(g.tag){case 5:var v=g.stateNode;32&g.flags&&(cv(v),g.flags&=-33),up(a,k1(a),v);break;case 3:case 4:var w=g.stateNode.containerInfo;lp(a,k1(a),w);break;default:throw Error(s(161))}}}catch(C){Ze(a,a.return,C)}a.flags&=-3}4096&u&&(a.flags&=-4097)}function uP(a,u,d){ue=a,F1(a)}function F1(a,u,d){for(var g=(1&a.mode)!=0;ue!==null;){var v=ue,w=v.child;if(v.tag===22&&g){var C=v.memoizedState!==null||oh;if(!C){var I=v.alternate,B=I!==null&&I.memoizedState!==null||Vt;I=oh;var z=Vt;if(oh=C,(Vt=B)&&!z)for(ue=v;ue!==null;)B=(C=ue).child,C.tag===22&&C.memoizedState!==null?L1(v):B!==null?(B.return=C,ue=B):L1(v);for(;w!==null;)ue=w,F1(w),w=w.sibling;ue=v,oh=I,Vt=z}O1(a)}else 8772&v.subtreeFlags&&w!==null?(w.return=v,ue=w):O1(a)}}function O1(a){for(;ue!==null;){var u=ue;if(8772&u.flags){var d=u.alternate;try{if(8772&u.flags)switch(u.tag){case 0:case 11:case 15:Vt||ah(5,u);break;case 1:var g=u.stateNode;if(4&u.flags&&!Vt)if(d===null)g.componentDidMount();else{var v=u.elementType===u.type?d.memoizedProps:en(u.type,d.memoizedProps);g.componentDidUpdate(v,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var w=u.updateQueue;w!==null&&Dv(u,w,g);break;case 3:var C=u.updateQueue;if(C!==null){if(d=null,u.child!==null)switch(u.child.tag){case 5:d=le(u.child.stateNode);break;case 1:d=u.child.stateNode}Dv(u,C,d)}break;case 5:var I=u.stateNode;d===null&&4&u.flags&&uC(I,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Oe&&u.memoizedState===null){var B=u.alternate;if(B!==null){var z=B.memoizedState;if(z!==null){var j=z.dehydrated;j!==null&&FC(j)}}}break;default:throw Error(s(163))}Vt||512&u.flags&&ap(u)}catch(re){Ze(u,u.return,re)}}if(u===a){ue=null;break}if((d=u.sibling)!==null){d.return=u.return,ue=d;break}ue=u.return}}function B1(a){for(;ue!==null;){var u=ue;if(u===a){ue=null;break}var d=u.sibling;if(d!==null){d.return=u.return,ue=d;break}ue=u.return}}function L1(a){for(;ue!==null;){var u=ue;try{switch(u.tag){case 0:case 11:case 15:var d=u.return;try{ah(4,u)}catch(B){Ze(u,d,B)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var v=u.return;try{g.componentDidMount()}catch(B){Ze(u,v,B)}}var w=u.return;try{ap(u)}catch(B){Ze(u,w,B)}break;case 5:var C=u.return;try{ap(u)}catch(B){Ze(u,C,B)}}}catch(B){Ze(u,u.return,B)}if(u===a){ue=null;break}var I=u.sibling;if(I!==null){I.return=u.return,ue=I;break}ue=u.return}}var lh=0,uh=1,hh=2,ch=3,dh=4;if(typeof Symbol=="function"&&Symbol.for){var rl=Symbol.for;lh=rl("selector.component"),uh=rl("selector.has_pseudo_class"),hh=rl("selector.role"),ch=rl("selector.test_id"),dh=rl("selector.text")}function cp(a){var u=Mr(a);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((a=eC(a))===null)throw Error(s(362));return a.stateNode.current}function dp(a,u){switch(u.$$typeof){case lh:if(a.type===u.value)return!0;break;case uh:e:{u=u.value,a=[a,0];for(var d=0;d<a.length;){var g=a[d++],v=a[d++],w=u[v];if(g.tag!==5||!za(g)){for(;w!=null&&dp(g,w);)w=u[++v];if(v===u.length){u=!0;break e}for(g=g.child;g!==null;)a.push(g,v),g=g.sibling}}u=!1}return u;case hh:if(a.tag===5&&nC(a.stateNode,u.value))return!0;break;case dh:if((a.tag===5||a.tag===6)&&(a=rC(a))!==null&&0<=a.indexOf(u.value))return!0;break;case ch:if(a.tag===5&&typeof(a=a.memoizedProps["data-testname"])=="string"&&a.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function fp(a){switch(a.$$typeof){case lh:return"<"+(F(a.value)||"Unknown")+">";case uh:return":has("+(fp(a)||"")+")";case hh:return'[role="'+a.value+'"]';case dh:return'"'+a.value+'"';case ch:return'[data-testname="'+a.value+'"]';default:throw Error(s(365))}}function U1(a,u){var d=[];a=[a,0];for(var g=0;g<a.length;){var v=a[g++],w=a[g++],C=u[w];if(v.tag!==5||!za(v)){for(;C!=null&&dp(v,C);)C=u[++w];if(w===u.length)d.push(v);else for(v=v.child;v!==null;)a.push(v,w),v=v.sibling}}return d}function pp(a,u){if(!Ua)throw Error(s(363));a=U1(a=cp(a),u),u=[],a=Array.from(a);for(var d=0;d<a.length;){var g=a[d++];if(g.tag===5)za(g)||u.push(g.stateNode);else for(g=g.child;g!==null;)a.push(g),g=g.sibling}return u}var hP=Math.ceil,fh=o.ReactCurrentDispatcher,mp=o.ReactCurrentOwner,dt=o.ReactCurrentBatchConfig,De=0,Pt=null,gt=null,Bt=0,xr=0,Co=Ii(0),_t=0,nl=null,Ps=0,ph=0,gp=0,il=null,wr=null,yp=0,vp=1/0,Ni=null;function Po(){vp=Tt()+500}var z1,mh=!1,_p=null,Di=null,gh=!1,Fi=null,yh=0,sl=0,xp=null,vh=-1,_h=0;function Xt(){return 6&De?Tt():vh!==-1?vh:vh=Tt()}function Oi(a){return 1&a.mode?2&De&&Bt!==0?Bt&-Bt:QC.transition!==null?(_h===0&&(_h=xv()),_h):(a=Be)!==0?a:Es():1}function Ur(a,u,d,g){if(50<sl)throw sl=0,xp=null,Error(s(185));$a(a,d,g),2&De&&a===Pt||(a===Pt&&(!(2&De)&&(ph|=d),_t===4&&Bi(a,Bt)),hr(a,g),d===1&&De===0&&!(1&u.mode)&&(Po(),Uu&&An()))}function hr(a,u){var d=a.callbackNode;(function(v,w){for(var C=v.suspendedLanes,I=v.pingedLanes,B=v.expirationTimes,z=v.pendingLanes;0<z;){var j=31-qr(z),re=1<<j,H=B[j];H===-1?re&C&&!(re&I)||(B[j]=jC(re,w)):H<=w&&(v.expiredLanes|=re),z&=~re}})(a,u);var g=Bu(a,a===Pt?Bt:0);if(g===0)d!==null&&Ev(d),a.callbackNode=null,a.callbackPriority=0;else if(u=g&-g,a.callbackPriority!==u){if(d!=null&&Ev(d),u===1)a.tag===0?function(v){Uu=!0,Sv(v)}(H1.bind(null,a)):Sv(H1.bind(null,a)),po?JA(function(){!(6&De)&&An()}):Tf(Af,An),d=null;else{switch(wv(g)){case 1:d=Af;break;case 4:d=XC;break;case 16:default:d=bv;break;case 536870912:d=YC}d=K1(d,G1.bind(null,a))}a.callbackPriority=u,a.callbackNode=d}}function G1(a,u){if(vh=-1,_h=0,(6&De)!=0)throw Error(s(327));var d=a.callbackNode;if(Rs()&&a.callbackNode!==d)return null;var g=Bu(a,a===Pt?Bt:0);if(g===0)return null;if(30&g||g&a.expiredLanes||u)u=xh(a,g);else{u=g;var v=De;De|=2;var w=W1();for(Pt===a&&Bt===u||(Ni=null,Po(),Is(a,u));;)try{dP();break}catch(I){j1(a,I)}Df(),fh.current=w,De=v,gt!==null?u=0:(Pt=null,Bt=0,u=_t)}if(u!==0){if(u===2&&(v=Ef(a))!==0&&(g=v,u=wp(a,v)),u===1)throw d=nl,Is(a,0),Bi(a,g),hr(a,Tt()),d;if(u===6)Bi(a,g);else{if(v=a.current.alternate,(30&g)==0&&!function(I){for(var B=I;;){if(16384&B.flags){var z=B.updateQueue;if(z!==null&&(z=z.stores)!==null)for(var j=0;j<z.length;j++){var re=z[j],H=re.getSnapshot;re=re.value;try{if(!Zr(H(),re))return!1}catch{return!1}}}if(z=B.child,16384&B.subtreeFlags&&z!==null)z.return=B,B=z;else{if(B===I)break;for(;B.sibling===null;){if(B.return===null||B.return===I)return!0;B=B.return}B.sibling.return=B.return,B=B.sibling}}return!0}(v)&&((u=xh(a,g))===2&&(w=Ef(a))!==0&&(g=w,u=wp(a,w)),u===1))throw d=nl,Is(a,0),Bi(a,g),hr(a,Tt()),d;switch(a.finishedWork=v,a.finishedLanes=g,u){case 0:case 1:throw Error(s(345));case 2:case 5:Io(a,wr,Ni);break;case 3:if(Bi(a,g),(130023424&g)===g&&10<(u=yp+500-Tt())){if(Bu(a,0)!==0)break;if(((v=a.suspendedLanes)&g)!==g){Xt(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=Me(Io.bind(null,a,wr,Ni),u);break}Io(a,wr,Ni);break;case 4:if(Bi(a,g),(4194240&g)===g)break;for(u=a.eventTimes,v=-1;0<g;){var C=31-qr(g);w=1<<C,(C=u[C])>v&&(v=C),g&=~w}if(g=v,10<(g=(120>(g=Tt()-g)?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*hP(g/1960))-g)){a.timeoutHandle=Me(Io.bind(null,a,wr,Ni),g);break}Io(a,wr,Ni);break;default:throw Error(s(329))}}}return hr(a,Tt()),a.callbackNode===d?G1.bind(null,a):null}function wp(a,u){var d=il;return a.current.memoizedState.isDehydrated&&(Is(a,u).flags|=256),(a=xh(a,u))!==2&&(u=wr,wr=d,u!==null&&Ep(u)),a}function Ep(a){wr===null?wr=a:wr.push.apply(wr,a)}function Bi(a,u){for(u&=~gp,u&=~ph,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var d=31-qr(u),g=1<<d;a[d]=-1,u&=~g}}function H1(a){if(6&De)throw Error(s(327));Rs();var u=Bu(a,0);if(!(1&u))return hr(a,Tt()),null;var d=xh(a,u);if(a.tag!==0&&d===2){var g=Ef(a);g!==0&&(u=g,d=wp(a,g))}if(d===1)throw d=nl,Is(a,0),Bi(a,u),hr(a,Tt()),d;if(d===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,Io(a,wr,Ni),hr(a,Tt()),null}function $1(a){Fi!==null&&Fi.tag===0&&!(6&De)&&Rs();var u=De;De|=1;var d=dt.transition,g=Be;try{if(dt.transition=null,Be=1,a)return a()}finally{Be=g,dt.transition=d,!(6&(De=u))&&An()}}function bp(){xr=Co.current,Ke(Co)}function Is(a,u){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==Ot&&(a.timeoutHandle=Ot,St(d)),gt!==null)for(d=gt.return;d!==null;){var g=d;switch(If(g),g.tag){case 1:(g=g.type.childContextTypes)!=null&&_f();break;case 3:So(),Ke(ar),Ke(jt),jf();break;case 5:Hf(g);break;case 4:So();break;case 13:case 19:Ke(ut);break;case 10:Ff(g.type._context);break;case 22:case 23:bp()}d=d.return}if(Pt=a,gt=a=Li(a.current,null),Bt=xr=u,_t=0,nl=null,gp=ph=Ps=0,wr=il=null,As!==null){for(u=0;u<As.length;u++)if((g=(d=As[u]).interleaved)!==null){d.interleaved=null;var v=g.next,w=d.pending;if(w!==null){var C=w.next;w.next=v,g.next=C}d.pending=g}As=null}return a}function j1(a,u){for(;;){var d=gt;try{if(Df(),qu.current=th,Zu){for(var g=rt.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}Zu=!1}if(Cs=0,Ct=At=rt=null,Ya=!1,Qa=0,mp.current=null,d===null||d.return===null){_t=1,nl=u,gt=null;break}e:{var w=a,C=d.return,I=d,B=u;if(u=Bt,I.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var z=B,j=I,re=j.tag;if(!(1&j.mode)&&(re===0||re===11||re===15)){var H=j.alternate;H?(j.updateQueue=H.updateQueue,j.memoizedState=H.memoizedState,j.lanes=H.lanes):(j.updateQueue=null,j.memoizedState=null)}var Z=f1(C);if(Z!==null){Z.flags&=-257,p1(Z,C,I,0,u),1&Z.mode&&d1(w,z,u),B=z;var de=(u=Z).updateQueue;if(de===null){var Ae=new Set;Ae.add(B),u.updateQueue=Ae}else de.add(B);break e}if(!(1&u)){d1(w,z,u),Sp();break e}B=Error(s(426))}else if(qe&&1&I.mode){var W=f1(C);if(W!==null){!(65536&W.flags)&&(W.flags|=256),p1(W,C,I,0,u),kf(To(B,I));break e}}w=B=To(B,I),_t!==4&&(_t=2),il===null?il=[w]:il.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,u&=-u,w.lanes|=u,Nv(w,h1(0,B,u));break e;case 1:I=B;var k=w.type,L=w.stateNode;if(!(128&w.flags)&&(typeof k.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Di===null||!Di.has(L)))){w.flags|=65536,u&=-u,w.lanes|=u,Nv(w,c1(w,I,u));break e}}w=w.return}while(w!==null)}X1(d)}catch(Q){u=Q,gt===d&&d!==null&&(gt=d=d.return);continue}break}}function W1(){var a=fh.current;return fh.current=th,a===null?th:a}function Sp(){_t!==0&&_t!==3&&_t!==2||(_t=4),Pt===null||!(268435455&Ps)&&!(268435455&ph)||Bi(Pt,Bt)}function xh(a,u){var d=De;De|=2;var g=W1();for(Pt===a&&Bt===u||(Ni=null,Is(a,u));;)try{cP();break}catch(v){j1(a,v)}if(Df(),De=d,fh.current=g,gt!==null)throw Error(s(261));return Pt=null,Bt=0,_t}function cP(){for(;gt!==null;)V1(gt)}function dP(){for(;gt!==null&&!WC();)V1(gt)}function V1(a){var u=z1(a.alternate,a,xr);a.memoizedProps=a.pendingProps,u===null?X1(a):gt=u,mp.current=null}function X1(a){var u=a;do{var d=u.alternate;if(a=u.return,(32768&u.flags)==0){if((d=oP(d,u,xr))!==null)return void(gt=d)}else{if((d=aP(d,u))!==null)return d.flags&=32767,void(gt=d);if(a===null)return _t=6,void(gt=null);a.flags|=32768,a.subtreeFlags=0,a.deletions=null}if((u=u.sibling)!==null)return void(gt=u);gt=u=a}while(u!==null);_t===0&&(_t=5)}function Io(a,u,d){var g=Be,v=dt.transition;try{dt.transition=null,Be=1,function(w,C,I,B){do Rs();while(Fi!==null);if(6&De)throw Error(s(327));I=w.finishedWork;var z=w.finishedLanes;if(I===null)return null;if(w.finishedWork=null,w.finishedLanes=0,I===w.current)throw Error(s(177));w.callbackNode=null,w.callbackPriority=0;var j=I.lanes|I.childLanes;if(function(Z,de){var Ae=Z.pendingLanes&~de;Z.pendingLanes=de,Z.suspendedLanes=0,Z.pingedLanes=0,Z.expiredLanes&=de,Z.mutableReadLanes&=de,Z.entangledLanes&=de,de=Z.entanglements;var W=Z.eventTimes;for(Z=Z.expirationTimes;0<Ae;){var k=31-qr(Ae),L=1<<k;de[k]=0,W[k]=-1,Z[k]=-1,Ae&=~L}}(w,j),w===Pt&&(gt=Pt=null,Bt=0),!(2064&I.subtreeFlags)&&!(2064&I.flags)||gh||(gh=!0,K1(bv,function(){return Rs(),null})),j=(15990&I.flags)!=0,(15990&I.subtreeFlags)!=0||j){j=dt.transition,dt.transition=null;var re=Be;Be=1;var H=De;De|=4,mp.current=null,function(Z,de){for(G(Z.containerInfo),ue=de;ue!==null;)if(de=(Z=ue).child,(1028&Z.subtreeFlags)!=0&&de!==null)de.return=Z,ue=de;else for(;ue!==null;){Z=ue;try{var Ae=Z.alternate;if(1024&Z.flags)switch(Z.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ae!==null){var W=Ae.memoizedProps,k=Ae.memoizedState,L=Z.stateNode,Q=L.getSnapshotBeforeUpdate(Z.elementType===Z.type?W:en(Z.type,W),k);L.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:Ce&&_C(Z.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(ve){Ze(Z,Z.return,ve)}if((de=Z.sibling)!==null){de.return=Z.return,ue=de;break}ue=Z.return}Ae=I1,I1=!1}(w,I),D1(I,w),D(w.containerInfo),w.current=I,uP(I),VC(),De=H,Be=re,dt.transition=j}else w.current=I;if(gh&&(gh=!1,Fi=w,yh=z),j=w.pendingLanes,j===0&&(Di=null),function(Z){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Lu,Z,void 0,(128&Z.current.flags)==128)}catch{}}(I.stateNode),hr(w,Tt()),C!==null)for(B=w.onRecoverableError,I=0;I<C.length;I++)z=C[I],B(z.value,{componentStack:z.stack,digest:z.digest});if(mh)throw mh=!1,w=_p,_p=null,w;1&yh&&w.tag!==0&&Rs(),j=w.pendingLanes,1&j?w===xp?sl++:(sl=0,xp=w):sl=0,An()}(a,u,d,g)}finally{dt.transition=v,Be=g}return null}function Rs(){if(Fi!==null){var a=wv(yh),u=dt.transition,d=Be;try{if(dt.transition=null,Be=16>a?16:a,Fi===null)var g=!1;else{if(a=Fi,Fi=null,yh=0,(6&De)!=0)throw Error(s(331));var v=De;for(De|=4,ue=a.current;ue!==null;){var w=ue,C=w.child;if(16&ue.flags){var I=w.deletions;if(I!==null){for(var B=0;B<I.length;B++){var z=I[B];for(ue=z;ue!==null;){var j=ue;switch(j.tag){case 0:case 11:case 15:tl(8,j,w)}var re=j.child;if(re!==null)re.return=j,ue=re;else for(;ue!==null;){var H=(j=ue).sibling,Z=j.return;if(R1(j),j===z){ue=null;break}if(H!==null){H.return=Z,ue=H;break}ue=Z}}}var de=w.alternate;if(de!==null){var Ae=de.child;if(Ae!==null){de.child=null;do{var W=Ae.sibling;Ae.sibling=null,Ae=W}while(Ae!==null)}}ue=w}}if(2064&w.subtreeFlags&&C!==null)C.return=w,ue=C;else e:for(;ue!==null;){if(2048&(w=ue).flags)switch(w.tag){case 0:case 11:case 15:tl(9,w,w.return)}var k=w.sibling;if(k!==null){k.return=w.return,ue=k;break e}ue=w.return}}var L=a.current;for(ue=L;ue!==null;){var Q=(C=ue).child;if(2064&C.subtreeFlags&&Q!==null)Q.return=C,ue=Q;else e:for(C=L;ue!==null;){if(2048&(I=ue).flags)try{switch(I.tag){case 0:case 11:case 15:ah(9,I)}}catch(Ue){Ze(I,I.return,Ue)}if(I===C){ue=null;break e}var ve=I.sibling;if(ve!==null){ve.return=I.return,ue=ve;break e}ue=I.return}}if(De=v,An(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Lu,a)}catch{}g=!0}return g}finally{Be=d,dt.transition=u}}return!1}function Y1(a,u,d){a=ki(a,u=h1(0,u=To(d,u),1),1),u=Xt(),a!==null&&($a(a,1,u),hr(a,u))}function Ze(a,u,d){if(a.tag===3)Y1(a,a,d);else for(;u!==null;){if(u.tag===3){Y1(u,a,d);break}if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Di===null||!Di.has(g))){u=ki(u,a=c1(u,a=To(d,a),1),1),a=Xt(),u!==null&&($a(u,1,a),hr(u,a));break}}u=u.return}}function fP(a,u,d){var g=a.pingCache;g!==null&&g.delete(u),u=Xt(),a.pingedLanes|=a.suspendedLanes&d,Pt===a&&(Bt&d)===d&&(_t===4||_t===3&&(130023424&Bt)===Bt&&500>Tt()-yp?Is(a,0):gp|=d),hr(a,u)}function Q1(a,u){u===0&&(1&a.mode?(u=wf,!(130023424&(wf<<=1))&&(wf=4194304)):u=1);var d=Xt();(a=Pn(a,u))!==null&&($a(a,u,d),hr(a,d))}function pP(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),Q1(a,d)}function mP(a,u){var d=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(d=v.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(u),Q1(a,d)}function K1(a,u){return Tf(a,u)}function gP(a,u,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(a,u,d,g){return new gP(a,u,d,g)}function Tp(a){return!(!(a=a.prototype)||!a.isReactComponent)}function Li(a,u){var d=a.alternate;return d===null?((d=zr(a.tag,u,a.key,a.mode)).elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=14680064&a.flags,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function wh(a,u,d,g,v,w){var C=2;if(g=a,typeof a=="function")Tp(a)&&(C=1);else if(typeof a=="string")C=5;else e:switch(a){case c:return Ms(d.children,v,w,u);case f:C=8,v|=8;break;case p:return(a=zr(12,d,u,2|v)).elementType=p,a.lanes=w,a;case E:return(a=zr(13,d,u,v)).elementType=E,a.lanes=w,a;case T:return(a=zr(19,d,u,v)).elementType=T,a.lanes=w,a;case x:return Eh(d,v,w,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case m:C=10;break e;case y:C=9;break e;case _:C=11;break e;case S:C=14;break e;case b:C=16,g=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return(u=zr(C,d,u,v)).elementType=a,u.type=g,u.lanes=w,u}function Ms(a,u,d,g){return(a=zr(7,a,g,u)).lanes=d,a}function Eh(a,u,d,g){return(a=zr(22,a,g,u)).elementType=x,a.lanes=d,a.stateNode={isHidden:!1},a}function Ap(a,u,d){return(a=zr(6,a,null,u)).lanes=d,a}function Cp(a,u,d){return(u=zr(4,a.children!==null?a.children:[],a.key,u)).lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function yP(a,u,d,g,v){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ot,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bf(0),this.expirationTimes=bf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bf(0),this.identifierPrefix=g,this.onRecoverableError=v,Oe&&(this.mutableSourceEagerHydrationData=null)}function q1(a,u,d,g,v,w,C,I,B){return a=new yP(a,u,d,I,B),u===1?(u=1,w===!0&&(u|=8)):u=0,w=zr(3,null,null,u),a.current=w,w.stateNode=a,w.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lf(w),a}function Z1(a){if(!a)return Ri;e:{if(N(a=a._reactInternals)!==a||a.tag!==1)throw Error(s(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(vr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(a.tag===1){var d=a.type;if(vr(d))return vv(a,d,u)}return u}function J1(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return(a=fe(u))===null?null:a.stateNode}function e_(a,u){if((a=a.memoizedState)!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function bh(a,u){e_(a,u),(a=a.alternate)&&e_(a,u)}function vP(a){return(a=fe(a))===null?null:a.stateNode}function _P(){return null}return z1=function(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps||ar.current)lr=!0;else{if(!(a.lanes&d)&&!(128&u.flags))return lr=!1,function(re,H,Z){switch(H.tag){case 3:w1(H),_o();break;case 5:Hv(H);break;case 1:vr(H.type)&&Ou(H);break;case 4:Gf(H,H.stateNode.containerInfo);break;case 10:Rv(0,H.type._context,H.memoizedProps.value);break;case 13:var de=H.memoizedState;if(de!==null)return de.dehydrated!==null?(He(ut,1&ut.current),H.flags|=128,null):Z&H.child.childLanes?b1(re,H,Z):(He(ut,1&ut.current),(re=oi(re,H,Z))!==null?re.sibling:null);He(ut,1&ut.current);break;case 19:if(de=(Z&H.childLanes)!=0,(128&re.flags)!=0){if(de)return T1(re,H,Z);H.flags|=128}var Ae=H.memoizedState;if(Ae!==null&&(Ae.rendering=null,Ae.tail=null,Ae.lastEffect=null),He(ut,ut.current),de)break;return null;case 22:case 23:return H.lanes=0,v1(re,H,Z)}return oi(re,H,Z)}(a,u,d);lr=(131072&a.flags)!=0}else lr=!1,qe&&1048576&u.flags&&Tv(u,Gu,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;sh(a,u),a=u.pendingProps;var v=go(u,jt.current);wo(u,d),v=Xf(null,u,g,a,v,d);var w=Yf();return u.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,vr(g)?(w=!0,Ou(u)):w=!1,u.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Lf(u),v.updater=Yu,u.stateNode=v,v._reactInternals=u,zf(u,g,a,d),u=rp(null,u,g,!0,w,d)):(u.tag=0,qe&&w&&Pf(u),ur(null,u,v,d),u=u.child),u;case 16:g=u.elementType;e:{switch(sh(a,u),a=u.pendingProps,g=(v=g._init)(g._payload),u.type=g,v=u.tag=function(re){if(typeof re=="function")return Tp(re)?1:0;if(re!=null){if((re=re.$$typeof)===_)return 11;if(re===S)return 14}return 2}(g),a=en(g,a),v){case 0:u=tp(null,u,g,a,d);break e;case 1:u=x1(null,u,g,a,d);break e;case 11:u=m1(null,u,g,a,d);break e;case 14:u=g1(null,u,g,en(g.type,a),d);break e}throw Error(s(306,g,""))}return u;case 0:return g=u.type,v=u.pendingProps,tp(a,u,g,v=u.elementType===g?v:en(g,v),d);case 1:return g=u.type,v=u.pendingProps,x1(a,u,g,v=u.elementType===g?v:en(g,v),d);case 3:e:{if(w1(u),a===null)throw Error(s(387));g=u.pendingProps,v=(w=u.memoizedState).element,kv(a,u),Xu(u,g,null,d);var C=u.memoizedState;if(g=C.element,Oe&&w.isDehydrated){if(w={element:g,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},u.updateQueue.baseState=w,u.memoizedState=w,256&u.flags){u=E1(a,u,g,d,v=To(Error(s(423)),u));break e}if(g!==v){u=E1(a,u,g,d,v=To(Error(s(424)),u));break e}for(Oe&&(Fr=PC(u.stateNode.containerInfo),_r=u,qe=!0,Jr=null,ja=!1),d=Gv(u,null,g,d),u.child=d;d;)d.flags=-3&d.flags|4096,d=d.sibling}else{if(_o(),g===v){u=oi(a,u,d);break e}ur(a,u,g,d)}u=u.child}return u;case 5:return Hv(u),a===null&&Mf(u),g=u.type,v=u.pendingProps,w=a!==null?a.memoizedProps:null,C=v.children,Pe(g,v)?C=null:w!==null&&Pe(g,w)&&(u.flags|=32),_1(a,u),ur(a,u,C,d),u.child;case 6:return a===null&&Mf(u),null;case 13:return b1(a,u,d);case 4:return Gf(u,u.stateNode.containerInfo),g=u.pendingProps,a===null?u.child=Eo(u,null,g,d):ur(a,u,g,d),u.child;case 11:return g=u.type,v=u.pendingProps,m1(a,u,g,v=u.elementType===g?v:en(g,v),d);case 7:return ur(a,u,u.pendingProps,d),u.child;case 8:case 12:return ur(a,u,u.pendingProps.children,d),u.child;case 10:e:{if(g=u.type._context,v=u.pendingProps,w=u.memoizedProps,Rv(0,g,C=v.value),w!==null)if(Zr(w.value,C)){if(w.children===v.children&&!ar.current){u=oi(a,u,d);break e}}else for((w=u.child)!==null&&(w.return=u);w!==null;){var I=w.dependencies;if(I!==null){C=w.child;for(var B=I.firstContext;B!==null;){if(B.context===g){if(w.tag===1){(B=si(-1,d&-d)).tag=2;var z=w.updateQueue;if(z!==null){var j=(z=z.shared).pending;j===null?B.next=B:(B.next=j.next,j.next=B),z.pending=B}}w.lanes|=d,(B=w.alternate)!==null&&(B.lanes|=d),Of(w.return,d,u),I.lanes|=d;break}B=B.next}}else if(w.tag===10)C=w.type===u.type?null:w.child;else if(w.tag===18){if((C=w.return)===null)throw Error(s(341));C.lanes|=d,(I=C.alternate)!==null&&(I.lanes|=d),Of(C,d,u),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===u){C=null;break}if((w=C.sibling)!==null){w.return=C.return,C=w;break}C=C.return}w=C}ur(a,u,v.children,d),u=u.child}return u;case 9:return v=u.type,g=u.pendingProps.children,wo(u,d),g=g(v=Or(v)),u.flags|=1,ur(a,u,g,d),u.child;case 14:return v=en(g=u.type,u.pendingProps),g1(a,u,g,v=en(g.type,v),d);case 15:return y1(a,u,u.type,u.pendingProps,d);case 17:return g=u.type,v=u.pendingProps,v=u.elementType===g?v:en(g,v),sh(a,u),u.tag=1,vr(g)?(a=!0,Ou(u)):a=!1,wo(u,d),Bv(u,g,v),zf(u,g,v,d),rp(null,u,g,!0,a,d);case 19:return T1(a,u,d);case 22:return v1(a,u,d)}throw Error(s(156,u.tag))},e.attemptContinuousHydration=function(a){if(a.tag===13){var u=Pn(a,134217728);u!==null&&Ur(u,a,134217728,Xt()),bh(a,134217728)}},e.attemptDiscreteHydration=function(a){if(a.tag===13){var u=Pn(a,1);u!==null&&Ur(u,a,1,Xt()),bh(a,1)}},e.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var u=Oi(a),d=Pn(a,u);d!==null&&Ur(d,a,u,Xt()),bh(a,u)}},e.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var d=Ha(u.pendingLanes);d!==0&&(Sf(u,1|d),hr(u,Tt()),!(6&De)&&(Po(),An()))}break;case 13:$1(function(){var g=Pn(a,1);if(g!==null){var v=Xt();Ur(g,a,1,v)}}),bh(a,1)}},e.batchedUpdates=function(a,u){var d=De;De|=1;try{return a(u)}finally{(De=d)===0&&(Po(),Uu&&An())}},e.createComponentSelector=function(a){return{$$typeof:lh,value:a}},e.createContainer=function(a,u,d,g,v,w,C){return q1(a,u,!1,null,0,g,0,w,C)},e.createHasPseudoClassSelector=function(a){return{$$typeof:uh,value:a}},e.createHydrationContainer=function(a,u,d,g,v,w,C,I,B){return(a=q1(d,g,!0,a,0,w,0,I,B)).context=Z1(null),d=a.current,(w=si(g=Xt(),v=Oi(d))).callback=u??null,ki(d,w,v),a.current.lanes=v,$a(a,v,g),hr(a,g),a},e.createPortal=function(a,u,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:g==null?null:""+g,children:a,containerInfo:u,implementation:d}},e.createRoleSelector=function(a){return{$$typeof:hh,value:a}},e.createTestNameSelector=function(a){return{$$typeof:ch,value:a}},e.createTextSelector=function(a){return{$$typeof:dh,value:a}},e.deferredUpdates=function(a){var u=Be,d=dt.transition;try{return dt.transition=null,Be=16,a()}finally{Be=u,dt.transition=d}},e.discreteUpdates=function(a,u,d,g,v){var w=Be,C=dt.transition;try{return dt.transition=null,Be=1,a(u,d,g,v)}finally{Be=w,dt.transition=C,De===0&&Po()}},e.findAllNodes=pp,e.findBoundingRects=function(a,u){if(!Ua)throw Error(s(363));u=pp(a,u),a=[];for(var d=0;d<u.length;d++)a.push(tC(u[d]));for(u=a.length-1;0<u;u--)for(var g=(d=a[u]).x,v=g+d.width,w=d.y,C=w+d.height,I=u-1;0<=I;I--)if(u!==I){var B=a[I],z=B.x,j=z+B.width,re=B.y,H=re+B.height;if(g>=z&&w>=re&&v<=j&&C<=H){a.splice(u,1);break}if(!(g!==z||d.width!==B.width||H<w||re>C)){re>w&&(B.height+=re-w,B.y=w),H<C&&(B.height=C-re),a.splice(u,1);break}if(!(w!==re||d.height!==B.height||j<g||z>v)){z>g&&(B.width+=z-g,B.x=g),j<v&&(B.width=v-z),a.splice(u,1);break}}return a},e.findHostInstance=J1,e.findHostInstanceWithNoPortals=function(a){return(a=(a=$(a))!==null?O(a):null)===null?null:a.stateNode},e.findHostInstanceWithWarning=function(a){return J1(a)},e.flushControlled=function(a){var u=De;De|=1;var d=dt.transition,g=Be;try{dt.transition=null,Be=1,a()}finally{Be=g,dt.transition=d,(De=u)===0&&(Po(),An())}},e.flushPassiveEffects=Rs,e.flushSync=$1,e.focusWithin=function(a,u){if(!Ua)throw Error(s(363));for(u=U1(a=cp(a),u),u=Array.from(u),a=0;a<u.length;){var d=u[a++];if(!za(d)){if(d.tag===5&&iC(d.stateNode))return!0;for(d=d.child;d!==null;)u.push(d),d=d.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Be},e.getFindAllNodesFailureDescription=function(a,u){if(!Ua)throw Error(s(363));var d=0,g=[];a=[cp(a),0];for(var v=0;v<a.length;){var w=a[v++],C=a[v++],I=u[C];if((w.tag!==5||!za(w))&&(dp(w,I)&&(g.push(fp(I)),++C>d&&(d=C)),C<u.length))for(w=w.child;w!==null;)a.push(w,C),w=w.sibling}if(d<u.length){for(a=[];d<u.length;d++)a.push(fp(u[d]));return`findAllNodes was able to match part of the selector:
  `+g.join(" > ")+`

No matching component was found for:
  `+a.join(" > ")}return null},e.getPublicRootInstance=function(a){return(a=a.current).child?a.child.tag===5?le(a.child.stateNode):a.child.stateNode:null},e.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:vP,findFiberByHostInstance:a.findFiberByHostInstance||_P,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)a=!0;else{try{Lu=u.inject(a),Tn=u}catch{}a=!!u.checkDCE}}return a},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(a,u,d,g){if(!Ua)throw Error(s(363));a=pp(a,u);var v=sC(a,d,g).disconnect;return{disconnect:function(){v()}}},e.registerMutableSourceForHydration=function(a,u){var d=u._getVersion;d=d(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,d]:a.mutableSourceEagerHydrationData.push(u,d)},e.runWithPriority=function(a,u){var d=Be;try{return Be=a,u()}finally{Be=d}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(a,u,d,g){var v=u.current,w=Xt(),C=Oi(v);return d=Z1(d),u.context===null?u.context=d:u.pendingContext=d,(u=si(w,C)).payload={element:a},(g=g===void 0?null:g)!==null&&(u.callback=g),(a=ki(v,u,C))!==null&&(Ur(a,v,C,w),Vu(a,v,C)),C},e}),Ww}({get exports(){return B0},set exports(t){B0=t}}).exports=IO();var RO=rO(B0),CA={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},U0={},ac={get exports(){return U0},set exports(t){U0=t}};(function(){var t,e,r,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?ac.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(ac.exports=function(){return(t()-i)/1e6},e=process.hrtime,n=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(ac.exports=function(){return Date.now()-r},r=Date.now()):(ac.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(tO);var Yw,ia={},Ds={};({get exports(){return ia},set exports(t){ia=t}}).exports=(Yw||(Yw=1,Ds.ConcurrentRoot=1,Ds.ContinuousEventPriority=4,Ds.DefaultEventPriority=16,Ds.DiscreteEventPriority=1,Ds.IdleEventPriority=536870912,Ds.LegacyRoot=0),Ds);var MO={};function Gm(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function PA(t,e){var r,n,i;(r=t.willUnmount)===null||r===void 0||r.call(t,t,e),((n=t.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&Ci(t.children).forEach(function(s){PA(s,t)})}function Qw(t,e){var r;PA(e,t),t.removeChild(e);var n=(r=e.config)!==null&&r!==void 0?r:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,l=o===void 0||o,h=n.destroyTexture,c=h!==void 0&&h,f=n.destroyBaseTexture,p=f!==void 0&&f;s&&e.destroy({children:l,texture:c,baseTexture:p})}function Kw(t,e,r){ct(e!==r,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var n=t.getChildIndex(r);t.addChildAt(e,n)}var qw=null,pn=RO({getRootHostContext:function(){return MO},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return ia.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ia.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ia.ContinuousEventPriority;default:return ia.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=TO[t];if(typeof s=="function"&&(e=s(i,n)),!e){var o=AA[t];o&&((e=o.create(n,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((r=e)===null||r===void 0?void 0:r.applyProps)=="function"?e.applyProps:ti)(e,{},n)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var r=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=r},finalizeInitialChildren:function(t,e,r){return!1},prepareUpdate:function(t,e,r,n,i,s){return qw=function(o,l,h,c){var f=null;for(var p in h)!c.hasOwnProperty(p)&&h.hasOwnProperty(p)&&h[p]!==null&&(p===F0||(f||(f=[]),f.push(p,null)));for(var m in c){var y=c[m],_=h!==null?h[m]:void 0;!c.hasOwnProperty(m)||y===_||y===null&&_===null||m===F0||(f||(f=[]),f.push(m,y))}return f}(0,0,r,n)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var r=e.alpha===void 0||e.alpha>0,n=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(r&&n&&i)},createTextInstance:function(t,e,r){ct(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:U0,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Gm.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Gm.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Gm.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Qw.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Qw.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:Kw,insertInContainerBefore:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Kw.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,r,n,i){var s,o,l=t&&t.applyProps;typeof l!="function"&&(l=ti),(l(t,n,i)||qw)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,r,n,i){},commitTextUpdate:function(t,e,r){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),kO=CA.dependencies["react-dom"].replace(/[^0-9.]/g,""),NO=CA.name;pn.injectIntoDevTools({bundleType:0,version:kO,rendererPackageName:NO,findHostInstanceByFiber:pn.findHostInstance});var ds=new Map;function IA(t){if(ct(Jt.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),ds.has(t)){var e=ds.get(t).pixiFiberContainer;pn.updateContainer(null,e,void 0,function(){ds.delete(t)})}}function RA(t){ct(Jt.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=ds.get(t);if(ct(!e,"Pixi React: createRoot should only be called once"),!e){var r=pn.createContainer(t);e={pixiFiberContainer:r,reactRoot:{render:function(n){return pn.updateContainer(n,r,void 0),pn.getPublicRootInstance(r)},unmount:function(){IA(t),ds.delete(t)}}},ds.set(t,e)}return e.reactRoot}function DO(t,e,r){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),ds.has(e)?n=ds.get(e).reactRoot:n=RA(e),n.render(t)}function FO(t){IA(t)}function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eu.apply(this,arguments)}function OO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bA(n.key),n)}}function ui(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pd(t,e){return Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Pd(t,e)}function LO(t,e){if(e&&(Cr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ui(t)}function Id(t){return Id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Id(t)}var cf=Tr.createContext(null),MA=cf.Provider,kA=cf.Consumer,UO=function(t){var e=Tr.forwardRef(function(r,n){return Tr.createElement(kA,null,function(i){return Tr.createElement(t,Eu({},r,{ref:n,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function zO(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=Id(t);if(e){var i=Id(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LO(this,r)}}function Zw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zw(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Jw=function(){},NA={width:Ye.number,height:Ye.number,onMount:Ye.func,onUnmount:Ye.func,raf:Ye.bool,renderOnComponentChange:Ye.bool,children:Ye.node,options:Ye.shape({autoStart:Ye.bool,width:Ye.number,height:Ye.number,useContextAlpha:Ye.bool,backgroundAlpha:Ye.number,autoDensity:Ye.bool,antialias:Ye.bool,preserveDrawingBuffer:Ye.bool,resolution:Ye.number,forceCanvas:Ye.bool,backgroundColor:Ye.number,clearBeforeRender:Ye.bool,powerPreference:Ye.string,sharedTicker:Ye.bool,sharedLoader:Ye.bool,resizeTo:function(t,e){var r=t[e];r&&ct(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Cr(r),", expect `window` or an `HTMLElement`."))},view:function(t,e,r){var n=t[e];n&&ct(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Cr(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},GO={width:800,height:600,onMount:Jw,onUnmount:Jw,raf:!0,renderOnComponentChange:!0},z0=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Pd(s,o)})(i,Tr.Component);var e,r,n=zO(i);function i(){var s;OO(this,i);for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return pt(ui(s=n.call.apply(n,[this].concat(l))),"_canvas",null),pt(ui(s),"_mediaQuery",null),pt(ui(s),"_ticker",null),pt(ui(s),"_needsUpdate",!0),pt(ui(s),"app",null),pt(ui(s),"updateSize",function(){var c=s.props,f=c.width,p=c.height,m=c.options;m!=null&&m.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(f,p)}),pt(ui(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),pt(ui(s),"renderStage",function(){var c=s.props,f=c.renderOnComponentChange;!c.raf&&f&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(r=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,l=s.width,h=s.height,c=s.options,f=s.raf,p=s.renderOnComponentChange;this.app=new hf(lc(lc({width:l,height:h,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[f?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=pn.createContainer(this.app.stage),pn.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),p&&!f&&(this._ticker=new kt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,l){var h,c=this.props,f=c.width,p=c.height,m=c.raf,y=c.renderOnComponentChange,_=c.options;(_==null?void 0:_.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(_==null?void 0:_.resolution)&&(this.app.renderer.resolution=_.resolution,this.resetInteractionManager()),s.height===p&&s.width===f&&((h=s.options)===null||h===void 0?void 0:h.resolution)===(_==null?void 0:_.resolution)||this.updateSize(),s.raf!==m&&this.app.ticker[m?"start":"stop"](),pn.updateContainer(this.getChildren(),this.mountNode,this),s.width===f&&s.height===p&&s.raf===m&&s.renderOnComponentChange===y&&s.options===_||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return Tr.createElement(MA,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),pn.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,l=this,h=this.props.options;return h&&h.view?(ct(h.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Tr.createElement("canvas",Eu({},(s=this.props,o=[].concat(Ci(Object.keys(NA)),Ci(Object.keys(O0))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,f){return lc(lc({},c),{},pt({},f,s[f]))},{})),{ref:function(c){return l._canvas=c}}))}}])&&BO(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),i}();z0.propTypes=NA,z0.defaultProps=GO;var HO=z0;function DA(){var t=q.useContext(cf);return ct(t instanceof hf,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function $O(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=DA();ct(typeof t=="function","`useTick` needs a callback function."),ct(r instanceof hf,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var n=q.useRef(null);q.useEffect(function(){n.current=t},[t]),q.useEffect(function(){if(e){var i=function(s){return n.current.apply(r.ticker,[s,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[e])}function jO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G0(t,e,r){return G0=jO()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var l=new(Function.bind.apply(n,o));return s&&Pd(l,s.prototype),l},G0.apply(null,arguments)}var WO=["children","apply"];function eE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var VO=function(t,e){ct(Cr(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(e),n=function(i){var s=i.children,o=i.apply,l=ws(i,WO),h=q.useRef(q.useMemo(function(){return r.map(function(p){var m,y=(l==null||(m=l[p])===null||m===void 0?void 0:m.construct)||[];return G0(e[p],Ci(y))})},[r])),c=q.useMemo(function(){return r.reduce(function(p,m,y){return uc(uc({},p),{},pt({},m,h.current[y]))},{})},[r]),f=q.useMemo(function(){return Object.keys(l).filter(TA(SA(r))).reduce(function(p,m){return uc(uc({},p),{},pt({},m,l[m]))},{})},[l,r]);return r.forEach(function(p,m){return Object.assign(h.current[m],l[p])}),o&&function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return m.every(function(_){return typeof _=="function"})}(o)&&o.call(t,c),Tr.createElement(t,Eu({},f,{filters:h.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:Ye.node,apply:Ye.func},n},XO=yr.BitmapText,YO=yr.Container,QO=yr.Graphics,KO=yr.NineSlicePlane,qO=yr.ParticleContainer,ZO=yr.Sprite,JO=yr.AnimatedSprite,eB=yr.Text,tB=yr.TilingSprite,rB=yr.SimpleMesh,nB=yr.SimpleRope;const iB=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:JO,AppConsumer:kA,AppContext:cf,AppProvider:MA,BitmapText:XO,Container:YO,Graphics:QO,NineSlicePlane:KO,ParticleContainer:qO,PixiComponent:AO,PixiFiber:pn,SimpleMesh:rB,SimpleRope:nB,Sprite:ZO,Stage:HO,TYPES:yr,Text:eB,TilingSprite:tB,applyDefaultProps:ti,createRoot:RA,eventHandlers:Cd,render:DO,unmountComponentAtNode:FO,useApp:DA,useTick:$O,withFilters:VO,withPixiApp:UO},Symbol.toStringTag,{value:"Module"})),sB=gE(iB);qd.exports=sB;var et=qd.exports;const FA=new We;tt.prototype._cacheAsBitmap=!1;tt.prototype._cacheData=null;tt.prototype._cacheAsBitmapResolution=null;tt.prototype._cacheAsBitmapMultisample=null;class oB{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(tt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new oB),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});tt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};tt.prototype._initCachedDisplayObject=function(t){var m,y;if((m=this._cacheData)!=null&&m.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(new we,!0);if((y=this.filters)!=null&&y.length){const _=this.filters[0].padding;r.pad(_)}const n=this.cacheAsBitmapResolution||t.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,h=fo.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${ao()}`;this._cacheData.textureCacheId=c,Se.addToCache(h.baseTexture,c),ie.addToCache(h,c);const f=this.transform.localTransform.copyTo(FA).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const p=new _s(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(r.x/r.width),p.anchor.y=-(r.y/r.height),p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)};tt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};tt.prototype._initCachedDisplayObjectCanvas=function(t){var f;if((f=this._cacheData)!=null&&f.sprite)return;const e=this.getLocalBounds(new we,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=fo.create({width:e.width,height:e.height,resolution:s}),l=`cacheAsBitmap_${ao()}`;this._cacheData.textureCacheId=l,Se.addToCache(o.baseTexture,l),ie.addToCache(o,l);const h=FA;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new _s(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};tt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};tt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};tt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Se.removeFromCache(this._cacheData.textureCacheId),ie.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};tt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};tt.prototype.name=null;Jt.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const i=this.children[r];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};tt.prototype.getGlobalPosition=function(t=new Ee,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var aB=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class lB extends nr{constructor(e=1){super(v3,aB,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const uB={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},hB=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function cB(t){const e=uB[t],r=e.length;let n=hB,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let l=0;l<t;l++){let h=s.replace("%index%",l.toString());o=l,l>=r&&(o=t-l-1),h=h.replace("%value%",e[o].toString()),i+=h,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const dB=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function fB(t,e){const r=Math.ceil(t/2);let n=dB,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let l=s.replace("%index%",o.toString());l=l.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}class H0 extends nr{constructor(e,r=8,n=4,i=nr.defaultResolution,s=5){const o=fB(s,e),l=cB(s);super(o,l),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let l=r,h=s;this.state.blend=!1,e.applyFilter(this,l,h,Wn.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(l,Wn.BLIT),this.uniforms.uSampler=h;const f=h;h=l,l=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,h,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class pB extends nr{constructor(e=8,r=4,n=nr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new H0(!0,e,r,n,i),this.blurYFilter=new H0(!1,e,r,n,i),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const l=e.getFilterTexture();this.blurXFilter.apply(e,r,l,Wn.CLEAR),this.blurYFilter.apply(e,l,n,i),e.returnFilterTexture(l)}else o?this.blurYFilter.apply(e,r,n,i):this.blurXFilter.apply(e,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var mB=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class $0 extends nr{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(XT,mB,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,i,s]=je.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,l=s(o),h=n+(1-n)*o,c=o*(1-n)-l*i,f=o*(1-n)+l*i,p=o*(1-n)+l*i,m=n+o*(1-n),y=o*(1-n)-l*i,_=o*(1-n)-l*i,E=o*(1-n)+l*i,T=n+o*(1-n),S=[h,c,f,0,0,p,m,y,0,0,_,E,T,0,0,0,0,0,1,0];this._loadMatrix(S,r)}contrast(e,r){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,i,s){e=e||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=je.shared,[l,h,c]=o.setValue(n).toArray(),[f,p,m]=o.setValue(i).toArray(),y=[.3,.59,.11,0,0,l,h,c,e,0,f,p,m,r,0,l-f,h-p,c-m,0,0];this._loadMatrix(y,s)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}$0.prototype.grayscale=$0.prototype.greyscale;var gB=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,yB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class vB extends nr{constructor(e,r){const n=new We;e.renderable=!1,super(yB,gB,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new Ee(r,r)}apply(e,r,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),e.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var _B=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,xB=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class wB extends nr{constructor(){super(xB,_B)}}var EB=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class bB extends nr{constructor(e=.5,r=Math.random()){super(XT,EB,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const tE={AlphaFilter:lB,BlurFilter:pB,BlurFilterPass:H0,ColorMatrixFilter:$0,DisplacementFilter:vB,FXAAFilter:wB,NoiseFilter:bB};Object.entries(tE).forEach(([t,e])=>{Object.defineProperty(tE,t,{get(){return Ie("7.1.0",`filters.${t} has moved to ${t}`),e}})});class SB{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(kt.system.add(this.tickerUpdate,this,Jn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(kt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ki=new SB;class Du{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Du.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Ee,this.page=new Ee,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Rd extends Du{constructor(){super(...arguments),this.client=new Ee,this.movement=new Ee,this.offset=new Ee,this.global=new Ee,this.screen=new Ee}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,i,s,o,l,h,c,f,p,m,y,_,E){throw new Error("Method not implemented.")}}class an extends Rd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class va extends Rd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}va.DOM_DELTA_PIXEL=0,va.DOM_DELTA_LINE=1,va.DOM_DELTA_PAGE=2;const TB=2048,AB=new Ee,Hm=new Ee;class CB{constructor(e){this.dispatch=new Iu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Ki.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,AB.set(e,r),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<TB&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,i,s,o=!1){let l=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Ki.pauseUpdate=!1),e.interactiveChildren&&e.children){const f=e.children;for(let p=f.length-1;p>=0;p--){const m=f[p],y=this.hitTestMoveRecursive(m,this._isInteractive(r)?r:m.eventMode,n,i,s,o||s(e,n));if(y){if(y.length>0&&!y[y.length-1].parent)continue;const _=e.isInteractive();(y.length>0||_)&&(_&&this._allInteractiveElements.push(e),y.push(e)),this._hitElements.length===0&&(this._hitElements=y),l=!0}}}const h=this._isInteractive(r),c=e.isInteractive();return h&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:l?this._hitElements:h&&!s(e,n)&&i(e,n)?c?[e]:[]:null}hitTestRecursive(e,r,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Ki.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const f=h[c],p=this.hitTestRecursive(f,this._isInteractive(r)?r:f.eventMode,n,i,s);if(p){if(p.length>0&&!p[p.length-1].parent)continue;const m=e.isInteractive();return(p.length>0||m)&&p.push(e),p}}}const o=this._isInteractive(r),l=e.isInteractive();return o&&i(e,n)?l?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var n;if(e.hitArea&&(e.worldTransform.applyInverse(r,Hm),!e.hitArea.contains(Hm.x,Hm.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var s,o;r=r??e.type;const n=`on${r}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof an)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var h,c;if(!(e instanceof an)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((h=i.overTargets)==null?void 0:h.length)>0&&s!==r.target){const f=e.type==="mousemove"?"mouseout":"pointerout",p=this.createPointerEvent(e,f,s);if(this.dispatchEvent(p,"pointerout"),n&&this.dispatchEvent(p,"mouseout"),!r.composedPath().includes(s)){const m=this.createPointerEvent(e,"pointerleave",s);for(m.eventPhase=m.AT_TARGET;m.target&&!r.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),n&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(p)}if(s!==r.target){const f=e.type==="mousemove"?"mouseover":"pointerover",p=this.clonePointerEvent(r,f);this.dispatchEvent(p,"pointerover"),n&&this.dispatchEvent(p,"mouseover");let m=s==null?void 0:s.parent;for(;m&&m!==this.rootTarget.parent&&m!==r.target;)m=m.parent;if(!m||m===this.rootTarget.parent){const y=this.clonePointerEvent(r,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==s&&y.target!==this.rootTarget.parent;)y.currentTarget=y.target,this.notifyTarget(y),n&&this.notifyTarget(y,"mouseenter"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(p)}const o=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),l&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),l&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),l&&o.push("globalmousemove"),this.cursor=(c=r.target)==null?void 0:c.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof an)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof an)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof an)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.dispatchEvent(n,l?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let l=s;for(;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const h=n.button===2;this.notifyTarget(n,h?"rightupoutside":"mouseupoutside")}l=l.parent}delete i.pressTargetsByButton[e.button],o=l}if(o){const l=this.clonePointerEvent(n,"click");l.target=o,l.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:r});const h=i.clicksByButton[e.button];if(h.target===l.target&&r-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=l.target,h.timeStamp=r,l.detail=h.clickCount,l.pointerType==="mouse"){const c=l.button===2;this.dispatchEvent(l,c?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof an)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof va)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const i=this.allocateEvent(an);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(e){const r=this.allocateEvent(va);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(an);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof an&&r instanceof an&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof Rd&&r instanceof Rd&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const PB=1,IB={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},j0=class W0{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new CB(null),Ki.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new an(null),this.rootWheelEvent=new va(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...W0.defaultEventFeatures},{set:(r,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),r[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,W0._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=r.length;n<i;n++){const s=r[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ki.pointerMoved();const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const n=r!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const l=this.bootstrapEvent(this.rootPointerEvent,i[s]);l.type+=n,this.rootBoundary.mapEvent(l)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,Ki.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ki.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ki.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(r-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,r.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=PB),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=IB[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};j0.extension={name:"events",type:[te.RendererSystem,te.CanvasRendererSystem]},j0.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let V0=j0;ce.add(V0);function rE(t){return t==="dynamic"||t==="static"}const RB={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??rE(V0.defaultEventMode)},set interactive(t){Ie("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??V0.defaultEventMode},set eventMode(t){this._internalInteractive=rE(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof r=="object"?r.signal:void 0,s=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const l=typeof e=="function"?e:e.handleEvent,h=this;i&&i.addEventListener("abort",()=>{h.off(t,l,o)}),s?h.once(t,l,o):h.on(t,l,o)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof Du))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};tt.mixin(RB);const MB={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};tt.mixin(MB);const kB=9,hc=100,NB=0,DB=0,nE=2,iE=1,FB=-1e3,OB=-1e3,BB=2;class OA{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(mi.tablet||mi.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${hc}px`,r.style.height=`${hc}px`,r.style.position="absolute",r.style.top=`${NB}px`,r.style.left=`${DB}px`,r.style.zIndex=nE.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${iE}px`,e.style.height=`${iE}px`,e.style.position="absolute",e.style.top=`${FB}px`,e.style.left=`${OB}px`,e.style.zIndex=BB.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(mi.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:l,resolution:h}=this.renderer,c=i/o*h,f=s/l*h;let p=this.div;p.style.left=`${r}px`,p.style.top=`${n}px`,p.style.width=`${o}px`,p.style.height=`${l}px`;for(let m=0;m<this.children.length;m++){const y=this.children[m];if(y.renderId!==this.renderId)y._accessibleActive=!1,pa(this.children,m,1),this.div.removeChild(y._accessibleDiv),this.pool.push(y._accessibleDiv),y._accessibleDiv=null,m--;else{p=y._accessibleDiv;let _=y.hitArea;const E=y.worldTransform;y.hitArea?(p.style.left=`${(E.tx+_.x*E.a)*c}px`,p.style.top=`${(E.ty+_.y*E.d)*f}px`,p.style.width=`${_.width*E.a*c}px`,p.style.height=`${_.height*E.d*f}px`):(_=y.getBounds(),this.capHitArea(_),p.style.left=`${_.x*c}px`,p.style.top=`${_.y*f}px`,p.style.width=`${_.width*c}px`,p.style.height=`${_.height*f}px`,p.title!==y.accessibleTitle&&y.accessibleTitle!==null&&(p.title=y.accessibleTitle),p.getAttribute("aria-label")!==y.accessibleHint&&y.accessibleHint!==null&&p.setAttribute("aria-label",y.accessibleHint)),(y.accessibleTitle!==p.title||y.tabIndex!==p.tabIndex)&&(p.title=y.accessibleTitle,p.tabIndex=y.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${hc}px`,r.style.height=`${hc}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=nE.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Du(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===kB&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}OA.extension={name:"accessibility",type:[te.RendererPlugin,te.CanvasRendererPlugin]};ce.add(OA);var Ut=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(Ut||{});const Md={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Hn,Go;function sE(){Go={bptc:Hn.getExtension("EXT_texture_compression_bptc"),astc:Hn.getExtension("WEBGL_compressed_texture_astc"),etc:Hn.getExtension("WEBGL_compressed_texture_etc"),s3tc:Hn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Hn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Hn.getExtension("WEBGL_compressed_texture_pvrtc")||Hn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Hn.getExtension("WEBGL_compressed_texture_etc1"),atc:Hn.getExtension("WEBGL_compressed_texture_atc")}}const LB={extension:{type:te.DetectionParser,priority:2},test:async()=>{const t=oe.ADAPTER.createCanvas().getContext("webgl");return t?(Hn=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Go||sE();const e=[];for(const r in Go)Go[r]&&e.push(r);return[...e,...t]},remove:async t=>(Go||sE(),t.filter(e=>!(e in Go)))};ce.add(LB);class UB extends ef{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,r),this.origin=n,this.buffer=i?new c0(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new c0(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class eo extends UB{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=eo._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||eo._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:f}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,l,this.format,h,c,0,f)}return!0}onBlobLoaded(){this._levelBuffers=eo._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,r,n,i,s,o,l){const h=new Array(n);let c=e.byteOffset,f=o,p=l,m=f+i-1&~(i-1),y=p+s-1&~(s-1),_=m*y*Md[r];for(let E=0;E<n;E++)h[E]={levelID:E,levelWidth:n>1?f:m,levelHeight:n>1?p:y,levelBuffer:new Uint8Array(e.buffer,c,_)},c+=_,f=f>>1||1,p=p>>1||1,m=f+i-1&~(i-1),y=p+s-1&~(s-1),_=m*y*Md[r];return h}}const $m=4,cc=124,zB=32,oE=20,GB=542327876,dc={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},HB={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},fc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},$B=1,jB=2,WB=4,VB=64,XB=512,YB=131072,QB=827611204,KB=861165636,qB=894720068,ZB=808540228,JB=4,eL={[QB]:Ut.COMPRESSED_RGBA_S3TC_DXT1_EXT,[KB]:Ut.COMPRESSED_RGBA_S3TC_DXT3_EXT,[qB]:Ut.COMPRESSED_RGBA_S3TC_DXT5_EXT},tL={70:Ut.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Ut.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Ut.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Ut.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Ut.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Ut.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Ut.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Ut.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Ut.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Ut.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function rL(t){const e=new Uint32Array(t);if(e[0]!==GB)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,cc/Uint32Array.BYTES_PER_ELEMENT),n=r[dc.HEIGHT],i=r[dc.WIDTH],s=r[dc.MIPMAP_COUNT],o=new Uint32Array(t,dc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,zB/Uint32Array.BYTES_PER_ELEMENT),l=o[$B];if(l&WB){const h=o[HB.FOURCC];if(h!==ZB){const b=eL[h],x=$m+cc,A=new Uint8Array(t,x);return[new eo(A,{format:b,width:i,height:n,levels:s})]}const c=$m+cc,f=new Uint32Array(e.buffer,c,oE/Uint32Array.BYTES_PER_ELEMENT),p=f[fc.DXGI_FORMAT],m=f[fc.RESOURCE_DIMENSION],y=f[fc.MISC_FLAG],_=f[fc.ARRAY_SIZE],E=tL[p];if(E===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${p}`);if(y===JB)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const T=new Array,S=$m+cc+oE;if(_===1)T.push(new Uint8Array(t,S));else{const b=Md[E];let x=0,A=i,P=n;for(let M=0;M<s;M++){const N=Math.max(1,A+3&-4),V=Math.max(1,P+3&-4),$=N*V*b;x+=$,A=A>>>1,P=P>>>1}let F=S;for(let M=0;M<_;M++)T.push(new Uint8Array(t,F,x)),F+=x}return T.map(b=>new eo(b,{format:E,width:i,height:n,levels:s}))}throw l&VB?new Error("DDSParser does not support uncompressed texture data."):l&XB?new Error("DDSParser does not supported YUV uncompressed texture data."):l&YB?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&jB?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const aE=[171,75,84,88,32,49,49,187,13,10,26,10],nL=67305985,sn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},X0=64,lE={[ge.UNSIGNED_BYTE]:1,[ge.UNSIGNED_SHORT]:2,[ge.INT]:4,[ge.UNSIGNED_INT]:4,[ge.FLOAT]:4,[ge.HALF_FLOAT]:8},iL={[J.RGBA]:4,[J.RGB]:3,[J.RG]:2,[J.RED]:1,[J.LUMINANCE]:1,[J.LUMINANCE_ALPHA]:2,[J.ALPHA]:1},sL={[ge.UNSIGNED_SHORT_4_4_4_4]:2,[ge.UNSIGNED_SHORT_5_5_5_1]:2,[ge.UNSIGNED_SHORT_5_6_5]:2};function oL(t,e,r=!1){const n=new DataView(e);if(!aL(t,n))return null;const i=n.getUint32(sn.ENDIANNESS,!0)===nL,s=n.getUint32(sn.GL_TYPE,i),o=n.getUint32(sn.GL_FORMAT,i),l=n.getUint32(sn.GL_INTERNAL_FORMAT,i),h=n.getUint32(sn.PIXEL_WIDTH,i),c=n.getUint32(sn.PIXEL_HEIGHT,i)||1,f=n.getUint32(sn.PIXEL_DEPTH,i)||1,p=n.getUint32(sn.NUMBER_OF_ARRAY_ELEMENTS,i)||1,m=n.getUint32(sn.NUMBER_OF_FACES,i),y=n.getUint32(sn.NUMBER_OF_MIPMAP_LEVELS,i),_=n.getUint32(sn.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||f!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(p!==1)throw new Error("WebGL does not support array textures");const E=4,T=4,S=h+3&-4,b=c+3&-4,x=new Array(p);let A=h*c;s===0&&(A=S*b);let P;if(s!==0?lE[s]?P=lE[s]*iL[o]:P=sL[s]:P=Md[l],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const F=r?uL(n,_,i):null;let M=A*P,N=h,V=c,$=S,fe=b,Y=X0+_;for(let O=0;O<y;O++){const X=n.getUint32(Y,i);let ne=Y+4;for(let le=0;le<p;le++){let se=x[le];se||(se=x[le]=new Array(y)),se[O]={levelID:O,levelWidth:y>1||s!==0?N:$,levelHeight:y>1||s!==0?V:fe,levelBuffer:new Uint8Array(e,ne,M)},ne+=M}Y+=X+4,Y=Y%4!==0?Y+4-Y%4:Y,N=N>>1||1,V=V>>1||1,$=N+E-1&~(E-1),fe=V+T-1&~(T-1),M=$*fe*P}return s!==0?{uncompressed:x.map(O=>{let X=O[0].levelBuffer,ne=!1;return s===ge.FLOAT?X=new Float32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4):s===ge.UNSIGNED_INT?(ne=!0,X=new Uint32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)):s===ge.INT&&(ne=!0,X=new Int32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)),{resource:new ef(X,{width:O[0].levelWidth,height:O[0].levelHeight}),type:s,format:ne?lL(o):o}}),kvData:F}:{compressed:x.map(O=>new eo(null,{format:l,width:h,height:c,levels:y,levelBuffers:O})),kvData:F}}function aL(t,e){for(let r=0;r<aE.length;r++)if(e.getUint8(r)!==aE[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function lL(t){switch(t){case J.RGBA:return J.RGBA_INTEGER;case J.RGB:return J.RGB_INTEGER;case J.RG:return J.RG_INTEGER;case J.RED:return J.RED_INTEGER;default:return t}}function uL(t,e,r){const n=new Map;let i=0;for(;i<e;){const s=t.getUint32(X0+i,r),o=X0+i+4,l=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<s&&t.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,h)),f=new DataView(t.buffer,o+h+1,s-h-1);n.set(c,f),i+=4+s+l}return n}const hL={extension:{type:te.LoadParser,priority:Sn.High},name:"loadDDS",test(t){return xs(t,".dds")},async load(t,e,r){const n=await(await oe.ADAPTER.fetch(t)).arrayBuffer(),i=rL(n).map(s=>{const o=new Se(s,{mipmap:Zn.OFF,alphaMode:fr.NO_PREMULTIPLIED_ALPHA,resolution:bi(t),...e.data});return Nu(o,r,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};ce.add(hL);const cL={extension:{type:te.LoadParser,priority:Sn.High},name:"loadKTX",test(t){return xs(t,".ktx")},async load(t,e,r){const n=await(await oe.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=oL(t,n),l=i??s,h={mipmap:Zn.OFF,alphaMode:fr.NO_PREMULTIPLIED_ALPHA,resolution:bi(t),...e.data},c=l.map(f=>{l===s&&Object.assign(h,{type:f.type,format:f.format});const p=f.resource??f,m=new Se(p,h);return m.ktxKeyValueData=o,Nu(m,r,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};ce.add(cL);const dL=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],fL={extension:te.ResolveParser,test:t=>{const e=Ft.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,i;const e=t.split("."),r=e.pop();if(["ktx","dds"].includes(r)){const s=e.pop();if(dL.includes(s))return{resolution:parseFloat(((n=oe.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:s,src:t}}return{resolution:parseFloat(((i=oe.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:r,src:t}}};ce.add(fL);const pc=new we,pL=4,BA=class Rl{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,r,n,i){const s=new Image;return s.src=await this.base64(e,r,n,i),s}async base64(e,r,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,l)=>{s.toBlob(h=>{if(!h){l(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=l,c.readAsDataURL(h)},r,n)});if(s.toDataURL!==void 0)return s.toDataURL(r,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:r,quality:n});return new Promise((l,h)=>{const c=new FileReader;c.onload=()=>l(c.result),c.onerror=h,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:l}=this._rawPixels(e,r);o&&Rl._flipY(n,i,s),l&&Rl._unpremultiplyAlpha(n);const h=new nD(i,s,1),c=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return h.context.putImageData(c,0,0),h.canvas}pixels(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:l}=this._rawPixels(e,r);return o&&Rl._flipY(n,i,s),l&&Rl._unpremultiplyAlpha(n),n}_rawPixels(e,r){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,l,h=!1;e&&(e instanceof fo?l=e:(l=n.generateTexture(e,{region:r,resolution:n.resolution,multisample:n.multisample}),h=!0,r&&(pc.width=r.width,pc.height=r.height,r=pc)));const c=n.gl;if(l){if(i=l.baseTexture.resolution,r=r??l.frame,s=!1,o=l.baseTexture.alphaMode>0&&l.baseTexture.format===J.RGBA,!h){n.renderTexture.bind(l);const y=l.framebuffer.glFramebuffers[n.CONTEXT_UID];y.blitFramebuffer&&n.framebuffer.bind(y.blitFramebuffer)}}else i=n.resolution,r||(r=pc,r.width=n.width/i,r.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const f=Math.max(Math.round(r.width*i),1),p=Math.max(Math.round(r.height*i),1),m=new Uint8Array(pL*f*p);return c.readPixels(Math.round(r.x*i),Math.round(r.y*i),f,p,c.RGBA,c.UNSIGNED_BYTE,m),h&&(l==null||l.destroy(!0)),{pixels:m,width:f,height:p,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,r,n){const i=r<<2,s=n>>1,o=new Uint8Array(i);for(let l=0;l<s;l++){const h=l*i,c=(n-l-1)*i;o.set(e.subarray(h,h+i)),e.copyWithin(h,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const r=e.length;for(let n=0;n<r;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};BA.extension={name:"extract",type:te.RendererSystem};let mL=BA;ce.add(mL);class gL{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function yL(t,e){var n;let r=!1;if((n=t==null?void 0:t._textures)!=null&&n.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof ie){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),r=!0)}}return r}function vL(t,e){if(t.baseTexture instanceof Se){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function _L(t,e){if(t._texture&&t._texture instanceof ie){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function xL(t,e){return e instanceof iv?(e.updateText(!0),!0):!1}function wL(t,e){if(e instanceof Ai){const r=e.toFontString();return Xi.measureFont(r),!0}return!1}function EL(t,e){if(t instanceof iv){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function bL(t,e){return t instanceof Ai?(e.includes(t)||e.push(t),!0):!1}const LA=class UA{constructor(e){this.limiter=new gL(UA.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(EL),this.registerFindHook(bL),this.registerFindHook(yL),this.registerFindHook(vL),this.registerFindHook(_L),this.registerUploadHook(xL),this.registerUploadHook(wL)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,kt.system.addOnce(this.tick,this,Jn.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)kt.system.addOnce(this.tick,this,Jn.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,n=e.length;r<n;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof Jt)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&kt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};LA.uploadsPerFrame=4;let Y0=LA;Object.defineProperties(oe,{UPLOADS_PER_FRAME:{get(){return Y0.uploadsPerFrame},set(t){Ie("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Y0.uploadsPerFrame=t}}});function zA(t,e){return e instanceof Se?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function SL(t,e){if(!(e instanceof Vl))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&zA(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function TL(t,e){return t instanceof Vl?(e.push(t),!0):!1}class GA extends Y0{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(TL),this.registerUploadHook(zA),this.registerUploadHook(SL)}}GA.extension={name:"prepare",type:te.RendererSystem};ce.add(GA);const HA=class Ml{constructor(e,r,n){this.linkedSheets=[],(e instanceof Se||e instanceof ie)&&(e={texture:e,data:r,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:l=""}=e;this.cachePrefix=l,this._texture=i instanceof ie?i:null,this.baseTexture=i instanceof Se?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const h=this.baseTexture.resource;this.resolution=this._updateResolution(o||(h?h.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:r}=this.data.meta;let n=bi(e,null);return n===null&&(n=typeof r=="number"?r:parseFloat(r??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ml.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=Ml.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const i=this._frameKeys[r],s=this._frames[i],o=s.frame;if(o){let l=null,h=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,f=new we(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?l=new we(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):l=new we(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new we(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new ie(this.baseTexture,l,f,h,s.rotated?2:0,s.anchor,s.borders),ie.addToCache(this.textures[i],this.cachePrefix+i.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const i=e[r][n];this.animations[r].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ml.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ml.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};HA.BATCH_SIZE=1e3;let uE=HA;const AL=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function $A(t,e,r){const n={};if(t.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!r){const i=Ft.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,$A([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const CL={extension:te.Asset,cache:{test:t=>t instanceof uE,getCacheableAssets:(t,e)=>$A(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return r==="json"&&AL.includes(n)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=oe.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:te.LoadParser,priority:Sn.Normal},async testParse(t,e){return Ft.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var f,p;const{texture:n,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Ft.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(n&&n.baseTexture)l=n;else{const m=M0(o+(i??t.meta.image),e.src);l=(await r.load([m]))[m]}const h=new uE({texture:l.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await h.parse();const c=(f=t==null?void 0:t.meta)==null?void 0:f.related_multi_packs;if(Array.isArray(c)){const m=[];for(const _ of c){if(typeof _!="string")continue;let E=o+_;(p=e.data)!=null&&p.ignoreMultiPack||(E=M0(E,e.src),m.push(r.load({src:E,data:{ignoreMultiPack:!0}})))}const y=await Promise.all(m);h.linkedSheets=y,y.forEach(_=>{_.linkedSheets=[h].concat(h.linkedSheets.filter(E=>E!==_))})}return h},unload(t){t.destroy(!0)}}};ce.add(CL);const Q0=class Ho extends Ai{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Ho(Object.keys(Ho.defaultOptions).reduce((r,n)=>({...r,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Ho.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,r={}){const{availableFonts:n}=Ho;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return oe.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const l=URL.createObjectURL(i),h=new FileReader;h.onload=()=>s([l,h.result]),h.onerror=o,h.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Ft.basename(e,Ft.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},r);n[e]=o,this._fonts.push(o),this.styleID++;const l=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=l,await l.load(),document.fonts.add(l),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const r=e.filter(n=>!this._overrides.includes(n));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...e){const r=e.filter(n=>this._overrides.includes(n));r.length>0&&(this._overrides=this._overrides.filter(n=>!r.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,r)=>`${e}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=eD(e)),typeof e=="number"?JN(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&r<1&&(e+=(r*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Ho.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=oe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Q0.availableFonts={},Q0.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let jm=Q0;const mc=class $o extends _s{constructor(e="",r={}){super(ie.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=ie.from(n,{scaleMode:oe.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new we,i.trim=new we,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",l=document.createElementNS(s,"svg"),h=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),f=document.createElementNS(o,"style");h.setAttribute("width","10000"),h.setAttribute("height","10000"),h.style.overflow="hidden",l.appendChild(h),this.maxWidth=$o.defaultMaxWidth,this.maxHeight=$o.defaultMaxHeight,this._domElement=c,this._styleElement=f,this._svgRoot=l,this._foreignObject=h,this._foreignObject.appendChild(f),this._foreignObject.appendChild(c),this._image=n,this._loadImage=new Image,this._autoResolution=$o.defaultAutoResolution,this._resolution=$o.defaultResolution??oe.RESOLUTION,this.text=e,this.style=r}measureText(e){var f,p;const{text:r,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:l}=s;(o>this.maxWidth||l>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const h=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(l));return this._svgRoot.setAttribute("width",h.toString()),this._svgRoot.setAttribute("height",c.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(f=this._style)==null?void 0:f.toCSS(i)}),this._styleElement.textContent=(p=this._style)==null?void 0:p.toGlobalCSS()),{width:h+n.padding*2,height:c+n.padding*2}}async updateText(e=!0){const{style:r,_image:n,_loadImage:i}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const l=this._updateID;await new Promise(h=>{i.onload=async()=>{if(l<this._updateID){h();return}await r.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),h()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:r,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=r;r.trim.width=r._frame.width=n.width/i,r.trim.height=r._frame.height=n.height/i,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,l;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},$o.defaultDestroyOptions,e),super.destroy(e);const r=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=r,(i=this._svgRoot)==null||i.remove(),this._svgRoot=r,(s=this._domElement)==null||s.remove(),this._domElement=r,(o=this._foreignObject)==null||o.remove(),this._foreignObject=r,(l=this._styleElement)==null||l.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const r=ts(this.scale.x)||1;this.scale.x=r*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const r=ts(this.scale.y)||1;this.scale.y=r*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof jm?(this.ownsStyle=!1,this._style=e):e instanceof Ai?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=jm.from(e)):(this.ownsStyle=!0,this._style=new jm(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};mc.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},mc.defaultMaxWidth=2024,mc.defaultMaxHeight=2024,mc.defaultAutoResolution=!0;function PL(){return null}class uv extends Tr.Component{constructor(e){super(e),this.state={hasError:!1,fallback:e.fallback}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,r){console.error("Uncaught error:",e,r)}render(){return this.state.hasError?xe.jsx(xe.Fragment,{children:this.state.fallback}):this.props.children}}function IL({children:t,loading:e,error:r,...n}){return xe.jsx(et.Stage,{...n,children:xe.jsx(uv,{fallback:r,children:xe.jsx(q.Suspense,{fallback:e,children:t})})})}var RL={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(kl,function(){var r=function(){function n(y){return o.appendChild(y.dom),y}function i(y){for(var _=0;_<o.children.length;_++)o.children[_].style.display=_===y?"block":"none";s=y}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(y){y.preventDefault(),i(++s%o.children.length)},!1);var l=(performance||Date).now(),h=l,c=0,f=n(new r.Panel("FPS","#0ff","#002")),p=n(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=n(new r.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:n,showPanel:i,begin:function(){l=(performance||Date).now()},end:function(){c++;var y=(performance||Date).now();if(p.update(y-l,200),y>h+1e3&&(f.update(1e3*c/(y-h),100),h=y,c=0,m)){var _=performance.memory;m.update(_.usedJSHeapSize/1048576,_.jsHeapSizeLimit/1048576)}return y},update:function(){l=this.end()},domElement:o,setMode:i}};return r.Panel=function(n,i,s){var o=1/0,l=0,h=Math.round,c=h(window.devicePixelRatio||1),f=80*c,p=48*c,m=3*c,y=2*c,_=3*c,E=15*c,T=74*c,S=30*c,b=document.createElement("canvas");b.width=f,b.height=p,b.style.cssText="width:80px;height:48px";var x=b.getContext("2d");return x.font="bold "+9*c+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=s,x.fillRect(0,0,f,p),x.fillStyle=i,x.fillText(n,m,y),x.fillRect(_,E,T,S),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(_,E,T,S),{dom:b,update:function(A,P){o=Math.min(o,A),l=Math.max(l,A),x.fillStyle=s,x.globalAlpha=1,x.fillRect(0,0,f,E),x.fillStyle=i,x.fillText(h(A)+" "+n+" ("+h(o)+"-"+h(l)+")",m,y),x.drawImage(b,_+c,E,T-c,S,_,E,T-c,S),x.fillRect(_+T-c,E,c,S),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(_+T-c,E,c,h((1-A/P)*S))}}},r})})(RL);function ML({showPanel:t=0,className:e,parent:r}){return null}const kL=0,mn=540,gn=270,hE=5;function jA({color:t=15674236,width:e=32,height:r=32}){const n=q.useCallback(i=>{i.clear(),i.lineStyle(1,0),i.beginFill(t),i.drawRoundedRect(0,0,e,r,6),i.endFill()},[t,r,e]);return xe.jsx(et.Graphics,{draw:n})}function La(t){const e=di.has(t)?rs.get(t):void 0;if(e!==void 0)return e;throw rs.load(t)}function NL(t){const e=t.reduce((r,n)=>r&&di.has(n),!0)?rs.get(t):void 0;if(e!==void 0)return e;throw rs.load(t)}const DL=q.forwardRef(({image:t,...e},r)=>{const n=La(t);return xe.jsx(et.Sprite,{ref:r,texture:n,...e})}),js=q.forwardRef(function({image:e,texture:r,...n},i){const s=q.useRef(null);q.useImperativeHandle(i,()=>s.current,[]);const{width:o,height:l}=n;return xe.jsx(uv,{fallback:xe.jsx(jA,{width:o,height:l}),children:e?xe.jsx(DL,{ref:s,image:e,...n}):xe.jsx(et.Sprite,{ref:s,texture:r,...n})})});var FL={BASE_URL:"/infinistg/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const cE=t=>{let e;const r=new Set,n=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const y=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(_=>_(e,y))}},i=()=>e,h={setState:n,getState:i,getInitialState:()=>c,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{(FL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(n,i,h);return h},OL=t=>t?cE(t):cE;var WA={exports:{}},VA={},XA={exports:{}},YA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=q;function BL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LL=typeof Object.is=="function"?Object.is:BL,UL=Ra.useState,zL=Ra.useEffect,GL=Ra.useLayoutEffect,HL=Ra.useDebugValue;function $L(t,e){var r=e(),n=UL({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return GL(function(){i.value=r,i.getSnapshot=e,Wm(i)&&s({inst:i})},[t,r,e]),zL(function(){return Wm(i)&&s({inst:i}),t(function(){Wm(i)&&s({inst:i})})},[t]),HL(r),r}function Wm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!LL(t,r)}catch{return!0}}function jL(t,e){return e()}var WL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jL:$L;YA.useSyncExternalStore=Ra.useSyncExternalStore!==void 0?Ra.useSyncExternalStore:WL;XA.exports=YA;var VL=XA.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=q,XL=VL;function YL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QL=typeof Object.is=="function"?Object.is:YL,KL=XL.useSyncExternalStore,qL=df.useRef,ZL=df.useEffect,JL=df.useMemo,e4=df.useDebugValue;VA.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=qL(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=JL(function(){function h(y){if(!c){if(c=!0,f=y,y=n(y),i!==void 0&&o.hasValue){var _=o.value;if(i(_,y))return p=_}return p=y}if(_=p,QL(f,y))return _;var E=n(y);return i!==void 0&&i(_,E)?_:(f=y,p=E)}var c=!1,f,p,m=r===void 0?null:r;return[function(){return h(e())},m===null?void 0:function(){return h(m())}]},[e,r,n,i]);var l=KL(t,s[0],s[1]);return ZL(function(){o.hasValue=!0,o.value=l},[l]),e4(l),l};WA.exports=VA;var t4=WA.exports;const r4=bu(t4);var QA={BASE_URL:"/infinistg/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:n4}=Tr,{useSyncExternalStoreWithSelector:i4}=r4;let dE=!1;const s4=t=>t;function o4(t,e=s4,r){(QA?"production":void 0)!=="production"&&r&&!dE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),dE=!0);const n=i4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return n4(n),n}const fE=t=>{(QA?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?OL(t):t,r=(n,i)=>o4(e,n,i);return Object.assign(r,e),r},a4=t=>t?fE(t):fE,Xl=4,Yl=100,Ql=5e3,yn=a4((t,e)=>({players:{actions:{add:r=>t(n=>({...n,players:{...n.players,count:Vm(n.players,r)}})),remove:r=>t(n=>({...n,players:{...n.players,count:Xm(n.players,r)}})),get:r=>Ym(e().players,r),map:r=>Qm(e().players,r)},pool:{entities:Array(Xl).fill({pos:{x:-gn,y:-mn},radius:0,fireRate:0,health:0,maxHealth:0}),activeEntities:[],ids:Array(Xl).fill(0).map((r,n)=>Xl-1-n)},count:0},enemies:{actions:{add:r=>t(n=>({...n,enemies:{...n.enemies,count:Vm(n.enemies,r)}})),remove:r=>t(n=>({...n,enemies:{...n.enemies,count:Xm(n.enemies,r)}})),get:r=>Ym(e().enemies,r),map:r=>Qm(e().enemies,r)},pool:{entities:Array(Yl).fill({pos:{x:-gn,y:-mn},radius:0,fireRate:0,health:0,maxHealth:0}),activeEntities:[],ids:Array(Yl).fill(0).map((r,n)=>Yl-1-n)},count:0},bullets:{actions:{add:r=>t(n=>({...n,bullets:{...n.bullets,count:Vm(n.bullets,r)}})),remove:r=>t(n=>({...n,bullets:{...n.bullets,count:Xm(n.bullets,r)}})),get:r=>Ym(e().bullets,r),map:r=>Qm(e().bullets,r)},pool:{entities:Array(Ql).fill({pos:{x:-gn,y:-mn},dir:0,radius:0,speed:0,damage:0,delta:0,lifetime:0}),activeEntities:[],ids:Array(Ql).fill(0).map((r,n)=>Ql-1-n)},count:0},world:{level:"",index:0,scroll:0},collision:{pairs:[],actions:{set:r=>t(n=>({...n,collision:{...n.collision,pairs:r}}))}},actions:{reset:()=>l4(e())}}));function Vm(t,e){if(t.pool.ids.length===0)throw new Error("Pool is full");const r=t.pool.ids.pop();if(r===void 0)throw new Error("Invalid id");return t.pool.activeEntities.push(r),t.pool.entities[r]=Object.assign({},t.pool.entities[r],e,{id:r}),++t.count}function Xm(t,e){const r=typeof e=="number"?e:e.id??-1;if(r<0||r>=t.pool.entities.length)throw new Error(`Invalid id (${r}) - last: ${t.count}`);t.pool.ids.push(r),t.pool.entities[r].id=void 0;const n=t.pool.activeEntities.indexOf(r);if(n===-1)throw new Error("Invalid id; Not found.");return t.pool.activeEntities[n]=t.pool.activeEntities[t.count-1],t.pool.activeEntities.pop(),--t.count}function Ym(t,e){if(e<0||e>=t.pool.entities.length)throw new Error(`Invalid id (${e}) - last: ${t.count}`);return t.pool.entities[e]}function l4(t){t.players.pool.ids=Array(Xl).fill(0).map((e,r)=>Xl-1-r),t.players.count=0,t.enemies.pool.ids=Array(Yl).fill(0).map((e,r)=>Yl-1-r),t.enemies.count=0,t.bullets.pool.ids=Array(Ql).fill(0).map((e,r)=>Ql-1-r),t.bullets.count=0,t.collision.pairs=[]}function Qm(t,e){const r=[];for(let n=0;n<t.count;n++)r[n]=e(t.pool.entities[t.pool.activeEntities[n]],n);return r}const u4=q.forwardRef(function({id:e,texture:r},n){const i=q.useRef(null);q.useImperativeHandle(n,()=>i.current,[]);const o=yn(l=>l.bullets).actions.get(e);return et.useTick(()=>{var l;(l=i.current)==null||l.position.set(o.pos.x,o.pos.y)}),xe.jsx(js,{ref:i,name:`Bullet-${e}`,anchor:.5,x:o.pos.x,y:o.pos.y,texture:r})});function h4({atlas:t}){const e=yn(i=>i.bullets),n=La(t).textures["bullet-1"];return et.useTick(i=>{const s=[];for(let o=0;o<e.count;o++){const l=e.pool.activeEntities[o],h=e.pool.entities[e.pool.activeEntities[o]];h.pos.x+=h.speed*Math.cos(h.dir-Math.PI/2)*i,h.pos.y+=h.speed*Math.sin(h.dir-Math.PI/2)*i,h.delta+=i,(h.delta>h.lifetime||h.pos.x<-n.width||h.pos.x>gn+n.width||h.pos.y<-n.height||h.pos.y>mn+n.height)&&(h.delta=h.lifetime=0,h.pos.x=-gn,h.pos.y=-mn,s.push(l))}s.forEach(o=>e.actions.remove(o))}),xe.jsx(et.Container,{name:"BulletRunner",children:e.actions.map(i=>xe.jsx(u4,{id:i.id??-1,texture:n,x:i.pos.x,y:i.pos.y},i.id))})}function c4(t=1e3,e){const r=q.useRef(0),[n,i]=q.useState(void 0);return et.useTick(s=>{r.current+=s,r.current>=t&&(r.current=0,i(e()))}),n}const d4=q.forwardRef(function({id:e,atlas:r,texture:n},i){const s=q.useRef(null);q.useImperativeHandle(i,()=>s.current,[]);const o=et.useApp(),l=yn(y=>y.players),h=yn.getState().bullets,c=La(r),f=l.actions.get(e),p=c.textures[n],m=1.5;return et.useTick(y=>{var S;const _=new Ee(Math.min(gn-p.width/2,Math.max(p.width/2,o.renderer.events.pointer.global.x)),Math.min(mn-p.height/2,Math.max(p.height/2,o.renderer.events.pointer.global.y))),E=_.subtract(f.pos).normalize();if(_.subtract(f.pos).magnitude()>=hE){const b=E.multiplyScalar(hE*y).add(f.pos);f.pos.x=b.x,f.pos.y=b.y,(S=s.current)==null||S.position.set(f.pos.x,f.pos.y)}}),c4(f.fireRate,()=>{h.actions.add({pos:{x:f.pos.x,y:f.pos.y},dir:0,radius:4,speed:10,damage:10,delta:0,lifetime:1e3})}),xe.jsx(js,{ref:s,name:`Player-${e}`,scale:m,anchor:.5,x:f.pos.x,y:f.pos.y,texture:p})}),f4=q.forwardRef(({image:t,...e},r)=>{const n=La(t);return xe.jsx(et.TilingSprite,{ref:r,texture:n,...e})}),p4=q.forwardRef(function({image:e,texture:r,...n},i){const{width:s,height:o}=n;return xe.jsx(uv,{fallback:xe.jsx(jA,{width:s,height:o}),children:e?xe.jsx(f4,{ref:i,image:e,...n}):xe.jsx(et.TilingSprite,{ref:i,texture:r,...n})})});function m4({image:t,scroll:e,...r}){const n=et.useApp(),i=q.useRef(null);return et.useTick(s=>{var o;(o=i.current)==null||o.tilePosition.set(i.current.tilePosition.x+s*((e==null?void 0:e[0])??0),i.current.tilePosition.y+s*((e==null?void 0:e[1])??0))}),xe.jsx(p4,{ref:i,image:t,width:n.renderer.screen.width,height:n.renderer.screen.height,...r})}const Km=new Map;function g4(t,e){return Km.has(t)||Km.set(t,e),Km.get(t)}function y4(t,e){return t.replace(/\/(?:.(?!\/))+$/,"/"+e)}class hv{constructor(e){this.tileAnim=[0,0],this.dontUseTransform=!1,this.renderer=e,this.tileAnim=[0,0]}static registerExtension(){ce.add({name:"tilemap",type:te.CanvasRendererPlugin,ref:hv})}static getInstance(e){if(!e.plugins.tilemap)throw new Error("Extension not registered!");return e.plugins.tilemap}}const qm={TEXTURES_PER_TILEMAP:16,TEXTILE_DIMEN:1024,TEXTILE_UNITS:1,TEXTILE_SCALE_MODE:dn.LINEAR,use32bitIndex:!1,DO_CLEAR:!0,get maxTextures(){return this.MAX_TEXTURES},set maxTextures(t){this.MAX_TEXTURES=t},get boundSize(){return this.TEXTURE_TILE_DIMEN},set boundSize(t){this.TILE_TEXTURE_DIMEN=t},get boundCountPerBuffer(){return this.TEXTILE_UNITS},set boundCountPerBuffer(t){this.TEXTILE_UNITS=t}};var KA=(t=>(t[t.U=0]="U",t[t.V=1]="V",t[t.X=2]="X",t[t.Y=3]="Y",t[t.TILE_WIDTH=4]="TILE_WIDTH",t[t.TILE_HEIGHT=5]="TILE_HEIGHT",t[t.ROTATE=6]="ROTATE",t[t.ANIM_X=7]="ANIM_X",t[t.ANIM_Y=8]="ANIM_Y",t[t.TEXTURE_INDEX=9]="TEXTURE_INDEX",t[t.ANIM_COUNT_X=10]="ANIM_COUNT_X",t[t.ANIM_COUNT_Y=11]="ANIM_COUNT_Y",t[t.ANIM_DIVISOR=12]="ANIM_DIVISOR",t[t.ALPHA=13]="ALPHA",t))(KA||{});const Bn=Object.keys(KA).length/2;class v4 extends Jt{constructor(e){super(),this.shadowColor=new Float32Array([0,0,0,.5]),this._globalMat=null,this.tileAnim=null,this.modificationMarker=0,this.offsetX=0,this.offsetY=0,this.compositeParent=!1,this.tilemapBounds=new vu,this.hasAnimatedTile=!1,this.pointsBuf=[],this.renderCanvas=r=>{const n=hv.getInstance(r);if(n&&!n.dontUseTransform){const i=this.worldTransform;r.canvasContext.activeContext.setTransform(i.a,i.b,i.c,i.d,i.tx*r.resolution,i.ty*r.resolution)}this.renderCanvasCore(r)},this.vbId=0,this.vb=null,this.vbBuffer=null,this.vbArray=null,this.vbInts=null,this.setTileset(e)}getTileset(){return this.tileset}setTileset(e=[]){Array.isArray(e)||(e=[e]);for(let r=0;r<e.length;r++)e[r].baseTexture&&(e[r]=e[r].baseTexture);return this.tileset=e,this}clear(){return this.pointsBuf.length=0,this.modificationMarker=0,this.tilemapBounds.clear(),this.hasAnimatedTile=!1,this}tile(e,r,n,i={}){let s,o=-1;if(typeof e=="number")o=e,s=this.tileset[o];else{let x;typeof e=="string"?x=ie.from(e):x=e;const A=this.tileset;for(let P=0;P<A.length;P++)if(A[P]===x.castToBaseTexture()){o=P;break}"baseTexture"in x&&(i.u=i.u??x.frame.x,i.v=i.v??x.frame.y,i.tileWidth=i.tileWidth??x.orig.width,i.tileHeight=i.tileHeight??x.orig.height),s=x.castToBaseTexture()}if(!s||o<0)return console.error("The tile texture was not found in the tilemap tileset."),this;const{u:l=0,v:h=0,tileWidth:c=s.realWidth,tileHeight:f=s.realHeight,animX:p=0,animY:m=0,rotate:y=0,animCountX:_=1024,animCountY:E=1024,animDivisor:T=1,alpha:S=1}=i,b=this.pointsBuf;return this.hasAnimatedTile=this.hasAnimatedTile||p>0||m>0,b.push(l),b.push(h),b.push(r),b.push(n),b.push(c),b.push(f),b.push(y),b.push(p|0),b.push(m|0),b.push(o),b.push(_),b.push(E),b.push(T),b.push(S),this.tilemapBounds.addFramePad(r,n,r+c,n+f,0,0),this}tileRotate(e){const r=this.pointsBuf;r[r.length-(Bn-9)]=e}tileAnimX(e,r){const n=this.pointsBuf;n[n.length-(Bn-7)]=e,n[n.length-(Bn-10)]=r}tileAnimY(e,r){const n=this.pointsBuf;n[n.length-(Bn-8)]=e,n[n.length-(Bn-11)]=r}tileAnimDivisor(e){const r=this.pointsBuf;r[r.length-(Bn-12)]=e}tileAlpha(e){const r=this.pointsBuf;r[r.length-(Bn-13)]=e}renderCanvasCore(e){if(this.tileset.length===0)return;const r=this.pointsBuf,n=this.tileAnim||e.plugins.tilemap&&e.plugins.tilemap.tileAnim;e.canvasContext.activeContext.fillStyle="#000000";for(let i=0,s=r.length;i<s;i+=Bn){let o=r[i+0],l=r[i+1];const h=r[i+2],c=r[i+3],f=r[i+4],p=r[i+5];o+=r[i+7]*n[0],l+=r[i+8]*n[1];const m=r[i+9],y=r[i+13];m>=0&&this.tileset[m]?(e.canvasContext.activeContext.globalAlpha=y,e.canvasContext.activeContext.drawImage(this.tileset[m].getDrawableSource(),o,l,f,p,h,c,f,p)):(e.canvasContext.activeContext.globalAlpha=.5,e.canvasContext.activeContext.fillRect(h,c,f,p)),e.canvasContext.activeContext.globalAlpha=1}}destroyVb(){this.vb&&(this.vb.destroy(),this.vb=null)}render(e){const r=e.plugins.tilemap,n=r.getShader();e.batch.setObjectRenderer(r),this._globalMat=n.uniforms.projTransMatrix,e.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),n.uniforms.shadowColor=this.shadowColor,n.uniforms.animationFrame=this.tileAnim||r.tileAnim,this.renderWebGLCore(e,r)}renderWebGLCore(e,r){const n=this.pointsBuf;if(n.length===0)return;const i=n.length/Bn,s=r.getShader(),o=this.tileset;if(o.length===0)return;r.bindTileTextures(e,o),e.shader.bind(s,!1);let l=this.vb;l||(l=r.createVb(),this.vb=l,this.vbId=l.id,this.vbBuffer=null,this.modificationMarker=0),r.checkIndexBuffer(i,l);const h=l.getBuffer("aVertexPosition"),c=i*l.vertPerQuad;if(c!==0){if(this.modificationMarker!==c){this.modificationMarker=c;const f=l.stride*c;if(!this.vbBuffer||this.vbBuffer.byteLength<f){let T=l.stride;for(;T<f;)T*=2;this.vbBuffer=new ArrayBuffer(T),this.vbArray=new Float32Array(this.vbBuffer),this.vbInts=new Uint32Array(this.vbBuffer),h.update(this.vbBuffer)}const p=this.vbArray;let m=0,y=0,_=this.offsetX,E=this.offsetY;for(let T=0;T<n.length;T+=Bn){this.compositeParent&&(y=n[T+9],_=0,E=0);const S=n[T+2],b=n[T+3],x=n[T+4],A=n[T+5],P=n[T+0]+_,F=n[T+1]+E;let M=n[T+6];const N=n[T+7],V=n[T+8],$=n[T+10]||1024,fe=n[T+11]||1024,Y=N+$*2048,O=V+fe*2048,X=n[T+12],ne=n[T+13];let le,se,R,G,D,U,ee,be;if(M===0)le=P,se=F,R=P+x,G=F,D=P+x,U=F+A,ee=P,be=F+A;else{let ye=x/2,Pe=A/2;M%4!==0&&(ye=A/2,Pe=x/2);const Te=P+ye,Me=F+Pe;M=Ne.add(M,Ne.NW),le=Te+ye*Ne.uX(M),se=Me+Pe*Ne.uY(M),M=Ne.add(M,2),R=Te+ye*Ne.uX(M),G=Me+Pe*Ne.uY(M),M=Ne.add(M,2),D=Te+ye*Ne.uX(M),U=Me+Pe*Ne.uY(M),M=Ne.add(M,2),ee=Te+ye*Ne.uX(M),be=Me+Pe*Ne.uY(M)}p[m++]=S,p[m++]=b,p[m++]=le,p[m++]=se,p[m++]=P+.5,p[m++]=F+.5,p[m++]=P+x-.5,p[m++]=F+A-.5,p[m++]=Y,p[m++]=O,p[m++]=y,p[m++]=X,p[m++]=ne,p[m++]=S+x,p[m++]=b,p[m++]=R,p[m++]=G,p[m++]=P+.5,p[m++]=F+.5,p[m++]=P+x-.5,p[m++]=F+A-.5,p[m++]=Y,p[m++]=O,p[m++]=y,p[m++]=X,p[m++]=ne,p[m++]=S+x,p[m++]=b+A,p[m++]=D,p[m++]=U,p[m++]=P+.5,p[m++]=F+.5,p[m++]=P+x-.5,p[m++]=F+A-.5,p[m++]=Y,p[m++]=O,p[m++]=y,p[m++]=X,p[m++]=ne,p[m++]=S,p[m++]=b+A,p[m++]=ee,p[m++]=be,p[m++]=P+.5,p[m++]=F+.5,p[m++]=P+x-.5,p[m++]=F+A-.5,p[m++]=Y,p[m++]=O,p[m++]=y,p[m++]=X,p[m++]=ne}h.update(p)}e.geometry.bind(l,s),e.geometry.draw(Wr.TRIANGLES,i*6,0)}}isModified(e){return!!(this.modificationMarker!==this.pointsBuf.length||e&&this.hasAnimatedTile)}clearModify(){this.modificationMarker=this.pointsBuf.length}_calculateBounds(){const{minX:e,minY:r,maxX:n,maxY:i}=this.tilemapBounds;this._bounds.addFrame(this.transform,e,r,n,i)}getLocalBounds(e){return this.children.length===0?this.tilemapBounds.getRectangle(e):super.getLocalBounds.call(this,e)}destroy(e){super.destroy(e),this.destroyVb()}addFrame(e,r,n,i,s){return this.tile(e,r,n,{animX:i,animY:s}),!0}addRect(e,r,n,i,s,o,l,h=0,c=0,f=0,p=1024,m=1024,y=1,_=1){return this.tile(e,i,s,{u:r,v:n,tileWidth:o,tileHeight:l,animX:h,animY:c,rotate:f,animCountX:p,animCountY:m,animDivisor:y,alpha:_})}}function _4(t){let e="";e+=`
`,e+=`
`,e+="if(vTextureId <= -1.0) {",e+=`
	color = shadowColor;`,e+=`
}`;for(let r=0;r<t;r++)e+=`
else `,r<t-1&&(e+=`if(textureId == ${r}.0)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${r}], textureCoord * uSamplerSize[${r}]);`,e+=`
}`;return e+=`
`,e+=`
`,e}function x4(t,e){const r=[];for(let i=0;i<e;i++)r[i]=i;t.uniforms.uSamplers=r;const n=[];for(let i=0;i<e;i++)n.push(1/2048),n.push(1/2048);t.uniforms.uSamplerSize=n}function w4(t,e){return e.replace(/%count%/gi,`${t}`).replace(/%forloop%/gi,_4(t))}const E4=`#version 100
precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aFrame;
attribute vec2 aAnim;
attribute float aAnimDivisor;
attribute float aTextureId;
attribute float aAlpha;

uniform mat3 projTransMatrix;
uniform vec2 animationFrame;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vFrame;
varying float vAlpha;

void main(void)
{
   gl_Position = vec4((projTransMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vec2 animCount = floor((aAnim + 0.5) / 2048.0);
   vec2 animFrameOffset = aAnim - animCount * 2048.0;
   vec2 currentFrame = floor(animationFrame / aAnimDivisor);
   vec2 animOffset = animFrameOffset * floor(mod(currentFrame + 0.5, animCount));

   vTextureCoord = aTextureCoord + animOffset;
   vFrame = aFrame + vec4(animOffset, animOffset);
   vTextureId = aTextureId;
   vAlpha = aAlpha;
}
`,b4=`#version 100
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
varying vec2 vTextureCoord;
varying vec4 vFrame;
varying float vTextureId;
varying float vAlpha;
uniform vec4 shadowColor;
uniform sampler2D uSamplers[%count%];
uniform vec2 uSamplerSize[%count%];

void main(void)
{
   vec2 textureCoord = clamp(vTextureCoord, vFrame.xy, vFrame.zw);
   float textureId = floor(vTextureId + 0.5);

   vec4 color;
   %forloop%
   gl_FragColor = color * vAlpha;
}
`;class S4 extends En{constructor(e){super(new Yn(E4,w4(e,b4)),{animationFrame:new Float32Array(2),uSamplers:[],uSamplerSize:[],projTransMatrix:new We}),this.maxTextures=0,this.maxTextures=e,x4(this,this.maxTextures)}}class T4 extends Si{constructor(){super(),this.vertSize=13,this.vertPerQuad=4,this.stride=this.vertSize*4,this.lastTimeAccess=0;const e=this.buf=new it(new Float32Array(2),!0,!1);this.addAttribute("aVertexPosition",e,0,!1,0,this.stride,0).addAttribute("aTextureCoord",e,0,!1,0,this.stride,2*4).addAttribute("aFrame",e,0,!1,0,this.stride,4*4).addAttribute("aAnim",e,0,!1,0,this.stride,8*4).addAttribute("aTextureId",e,0,!1,0,this.stride,10*4).addAttribute("aAnimDivisor",e,0,!1,0,this.stride,11*4).addAttribute("aAlpha",e,0,!1,0,this.stride,12*4)}}class A4 extends ku{constructor(e){super(e),this.tileAnim=[0,0],this.ibLen=0,this.indexBuffer=null,this.textiles=[],this.shader=new S4(qm.TEXTURES_PER_TILEMAP),this.indexBuffer=new it(void 0,!0,!0),this.checkIndexBuffer(2e3),this.makeTextiles()}bindTileTextures(e,r){const n=r.length,i=this.shader,s=qm.TEXTURES_PER_TILEMAP,o=i.uniforms.uSamplerSize;if(!(n>qm.TEXTILE_UNITS*s)){for(let l=0;l<r.length;l++){const h=r[l];if(!h||!h.valid)return;e.texture.bind(r[l],l),o[l*2]=1/r[l].realWidth,o[l*2+1]=1/r[l].realHeight}i.uniforms.uSamplerSize=o}}start(){}createVb(){const e=new T4;return e.addIndex(this.indexBuffer),e.lastTimeAccess=Date.now(),e}getShader(){return this.shader}destroy(){super.destroy(),this.shader=null}checkIndexBuffer(e,r=null){const n=e*6;n<=this.ibLen||(this.ibLen=n,this.indexBuffer.update(pT(e,void 0)))}makeTextiles(){}}ce.add({name:"tilemap",type:te.RendererPlugin,ref:A4});const C4=et.PixiComponent("Tilemap",{create:t=>{const{tilesets:e}=t;return new v4(e)},applyProps:(t,e,r)=>{et.applyDefaultProps(t,e,r)}});function P4({world:t,level:e}){const r=et.useApp(),n=yn.getState().world,i=q.useRef(null),s=La(t),o=q.useMemo(()=>s.defs.tilesets.filter(({relPath:f})=>!!f).map(({relPath:f})=>g4(f,y4(t,f))),[t,s.defs.tilesets]),l=NL(o),h=q.useMemo(()=>Object.values(l).map(f=>f.baseTexture),[l]),c=s.levels.findIndex(({identifier:f})=>f===e);if(!s.levels[c])throw new Error(`Level not found: ${e}`);return q.useEffect(()=>{n.level=e,n.index=c},[e,c,n]),et.useTick(f=>{var y,_,E;n.scroll+=f*.5;const p=s.levels[n.index%s.levels.length],m=s.levels[n.index-1<0?s.levels.length-1:n.index-1];(y=i.current)==null||y.clear(),(_=m.layerInstances)==null||_.forEach(T=>{const S=T.__tilesetRelPath?l[o.findIndex(x=>x.endsWith(T.__tilesetRelPath))]:void 0,b=T.__type==="Tiles"?T.gridTiles:T.autoLayerTiles;!S||b.length===0||b.forEach(x=>{var P;const A=n.scroll-T.__cHei*T.__gridSize;x.px[1]+A+T.__gridSize<0||(P=i.current)==null||P.tile(S.baseTexture,x.px[0],x.px[1]+A,{u:x.src[0],v:x.src[1],tileWidth:T.__gridSize,tileHeight:T.__gridSize})})}),(E=p.layerInstances)==null||E.forEach(T=>{const S=T.__tilesetRelPath?l[o.findIndex(x=>x.endsWith(T.__tilesetRelPath))]:void 0,b=T.__type==="Tiles"?T.gridTiles:T.autoLayerTiles;!S||b.length===0||b.forEach(x=>{var A;x.px[1]+n.scroll>r.renderer.screen.height||(A=i.current)==null||A.tile(S.baseTexture,x.px[0],x.px[1]+n.scroll,{u:x.src[0],v:x.src[1],tileWidth:T.__gridSize,tileHeight:T.__gridSize})})}),n.scroll>p.pxHei&&(n.scroll=n.scroll-p.pxHei,n.index=n.index-1<0?s.levels.length-1:n.index-1)}),xe.jsx(C4,{ref:i,name:`World-${e}`,tilesets:h})}var qA=(t=>(t.PRE_TICK="pre",t.POST_TICK="post",t))(qA||{});const I4={pre:Jn.INTERACTION,post:Jn.UTILITY};function R4(t,e,r=!0){const n=et.useApp(),i=q.useRef(null);q.useEffect(()=>{i.current=e},[e]),q.useEffect(()=>{if(r){const s=o=>{var l;return(l=i.current)==null?void 0:l.apply(n.ticker,[o])};return n.ticker.add(s,void 0,I4[t]),()=>{n.ticker&&n.ticker.remove(s)}}},[r,n.ticker,t])}const M4=5;function k4(t){return function(e){const r=e.x>>t,n=e.y>>t,i=e.x+e.width>>t,s=e.y+e.height>>t,o=[];for(let l=n;l<=s;l++)for(let h=r;h<=i;h++)o.push(""+h+":"+l);return o}}function N4(t=M4){const e=k4(t),r={},n=[];return{clear:()=>{for(const i in r)r[i].length===0?delete r[i]:r[i].length=0;n.length=0},getNumBuckets:()=>{let i=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&r[s].length>0&&i++;return i},insert:(i,s)=>{const o=e(s||i);n.push(i);for(let l=0;l<o.length;l++){const h=o[l];r[h]?r[h].push(i):r[h]=[i]}},retrieve:(i,s)=>{let o=[];if(!i||!s)return n;const l=e(s||i);for(let h=0;h<l.length;h++){const c=l[h];r[c]&&(o=o.concat(r[c]))}return o}}}const Zm=N4(32);function D4(){const t=yn.getState().players,e=yn.getState().enemies,r=yn.getState().bullets,n=yn.getState().collision;return R4(qA.POST_TICK,()=>{const i=[];Zm.clear(),r.pool.activeEntities.forEach(s=>{const o=r.pool.entities[s];Zm.insert({pool:"bullets",id:s,x:o.pos.x,y:o.pos.y,width:o.radius,height:o.radius})}),e.pool.activeEntities.forEach(s=>{const o=e.pool.entities[s];Zm.retrieve(void 0,{x:o.pos.x,y:o.pos.y,width:o.radius,height:o.radius}).forEach(h=>{new Ee(o.pos.x,o.pos.y).subtract({x:h.x,y:h.y}).magnitude()>o.radius+h.width&&i.push({target:{pool:"enemies",id:s},instigator:{pool:"bullets",id:h.id}})})}),n.actions.set(i)}),xe.jsxs(et.Container,{name:"Game",children:[xe.jsx(m4,{name:"Background",image:"./assets/backgrounds/bg-1.png",tilePosition:[0,0],scroll:[0,.25]}),xe.jsx(P4,{world:"./data/world.json",level:"Level_1"}),t.actions.map((i,s)=>xe.jsx(d4,{id:s,atlas:"./assets/ships/atlas.json",texture:i.texture??"ship-1"},s)),xe.jsx(h4,{atlas:"./assets/bullets/atlas.json"})]})}function pE(...t){return F4.play(...t)}const F4={volume:.3,sampleRate:44100,x:new AudioContext,play:function(...t){return this.playSamples(this.buildSamples(...t))},playSamples:function(...t){const e=this.x.createBuffer(t.length,t[0].length,this.sampleRate),r=this.x.createBufferSource();return t.map((n,i)=>e.getChannelData(i).set(n)),r.buffer=e,r.connect(this.x.destination),r.start(),r},buildSamples:function(t=1,e=.05,r=220,n=0,i=0,s=.1,o=0,l=1,h=0,c=0,f=0,p=0,m=0,y=0,_=0,E=0,T=0,S=1,b=0,x=0){let A=Math.PI*2,P=this.sampleRate,F=G=>G>0?1:-1,M=h*=500*A/P/P,N=r*=(1+e*2*Math.random()-e)*A/P,V=[],$=0,fe=0,Y=0,O=1,X=0,ne=0,le=0,se,R;for(n=n*P+9,b*=P,i*=P,s*=P,T*=P,c*=500*A/P**3,_*=A/P,f*=A/P,p*=P,m=m*P|0,R=n+b+i+s+T|0;Y<R;V[Y++]=le)++ne%(E*100|0)||(le=o?o>1?o>2?o>3?Math.sin(($%A)**3):Math.max(Math.min(Math.tan($),1),-1):1-(2*$/A%2+2)%2:1-4*Math.abs(Math.round($/A)-$/A):Math.sin($),le=(m?1-x+x*Math.sin(A*Y/m):1)*F(le)*Math.abs(le)**l*t*this.volume*(Y<n?Y/n:Y<n+b?1-(Y-n)/b*(1-S):Y<n+b+i?S:Y<R-T?(R-Y-T)/s*S:0),le=T?le/2+(T>Y?0:(Y<R-T?1:(R-Y)/T)*V[Y-T|0]/2):le),se=(r+=h+=c)*Math.cos(_*fe++),$+=se-se*y*(1-(Math.sin(Y)+1)*1e9%2),O&&++O>p&&(r+=f,N+=f,O=0),m&&!(++X%m)&&(r=N,h=M,O=O||1);return V},getNote:function(t=0,e=440){return e*2**(t/12)}},O4={fire:()=>pE(void 0,void 0,454,.01,.01,0,2,1.57,-.1,.1,50,.01,.05,.3,-4,.2,.04,.66,.07),start:()=>pE(void 0,void 0,128,.03,.16,.26,1,1.43,1.2,4.5,40,.03,.09,void 0,void 0,void 0,void 0,.62,.2)};function mE(){const t=yn(o=>o.actions),e=yn(o=>o.players),r=T2();q.useEffect(()=>{t.reset(),e.actions.add({texture:"ship-1",pos:{x:gn/2,y:mn/2},radius:16,health:100,maxHealth:100,fireRate:500/60})},[t,e.actions]);const n=q.useCallback(()=>{e.count===0&&(console.log("Adding player"),e.actions.add({texture:"ship-1",pos:{x:gn/2,y:mn/2},radius:16,health:100,maxHealth:100,fireRate:500/60})),O4.start(),r("/game")},[e,r]),i=La("./assets/ships/atlas.json"),s=i.textures["ship-1"].width;return xe.jsxs(et.Container,{name:"Title",interactive:!0,pointerdown:n,children:[xe.jsx(et.Text,{text:"INFINISTG",anchor:[.5,.5],x:gn/2,y:mn/2,style:new Ai({align:"center",fill:"0xf7f7f7",fontSize:32,letterSpacing:4})}),xe.jsxs(et.Container,{x:gn/2-s*5/2,y:mn/2+18,children:[xe.jsx(js,{texture:i.textures["ship-1"]}),xe.jsx(js,{x:s*1,texture:i.textures["ship-2"]}),xe.jsx(js,{x:s*2,texture:i.textures["ship-3"]}),xe.jsx(js,{x:s*3,texture:i.textures["ship-4"]}),xe.jsx(js,{x:s*4,texture:i.textures["ship-5"]})]})]})}const ZA={add(t,e){return e||(e=new Ee),e.x=this.x+t.x,e.y=this.y+t.y,e},subtract(t,e){return e||(e=new Ee),e.x=this.x-t.x,e.y=this.y-t.y,e},multiply(t,e){return e||(e=new Ee),e.x=this.x*t.x,e.y=this.y*t.y,e},multiplyScalar(t,e){return e||(e=new Ee),e.x=this.x*t,e.y=this.y*t,e},dot(t){return this.x*t.x+this.y*t.y},cross(t){return this.x*t.y-this.y*t.x},normalize(t){t||(t=new Ee);const e=Math.sqrt(this.x*this.x+this.y*this.y);return t.x=this.x/e,t.y=this.y/e,t},magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSquared(){return this.x*this.x+this.y*this.y},project(t,e){e||(e=new Ee);const r=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return e.x=t.x*r,e.y=t.y*r,e},reflect(t,e){e||(e=new Ee);const r=this.x*t.x+this.y*t.y;return e.x=this.x-2*r*t.x,e.y=this.y-2*r*t.y,e}};Object.assign(Ee.prototype,ZA);Object.assign(fn.prototype,ZA);we.prototype.containsRect=function(t){return t.width<=0||t.height<=0?t.x>this.x&&t.y>this.y&&t.right<this.right&&t.bottom<this.bottom:t.x>=this.x&&t.y>=this.y&&t.right<=this.right&&t.bottom<=this.bottom};we.prototype.equals=function(t){return t===this?!0:t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height};we.prototype.intersection=function(t,e){e||(e=new we);const r=this.x<t.x?t.x:this.x,n=this.right>t.right?t.right:this.right;if(n<=r)return e.x=e.y=e.width=e.height=0,e;const i=this.y<t.y?t.y:this.y,s=this.bottom>t.bottom?t.bottom:this.bottom;return s<=i?(e.x=e.y=e.width=e.height=0,e):(e.x=r,e.y=i,e.width=n-r,e.height=s-i,e)};we.prototype.union=function(t,e){e||(e=new we);const r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return e.x=r,e.y=i,e.width=n-r,e.height=s-i,e};Se.defaultOptions.scaleMode=dn.NEAREST;oe.ROUND_PIXELS=!0;function B4(){return xe.jsxs(IL,{width:gn,height:mn,options:{background:kL},loading:xe.jsx(et.Text,{text:"Loading..."}),children:[xe.jsx(PL,{}),xe.jsx(ML,{}),xe.jsx(z2,{children:xe.jsxs(H2,{children:[xe.jsx(Pc,{path:"/",element:xe.jsx(mE,{})}),xe.jsx(Pc,{path:"/title",element:xe.jsx(mE,{})}),xe.jsx(Pc,{path:"/game",element:xe.jsx(D4,{})})]})})]})}Jm.createRoot(document.getElementById("root")).render(xe.jsx(Tr.StrictMode,{children:xe.jsx(B4,{})}))});export default L4();
